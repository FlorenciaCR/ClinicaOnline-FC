"use strict";var hF=Object.defineProperty,fF=Object.defineProperties,pF=Object.getOwnPropertyDescriptors,l1=Object.getOwnPropertySymbols,gF=Object.prototype.hasOwnProperty,mF=Object.prototype.propertyIsEnumerable,c1=(Je,we,N)=>we in Je?hF(Je,we,{enumerable:!0,configurable:!0,writable:!0,value:N}):Je[we]=N,d1=(Je,we)=>{for(var N in we||(we={}))gF.call(we,N)&&c1(Je,N,we[N]);if(l1)for(var N of l1(we))mF.call(we,N)&&c1(Je,N,we[N]);return Je},h1=(Je,we)=>fF(Je,pF(we));(self.webpackChunkTP_ClinicaOnline_FlorenciaColodro=self.webpackChunkTP_ClinicaOnline_FlorenciaColodro||[]).push([[179],{2011:(Je,we,N)=>{N.d(we,{hO:()=>Ge,xv:()=>de,Dh:()=>oe,GT:()=>pe,cc:()=>Se,on:()=>$,pX:()=>re});var h=N(5e3),X=N(127),O=N(5813);Je=N.hmd(Je);const ue=["ngOnDestroy"],re=(Ce,qe,Ke,Te={})=>new Proxy(Ce,{get:(Ee,be)=>Ke.runOutsideAngular(()=>{var je;if(Ce[be])return(null===(je=null==Te?void 0:Te.spy)||void 0===je?void 0:je.get)&&Te.spy.get(be,Ce[be]),Ce[be];if(ue.indexOf(be)>-1)return()=>{};const Be=qe.toPromise().then(j=>{const ve=j&&j[be];return"function"==typeof ve?ve.bind(j):ve&&ve.then?ve.then(W=>Ke.run(()=>W)):Ke.run(()=>ve)});return new Proxy(()=>{},{get:(j,ve)=>Be[ve],apply:(j,ve,W)=>Be.then(ie=>{var ee;const me=ie&&ie(...W);return(null===(ee=null==Te?void 0:Te.spy)||void 0===ee?void 0:ee.apply)&&Te.spy.apply(be,W,me),me})})})}),pe=(Ce,qe)=>{qe.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Te=>{Object.defineProperty(Ce.prototype,Te,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Te))})})};class le{constructor(qe){return qe}}const oe=new h.OlP("angularfire2.app.options"),de=new h.OlP("angularfire2.app.name");function $(Ce,qe,Ke){const Ee="object"==typeof Ke&&Ke||{};Ee.name=Ee.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const je=X.Z.apps.filter(Be=>Be&&Be.name===Ee.name)[0]||qe.runOutsideAngular(()=>X.Z.initializeApp(Ce,Ee));try{JSON.stringify(Ce)!==JSON.stringify(je.options)&&B("error",`${je.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new le(je)}const B=(Ce,...qe)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Ce](...qe)},te={provide:le,useFactory:$,deps:[oe,h.R0b,[new h.FiY,de]]};let Ge=(()=>{class Ce{constructor(Ke){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",h.q4F.full,Ke.toString())}static initializeApp(Ke,Te){return{ngModule:Ce,providers:[{provide:oe,useValue:Ke},{provide:de,useValue:Te}]}}}return Ce.\u0275fac=function(Ke){return new(Ke||Ce)(h.LFG(h.Lbi))},Ce.\u0275mod=h.oAB({type:Ce}),Ce.\u0275inj=h.cJS({providers:[te]}),Ce})();function Se(Ce,qe,Ke,Te,Ee){const[,be,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ce)||[];if(be)return function Re(Ce,qe){try{return Ce.toString()===qe.toString()}catch(Ke){return Ce===qe}}(Ee,je)||(he("error",`${qe} was already initialized on the ${Ke} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:Ee,was:je})),be;{const Be=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Be,Ee]),Be}}const Ve=!!Je.hot,he=(Ce,...qe)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Ce](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,we,N)=>{N.d(we,{q4:()=>lo,iC:()=>Wo,fc:()=>Zn,HU:()=>Yc,vb:()=>Kc,JM:()=>wp});var h=N(5e3),X=N(5867),O=N(5861),ue=N(9681),re=N(2090),pe=N(4859),le=N(1877),oe=N(8766);const de="@firebase/installations",$="0.5.9",te=`w:${$}`,Ge="FIS_v2",qe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Te({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ee(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function be(I,D){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(I,D){const F=(yield D.json()).error;return qe.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function j(I,{refreshToken:D}){const M=Be(I);return M.append("Authorization",function ee(I){return`${Ge} ${I}`}(D)),M}function ve(I){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function me(I,D){return ae.apply(this,arguments)}function ae(){return(ae=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:M}){const F=Te(I),Y=Be(I),ne=D.getImmediate({optional:!0});if(ne){const ut=yield ne.getHeartbeatsHeader();ut&&Y.append("x-firebase-client",ut)}const Le={method:"POST",headers:Y,body:JSON.stringify({fid:M,authVersion:Ge,appId:I.appId,sdkVersion:te})},vt=yield ve(()=>fetch(F,Le));if(vt.ok){const ut=yield vt.json();return{fid:ut.fid||M,registrationStatus:2,refreshToken:ut.refreshToken,authToken:Ee(ut.authToken)}}throw yield be("Create Installation",vt)})).apply(this,arguments)}function Ne(I){return new Promise(D=>{setTimeout(D,I)})}const Vt=/^[cdef][\w-]{21}$/;function Ye(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function Kt(I){return function ot(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Vt.test(M)?M:""}catch(I){return""}}function vn(I){return`${I.appName}!${I.appId}`}const Jt=new Map;function zt(I,D){const M=vn(I);Nt(M,D),function Xi(I,D){const M=function ur(){return!Kr&&"BroadcastChannel"in self&&(Kr=new BroadcastChannel("[Firebase] FID Change"),Kr.onmessage=I=>{Nt(I.data.key,I.data.fid)}),Kr}();M&&M.postMessage({key:I,fid:D}),function br(){0===Jt.size&&Kr&&(Kr.close(),Kr=null)}()}(M,D)}function Nt(I,D){const M=Jt.get(I);if(M)for(const F of M)F(D)}let Kr=null;const Yr="firebase-installations-store";let bi=null;function dt(){return bi||(bi=(0,oe.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Yr)}})),bi}function Qr(I,D){return fn.apply(this,arguments)}function fn(){return(fn=(0,O.Z)(function*(I,D){const M=vn(I),Y=(yield dt()).transaction(Yr,"readwrite"),ne=Y.objectStore(Yr),ge=yield ne.get(M);return yield ne.put(D,M),yield Y.done,(!ge||ge.fid!==D.fid)&&zt(I,D.fid),D})).apply(this,arguments)}function En(I){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(I){const D=vn(I),F=(yield dt()).transaction(Yr,"readwrite");yield F.objectStore(Yr).delete(D),yield F.done})).apply(this,arguments)}function Jr(I,D){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(I,D){const M=vn(I),Y=(yield dt()).transaction(Yr,"readwrite"),ne=Y.objectStore(Yr),ge=yield ne.get(M),Le=D(ge);return void 0===Le?yield ne.delete(M):yield ne.put(Le,M),yield Y.done,Le&&(!ge||ge.fid!==Le.fid)&&zt(I,Le.fid),Le})).apply(this,arguments)}function Mn(I){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(I){let D;const M=yield Jr(I.appConfig,F=>{const Y=Co(F),ne=Ut(I,Y);return D=ne.registrationPromise,ne.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function Co(I){return Ws(I||{fid:Ye(),registrationStatus:0})}function Ut(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(qe.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(I,D){return pt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:lr(I)}:{installationEntry:D}}function pt(){return(pt=(0,O.Z)(function*(I,D){try{const M=yield me(I,D);return Qr(I.appConfig,M)}catch(M){throw Ke(M)&&409===M.customData.serverCode?yield En(I.appConfig):yield Qr(I.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function lr(I){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,O.Z)(function*(I){let D=yield kt(I.appConfig);for(;1===D.registrationStatus;)yield Ne(100),D=yield kt(I.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Mn(I);return F||M}return D})).apply(this,arguments)}function kt(I){return Jr(I,D=>{if(!D)throw qe.create("installation-not-found");return Ws(D)})}function Ws(I){return function cr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function dr(I,D){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},M){const F=G(I,M),Y=j(I,M),ne=D.getImmediate({optional:!0});if(ne){const ut=yield ne.getHeartbeatsHeader();ut&&Y.append("x-firebase-client",ut)}const Le={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:I.appId}})},vt=yield ve(()=>fetch(F,Le));if(vt.ok)return Ee(yield vt.json());throw yield be("Generate Auth Token",vt)})).apply(this,arguments)}function G(I,{fid:D}){return`${Te(I)}/${D}/authTokens:generate`}function q(I){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(I,D=!1){let M;const F=yield Jr(I.appConfig,ne=>{if(!_t(ne))throw qe.create("not-registered");const ge=ne.authToken;if(!D&&sn(ge))return ne;if(1===ge.requestStatus)return M=H(I,D),ne;{if(!navigator.onLine)throw qe.create("app-offline");const Le=kn(ne);return M=Qe(I,Le),Le}});return M?yield M:F.authToken})).apply(this,arguments)}function H(I,D){return J.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(I,D){let M=yield xe(I.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield xe(I.appConfig);const F=M.authToken;return 0===F.requestStatus?q(I,D):F})).apply(this,arguments)}function xe(I){return Jr(I,D=>{if(!_t(D))throw qe.create("not-registered");return function Ir(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Qe(I,D){return lt.apply(this,arguments)}function lt(){return(lt=(0,O.Z)(function*(I,D){try{const M=yield dr(I,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield Qr(I.appConfig,F),M}catch(M){if(!Ke(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Qr(I.appConfig,F)}else yield En(I.appConfig);throw M}})).apply(this,arguments)}function _t(I){return void 0!==I&&2===I.registrationStatus}function sn(I){return 2===I.requestStatus&&!function mt(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function kn(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function ga(){return(ga=(0,O.Z)(function*(I){const D=I,{installationEntry:M,registrationPromise:F}=yield Mn(D);return F?F.catch(console.error):q(D).catch(console.error),M.fid})).apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(I,D=!1){const M=I;return yield Fn(M),(yield q(M,D)).token})).apply(this,arguments)}function Fn(I){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,O.Z)(function*(I){const{registrationPromise:D}=yield Mn(I);D&&(yield D)})).apply(this,arguments)}function Do(I){return qe.create("missing-app-config-values",{valueName:I})}const Fr="installations",it=I=>{const D=I.getProvider("app").getImmediate(),M=function Jn(I){if(!I||!I.options)throw Do("App Configuration");if(!I.name)throw Do("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!I.options[M])throw Do(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,ue._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Yt=I=>{const D=I.getProvider("app").getImmediate(),M=(0,ue._getProvider)(D,Fr).getImmediate();return{getId:()=>function au(I){return ga.apply(this,arguments)}(M),getToken:Y=>function uu(I){return ma.apply(this,arguments)}(M,Y)}};(function Lr(){(0,ue._registerComponent)(new pe.wA(Fr,it,"PUBLIC")),(0,ue._registerComponent)(new pe.wA("installations-internal",Yt,"PRIVATE"))})(),(0,ue.registerVersion)(de,$),(0,ue.registerVersion)(de,$,"esm2017");const Oi="@firebase/remote-config",wn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class cp{constructor(D,M,F,Y){this.client=D,this.storage=M,this.storageCache=F,this.logger=Y}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Y=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Y;D.eTag=Y&&Y.eTag;const ne=yield M.client.fetch(D),ge=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&ge.push(M.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(ge),ne})()}}function Sc(I=navigator){return I.languages&&I.languages[0]||I.language}class hr{constructor(D,M,F,Y,ne,ge){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=Y,this.apiKey=ne,this.appId=ge}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),ge=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Le={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},vt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:Y,app_id:M.appId,language_code:Sc()},ut={method:"POST",headers:Le,body:JSON.stringify(vt)},Ft=fetch(ge,ut),yt=new Promise((ui,li)=>{D.signal.addEventListener(()=>{const Mu=new Error("The operation was aborted.");Mu.name="AbortError",li(Mu)})});let pr;try{yield Promise.race([Ft,yt]),pr=yield Ft}catch(ui){let li="fetch-client-network";throw"AbortError"===ui.name&&(li="fetch-timeout"),wn.create(li,{originalErrorMessage:ui.message})}let Wn=pr.status;const as=pr.headers.get("ETag")||void 0;let jr,ai;if(200===pr.status){let ui;try{ui=yield pr.json()}catch(li){throw wn.create("fetch-client-parse",{originalErrorMessage:li.message})}jr=ui.entries,ai=ui.state}if("INSTANCE_STATE_UNSPECIFIED"===ai?Wn=500:"NO_CHANGE"===ai?Wn=304:("NO_TEMPLATE"===ai||"EMPTY_CONFIG"===ai)&&(jr={}),304!==Wn&&200!==Wn)throw wn.create("fetch-status",{httpStatus:Wn});return{status:Wn,eTag:as,config:jr}})()}}class dp{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var Y=this;return(0,O.Z)(function*(){yield function Ts(I,D){return new Promise((M,F)=>{const Y=Math.max(D-Date.now(),0),ne=setTimeout(M,Y);I.addEventListener(()=>{clearTimeout(ne),F(wn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const ne=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function xc(I){if(!(I instanceof re.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const ge={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(ge),Y.attemptFetch(D,ge)}})()}}class Mc{constructor(D,M,F,Y,ne){this.app=D,this._client=M,this._storageCache=F,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function dl(I,D){const M=I.target.error||void 0;return wn.create(D,{originalErrorMessage:M&&M.message})}const As="app_namespace_store";class pp{constructor(D,M,F,Y=function fp(){return new Promise((I,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{D(dl(F,"storage-open"))},M.onsuccess=F=>{I(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(As,{keyPath:"compositeKey"})}}catch(M){D(wn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,ne)=>{const Le=F.transaction([As],"readonly").objectStore(As),vt=M.createCompositeKey(D);try{const ut=Le.get(vt);ut.onerror=Ft=>{ne(dl(Ft,"storage-get"))},ut.onsuccess=Ft=>{const yt=Ft.target.result;Y(yt?yt.value:void 0)}}catch(ut){ne(wn.create("storage-get",{originalErrorMessage:ut&&ut.message}))}})})()}set(D,M){var F=this;return(0,O.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((ne,ge)=>{const vt=Y.transaction([As],"readwrite").objectStore(As),ut=F.createCompositeKey(D);try{const Ft=vt.put({compositeKey:ut,value:M});Ft.onerror=yt=>{ge(dl(yt,"storage-set"))},Ft.onsuccess=()=>{ne()}}catch(Ft){ge(wn.create("storage-set",{originalErrorMessage:Ft&&Ft.message}))}})})()}delete(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,ne)=>{const Le=F.transaction([As],"readwrite").objectStore(As),vt=M.createCompositeKey(D);try{const ut=Le.delete(vt);ut.onerror=Ft=>{ne(dl(Ft,"storage-delete"))},ut.onsuccess=()=>{Y()}}catch(ut){ne(wn.create("storage-delete",{originalErrorMessage:ut&&ut.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Pc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),ne=yield M;ne&&(D.lastFetchStatus=ne);const ge=yield F;ge&&(D.lastSuccessfulFetchTimestampMillis=ge);const Le=yield Y;Le&&(D.activeConfig=Le)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function hu(){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}!function To(){(0,ue._registerComponent)(new pe.wA("remote-config",function I(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw wn.create("registration-window");if(!(0,re.hl)())throw wn.create("indexed-db-unavailable");const{projectId:ne,apiKey:ge,appId:Le}=F.options;if(!ne)throw wn.create("registration-project-id");if(!ge)throw wn.create("registration-api-key");if(!Le)throw wn.create("registration-app-id");const vt=new pp(Le,F.name,M=M||"firebase"),ut=new Pc(vt),Ft=new le.Yd(Oi);Ft.logLevel=le.in.ERROR;const yt=new hr(Y,ue.SDK_VERSION,M,ne,ge,Le),pr=new dp(yt,vt),Wn=new cp(pr,vt,ut,Ft),as=new Mc(F,Wn,ut,vt,Ft);return function Xt(I){const D=(0,re.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(as),as},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Oi,"0.3.8"),(0,ue.registerVersion)(Oi,"0.3.8","esm2017")}();const Oc="/firebase-messaging-sw.js",fr="/firebase-cloud-messaging-push-scope",Qs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ao="google.c.a.c_id",kc="google.c.a.c_l",dh="google.c.a.ts",Fc="google.c.a.e";var So=(()=>{return(I=So||(So={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",So;var I})();function Dr(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lc(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Y=new Uint8Array(F.length);for(let ne=0;ne<F.length;++ne)Y[ne]=F.charCodeAt(ne);return Y}const Tr="fcm_token_details_db",ei="fcm_token_object_Store";function hl(I){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Tr))return null;let D=null;return(yield(0,oe.X3)(Tr,5,{upgrade:(F=(0,O.Z)(function*(Y,ne,ge,Le){var vt;if(ne<2||!Y.objectStoreNames.contains(ei))return;const ut=Le.objectStore(ei),Ft=yield ut.index("fcmSenderId").get(I);if(yield ut.clear(),Ft)if(2===ne){const yt=Ft;if(!yt.auth||!yt.p256dh||!yt.endpoint)return;D={token:yt.fcmToken,createTime:null!==(vt=yt.createTime)&&void 0!==vt?vt:Date.now(),subscriptionOptions:{auth:yt.auth,p256dh:yt.p256dh,endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:"string"==typeof yt.vapidKey?yt.vapidKey:Dr(yt.vapidKey)}}}else if(3===ne){const yt=Ft;D={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:Dr(yt.auth),p256dh:Dr(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:Dr(yt.vapidKey)}}}else if(4===ne){const yt=Ft;D={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:Dr(yt.auth),p256dh:Dr(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:Dr(yt.vapidKey)}}}}),function(ne,ge,Le,vt){return F.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Tr),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),fl(D)?D:null;var F}),Vc.apply(this,arguments)}function fl(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Bi="firebase-messaging-store";let hh=null;function en(){return hh||(hh=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Bi)}})),hh}function wa(I){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(I){const D=Xn(I),F=yield(yield en()).transaction(Bi).objectStore(Bi).get(D);if(F)return F;{const Y=yield hl(I.appConfig.senderId);if(Y)return yield Zt(I,Y),Y}})).apply(this,arguments)}function Zt(I,D){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(I,D){const M=Xn(I),Y=(yield en()).transaction(Bi,"readwrite");return yield Y.objectStore(Bi).put(D,M),yield Y.done,D})).apply(this,arguments)}function fu(I){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(I){const D=Xn(I),F=(yield en()).transaction(Bi,"readwrite");yield F.objectStore(Bi).delete(D),yield F.done})).apply(this,arguments)}function Xn({appConfig:I}){return I.appId}const dn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ji(I,D){return er.apply(this,arguments)}function er(){return(er=(0,O.Z)(function*(I,D){const M=yield Ro(I),F=Po(D),Y={method:"POST",headers:M,body:JSON.stringify(F)};let ne;try{ne=yield(yield fetch($i(I.appConfig),Y)).json()}catch(ge){throw dn.create("token-subscribe-failed",{errorInfo:ge})}if(ne.error)throw dn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw dn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function eo(I,D){return ns.apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(I,D){const M=yield Ro(I),F=Po(D.subscriptionOptions),Y={method:"PATCH",headers:M,body:JSON.stringify(F)};let ne;try{ne=yield(yield fetch(`${$i(I.appConfig)}/${D.token}`,Y)).json()}catch(ge){throw dn.create("token-update-failed",{errorInfo:ge})}if(ne.error)throw dn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw dn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Ia(I,D){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(I,D){const F={method:"DELETE",headers:yield Ro(I)};try{const ne=yield(yield fetch(`${$i(I.appConfig)}/${D}`,F)).json();if(ne.error)throw dn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw dn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function $i({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ro(I){return ct.apply(this,arguments)}function ct(){return(ct=(0,O.Z)(function*({appConfig:I,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Po({p256dh:I,auth:D,endpoint:M,vapidKey:F}){const Y={web:{endpoint:M,auth:D,p256dh:I}};return F!==Qs&&(Y.web.applicationPubKey=F),Y}const pu=6048e5;function Ca(I){return ml.apply(this,arguments)}function ml(){return(ml=(0,O.Z)(function*(I){const D=yield un(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Dr(D.getKey("auth")),p256dh:Dr(D.getKey("p256dh"))},F=yield wa(I.firebaseDependencies);if(F){if(to(F.subscriptionOptions,M))return Date.now()>=F.createTime+pu?_l(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Ia(I.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return Rt(I.firebaseDependencies,M)}return Rt(I.firebaseDependencies,M)})).apply(this,arguments)}function Da(I){return yl.apply(this,arguments)}function yl(){return(yl=(0,O.Z)(function*(I){const D=yield wa(I.firebaseDependencies);D&&(yield Ia(I.firebaseDependencies,D.token),yield fu(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function _l(I,D){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,O.Z)(function*(I,D){try{const M=yield eo(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Zt(I.firebaseDependencies,F),M}catch(M){throw yield Da(I),M}})).apply(this,arguments)}function Rt(I,D){return gu.apply(this,arguments)}function gu(){return(gu=(0,O.Z)(function*(I,D){const F={token:yield ji(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Zt(I,F),F.token})).apply(this,arguments)}function un(I,D){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lc(D)})})).apply(this,arguments)}function to(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function ti(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Ta(I,D){if(!D.notification)return;I.notification={};const M=D.notification.title;M&&(I.notification.title=M);const F=D.notification.body;F&&(I.notification.body=F);const Y=D.notification.image;Y&&(I.notification.image=Y)}(D,I),function vl(I,D){!D.data||(I.data=D.data)}(D,I),function gp(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const M=D.fcmOptions.link;M&&(I.fcmOptions.link=M);const F=D.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(D,I),D}function mu(I){return"object"==typeof I&&!!I&&Ao in I}function Aa(I,D){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function bn(I){return dn.create("missing-app-config-values",{valueName:I})}Aa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Aa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class rs{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function yu(I){if(!I||!I.options)throw bn("App Configuration Object");if(!I.name)throw bn("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of D)if(!M[F])throw bn(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Sa(I){return xs.apply(this,arguments)}function xs(){return(xs=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Oc,{scope:fr}),I.swRegistration.update().catch(()=>{})}catch(D){throw dn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ti(I,D){return El.apply(this,arguments)}function El(){return(El=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield Sa(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function _u(I,D){return wl.apply(this,arguments)}function wl(){return(wl=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Qs)})).apply(this,arguments)}function xa(){return(xa=(0,O.Z)(function*(I,D){if(!navigator)throw dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dn.create("permission-blocked");return yield _u(I,null==D?void 0:D.vapidKey),yield Ti(I,null==D?void 0:D.serviceWorkerRegistration),Ca(I)})).apply(this,arguments)}function Ma(I,D,M){return bl.apply(this,arguments)}function bl(){return(bl=(0,O.Z)(function*(I,D,M){const F=Ra(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ao],message_name:M[kc],message_time:M[dh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ra(I){switch(I){case So.NOTIFICATION_CLICKED:return"notification_open";case So.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Il(){return(Il=(0,O.Z)(function*(I,D){const M=D.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===So.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ti(M)):I.onMessageHandler.next(ti(M)));const F=M.data;mu(F)&&"1"===F[Fc]&&(yield Ma(I,M.messageType,F))})).apply(this,arguments)}const Oo="@firebase/messaging",Uc=I=>{const D=new rs(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function mp(I,D){return Il.apply(this,arguments)}(D,M)),D},ko=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function vu(I,D){return xa.apply(this,arguments)}(D,F)}};function Fo(){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bc(){(0,ue._registerComponent)(new pe.wA("messaging",Uc,"PUBLIC")),(0,ue._registerComponent)(new pe.wA("messaging-internal",ko,"PRIVATE")),(0,ue.registerVersion)(Oo,"0.9.13"),(0,ue.registerVersion)(Oo,"0.9.13","esm2017")}();const jc="analytics",yp="firebase_id",is="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lo="https://www.googletagmanager.com/gtag/js",Gn=new le.Yd("@firebase/analytics");function gh(I){return Promise.all(I.map(D=>D.catch(M=>M)))}function no(I,D){const M=document.createElement("script");M.src=`${Lo}?l=${I}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Hc(I,D,M,F,Y,ne){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(I,D,M,F,Y,ne){const ge=F[Y];try{if(ge)yield D[ge];else{const vt=(yield gh(M)).find(ut=>ut.measurementId===Y);vt&&(yield D[vt.appId])}}catch(Le){Gn.error(Le)}I("config",Y,ne)})).apply(this,arguments)}function bu(I,D,M,F,Y){return ro.apply(this,arguments)}function ro(){return(ro=(0,O.Z)(function*(I,D,M,F,Y){try{let ne=[];if(Y&&Y.send_to){let ge=Y.send_to;Array.isArray(ge)||(ge=[ge]);const Le=yield gh(M);for(const vt of ge){const ut=Le.find(yt=>yt.measurementId===vt),Ft=ut&&D[ut.appId];if(!Ft){ne=[];break}ne.push(Ft)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),I("event",F,Y||{})}catch(ne){Gn.error(ne)}})).apply(this,arguments)}function tn(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(Lo))return D;return null}const Xe=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Cl=new class In{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function qc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function qi(I){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,O.Z)(function*(I){var D;const{appId:M,apiKey:F}=I,Y={method:"GET",headers:qc(F)},ne=is.replace("{app-id}",M),ge=yield fetch(ne,Y);if(200!==ge.status&&304!==ge.status){let Le="";try{const vt=yield ge.json();(null===(D=vt.error)||void 0===D?void 0:D.message)&&(Le=vt.error.message)}catch(vt){}throw Xe.create("config-fetch-failed",{httpStatus:ge.status,responseMessage:Le})}return ge.json()})).apply(this,arguments)}function nn(I){return ka.apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(I,D=Cl,M){const{appId:F,apiKey:Y,measurementId:ne}=I.options;if(!F)throw Xe.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:F};throw Xe.create("no-api-key")}const ge=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new Zc;return setTimeout((0,O.Z)(function*(){Le.abort()}),void 0!==M?M:6e4),Ai({appId:F,apiKey:Y,measurementId:ne},ge,Le,D)})).apply(this,arguments)}function Ai(I,D,M){return At.apply(this,arguments)}function At(){return(At=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:M},F,Y=Cl){const{appId:ne,measurementId:ge}=I;try{yield Iu(F,D)}catch(Le){if(ge)return Gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:ne,measurementId:ge};throw Le}try{const Le=yield qi(I);return Y.deleteThrottleMetadata(ne),Le}catch(Le){if(!zc(Le)){if(Y.deleteThrottleMetadata(ne),ge)return Gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:ne,measurementId:ge};throw Le}const vt=503===Number(Le.customData.httpStatus)?(0,re.$s)(M,Y.intervalMillis,30):(0,re.$s)(M,Y.intervalMillis),ut={throttleEndTimeMillis:Date.now()+vt,backoffCount:M+1};return Y.setThrottleMetadata(ne,ut),Gn.debug(`Calling attemptFetch again in ${vt} millis`),Ai(I,ut,F,Y)}})).apply(this,arguments)}function Iu(I,D){return new Promise((M,F)=>{const Y=Math.max(D-Date.now(),0),ne=setTimeout(M,Y);I.addEventListener(()=>{clearTimeout(ne),F(Xe.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function zc(I){if(!(I instanceof re.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Zc{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Tl(){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(){if(!(0,re.hl)())return Gn.warn(Xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return Gn.warn(Xe.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(I,D,M,F,Y,ne,ge){var Le;const vt=nn(I);vt.then(Wn=>{M[Wn.measurementId]=Wn.appId,I.options.measurementId&&Wn.measurementId!==I.options.measurementId&&Gn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wn=>Gn.error(Wn)),D.push(vt);const ut=Tl().then(Wn=>{if(Wn)return F.getId()}),[Ft,yt]=yield Promise.all([vt,ut]);tn()||no(ne,Ft.measurementId),Y("js",new Date);const pr=null!==(Le=null==ge?void 0:ge.config)&&void 0!==Le?Le:{};return pr.origin="firebase",pr.update=!0,null!=yt&&(pr[yp]=yt),Y("config",Ft.measurementId,pr),Ft.measurementId})).apply(this,arguments)}class Ms{constructor(D){this.app=D}_delete(){return delete tr[this.app.options.appId],Promise.resolve()}}let tr={},Cu=[];const Rs={};let jo,io,Bo="dataLayer",$o=!1;function Fa(I,D,M){!function Go(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),M=Xe.create("invalid-analytics-context",{errorInfo:D});Gn.warn(M.message)}}();const F=I.options.appId;if(!F)throw Xe.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Xe.create("no-api-key");Gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=tr[F])throw Xe.create("already-exists",{id:F});if(!$o){!function Eu(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Bo);const{wrappedGtag:ne,gtagCore:ge}=function _p(I,D,M,F,Y){let ne=function(...ge){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function Gc(I,D,M,F){function ne(){return(ne=(0,O.Z)(function*(ge,Le,vt){try{"event"===ge?yield bu(I,D,M,Le,vt):"config"===ge?yield Hc(I,D,M,F,Le,vt):I("set",Le)}catch(ut){Gn.error(ut)}})).apply(this,arguments)}return function Y(ge,Le,vt){return ne.apply(this,arguments)}}(ne,I,D,M),{gtagCore:ne,wrappedGtag:window[Y]}}(tr,Cu,Rs,Bo,"gtag");io=ne,jo=ge,$o=!0}return tr[F]=function Vo(I,D,M,F,Y,ne,ge){return Uo.apply(this,arguments)}(I,Cu,Rs,D,jo,Bo,M),new Ms(I)}function qn(){return(qn=(0,O.Z)(function*(I,D,M,F,Y){if(Y&&Y.global)I("event",M,F);else{const ne=yield D;I("event",M,Object.assign(Object.assign({},F),{send_to:ne}))}})).apply(this,arguments)}function Tu(){return La.apply(this,arguments)}function La(){return(La=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const Ur="@firebase/analytics";!function Os(){(0,ue._registerComponent)(new pe.wA(jc,(D,{options:M})=>Fa(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ue._registerComponent)(new pe.wA("analytics-internal",function I(D){try{const M=D.getProvider(jc).getImmediate();return{logEvent:(F,Y,ne)=>function qo(I,D,M,F){I=(0,re.m9)(I),function Ns(I,D,M,F,Y){return qn.apply(this,arguments)}(io,tr[I.app.options.appId],D,M,F).catch(Y=>Gn.error(Y))}(M,F,Y,ne)}}catch(M){throw Xe.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ue.registerVersion)(Ur,"0.7.9"),(0,ue.registerVersion)(Ur,"0.7.9","esm2017")}();var ao=N(4408),hn=N(7565);const uo=new class Al extends hn.v{}(class Au extends ao.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var Sl=N(4986),oi=N(8505),Br=N(5363),zo=N(9468);const lo=new h.GfV("7.3.0"),co="__angularfire_symbol__analyticsIsSupportedValue",Zo="__angularfire_symbol__analyticsIsSupported",ho="__angularfire_symbol__remoteConfigIsSupportedValue",os="__angularfire_symbol__remoteConfigIsSupported",Va="__angularfire_symbol__messagingIsSupportedValue",xt="__angularfire_symbol__messagingIsSupported";function wp(I,D,M){if(D){if(1===D.length)return D[0];const ne=D.filter(ge=>ge.app===M);if(1===ne.length)return ne[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Zo]||(globalThis[Zo]=Tu().then(I=>globalThis[co]=I).catch(()=>globalThis[co]=!1)),globalThis[xt]||(globalThis[xt]=Fo().then(I=>globalThis[Va]=I).catch(()=>globalThis[Va]=!1)),globalThis[os]||(globalThis[os]=hu().then(I=>globalThis[ho]=I).catch(()=>globalThis[ho]=!1));const Kc=(I,D)=>{const M=D?[D]:(0,X.C6)(),F=[];return M.forEach(Y=>{Y.container.getProvider(I).instances.forEach(ge=>{F.includes(ge)||F.push(ge)})}),F};function Fs(){}class Si{constructor(D,M=uo){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const Y=this.zone;return this.delegate.schedule(function(ge){Y.runGuarded(()=>{D.apply(this,[ge])})},M,F)}}class xu{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fs,{},Fs,Fs)),M.pipe((0,oi.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yc=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Si(Zone.current)),this.insideAngular=M.run(()=>new Si(Zone.current,Sl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(h.LFG(h.R0b))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Wi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Zn(I){return I.pipe((0,Br.Q)(Wi().outsideAngular))}function Wo(I){return Wi(),function Ko(I){return function(M){return(M=M.lift(new xu(I.ngZone))).pipe((0,zo.R)(I.outsideAngular),(0,Br.Q)(I.insideAngular))}}(Wi())(I)}},2090:(Je,we,N)=>{N.d(we,{BH:()=>Ge,LL:()=>ae,ZR:()=>me,zI:()=>W,US:()=>pe,tV:()=>de,L:()=>oe,$s:()=>kt,r3:()=>wr,Sg:()=>Se,ne:()=>bi,vZ:()=>Kr,ZB:()=>B,pd:()=>ws,m9:()=>dr,z$:()=>Re,jU:()=>Ce,ru:()=>qe,d:()=>Te,xb:()=>Nt,w1:()=>Ee,hl:()=>j,uI:()=>Ve,UG:()=>he,b$:()=>Ke,G6:()=>Be,Mn:()=>be,xO:()=>br,zd:()=>Ni,eu:()=>ve});const ue=function(L){const G=[];let q=0;for(let Ie=0;Ie<L.length;Ie++){let H=L.charCodeAt(Ie);H<128?G[q++]=H:H<2048?(G[q++]=H>>6|192,G[q++]=63&H|128):55296==(64512&H)&&Ie+1<L.length&&56320==(64512&L.charCodeAt(Ie+1))?(H=65536+((1023&H)<<10)+(1023&L.charCodeAt(++Ie)),G[q++]=H>>18|240,G[q++]=H>>12&63|128,G[q++]=H>>6&63|128,G[q++]=63&H|128):(G[q++]=H>>12|224,G[q++]=H>>6&63|128,G[q++]=63&H|128)}return G},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,G){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let H=0;H<L.length;H+=3){const J=L[H],xe=H+1<L.length,Qe=xe?L[H+1]:0,lt=H+2<L.length,_t=lt?L[H+2]:0;let kn=(15&Qe)<<2|_t>>6,Ir=63&_t;lt||(Ir=64,xe||(kn=64)),Ie.push(q[J>>2],q[(3&J)<<4|Qe>>4],q[kn],q[Ir])}return Ie.join("")},encodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(L):this.encodeByteArray(ue(L),G)},decodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(L):function(L){const G=[];let q=0,Ie=0;for(;q<L.length;){const H=L[q++];if(H<128)G[Ie++]=String.fromCharCode(H);else if(H>191&&H<224){const J=L[q++];G[Ie++]=String.fromCharCode((31&H)<<6|63&J)}else if(H>239&&H<365){const lt=((7&H)<<18|(63&L[q++])<<12|(63&L[q++])<<6|63&L[q++])-65536;G[Ie++]=String.fromCharCode(55296+(lt>>10)),G[Ie++]=String.fromCharCode(56320+(1023&lt))}else{const J=L[q++],xe=L[q++];G[Ie++]=String.fromCharCode((15&H)<<12|(63&J)<<6|63&xe)}}return G.join("")}(this.decodeStringToByteArray(L,G))},decodeStringToByteArray(L,G){this.init_();const q=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let H=0;H<L.length;){const J=q[L.charAt(H++)],Qe=H<L.length?q[L.charAt(H)]:0;++H;const _t=H<L.length?q[L.charAt(H)]:64;++H;const mt=H<L.length?q[L.charAt(H)]:64;if(++H,null==J||null==Qe||null==_t||null==mt)throw Error();Ie.push(J<<2|Qe>>4),64!==_t&&(Ie.push(Qe<<4&240|_t>>2),64!==mt&&Ie.push(_t<<6&192|mt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},oe=function(L){return function(L){const G=ue(L);return pe.encodeByteArray(G,!0)}(L).replace(/\./g,"")},de=function(L){try{return pe.decodeString(L,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(L,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return G}for(const q in G)!G.hasOwnProperty(q)||!te(q)||(L[q]=B(L[q],G[q]));return L}function te(L){return"__proto__"!==L}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,q)=>{this.resolve=G,this.reject=q})}wrapCallback(G){return(q,Ie)=>{q?this.reject(q):this.resolve(Ie),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(q):G(q,Ie))}}}function Se(L,G){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=G||"demo-project",H=L.iat||0,J=L.sub||L.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:H,exp:H+3600,auth_time:H,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},L);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(xe)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function qe(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return Re().indexOf("Electron/")>=0}function Ee(){const L=Re();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function be(){return Re().indexOf("MSAppHost/")>=0}function Be(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function ve(){return new Promise((L,G)=>{try{let q=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(Ie);H.onsuccess=()=>{H.result.close(),q||self.indexedDB.deleteDatabase(Ie),L(!0)},H.onupgradeneeded=()=>{q=!1},H.onerror=()=>{var J;G((null===(J=H.error)||void 0===J?void 0:J.message)||"")}}catch(q){G(q)}})}function W(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(G,q,Ie){super(q),this.code=G,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(G,q,Ie){this.service=G,this.serviceName=q,this.errors=Ie}create(G,...q){const Ie=q[0]||{},H=`${this.service}/${G}`,J=this.errors[G],xe=J?function Ne(L,G){return L.replace(ot,(q,Ie)=>{const H=G[Ie];return null!=H?String(H):`<${Ie}?>`})}(J,Ie):"Error";return new me(H,`${this.serviceName}: ${xe} (${H}).`,Ie)}}const ot=/\{\$([^}]+)}/g;function wr(L,G){return Object.prototype.hasOwnProperty.call(L,G)}function Nt(L){for(const G in L)if(Object.prototype.hasOwnProperty.call(L,G))return!1;return!0}function Kr(L,G){if(L===G)return!0;const q=Object.keys(L),Ie=Object.keys(G);for(const H of q){if(!Ie.includes(H))return!1;const J=L[H],xe=G[H];if(ur(J)&&ur(xe)){if(!Kr(J,xe))return!1}else if(J!==xe)return!1}for(const H of Ie)if(!q.includes(H))return!1;return!0}function ur(L){return null!==L&&"object"==typeof L}function br(L){const G=[];for(const[q,Ie]of Object.entries(L))Array.isArray(Ie)?Ie.forEach(H=>{G.push(encodeURIComponent(q)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(q)+"="+encodeURIComponent(Ie));return G.length?"&"+G.join("&"):""}function Ni(L){const G={};return L.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[H,J]=Ie.split("=");G[decodeURIComponent(H)]=decodeURIComponent(J)}}),G}function ws(L){const G=L.indexOf("?");if(!G)return"";const q=L.indexOf("#",G);return L.substring(G,q>0?q:void 0)}function bi(L,G){const q=new dt(L,G);return q.subscribe.bind(q)}class dt{constructor(G,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{G(this)}).catch(Ie=>{this.error(Ie)})}next(G){this.forEachObserver(q=>{q.next(G)})}error(G){this.forEachObserver(q=>{q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,q,Ie){let H;if(void 0===G&&void 0===q&&void 0===Ie)throw new Error("Missing Observer.");H=function fn(L,G){if("object"!=typeof L||null===L)return!1;for(const q of G)if(q in L&&"function"==typeof L[q])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:q,complete:Ie},void 0===H.next&&(H.next=En),void 0===H.error&&(H.error=En),void 0===H.complete&&(H.complete=En);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(xe){}}),this.observers.push(H),J}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,G)}sendOne(G,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{q(this.observers[G])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function En(){}function kt(L,G=1e3,q=2){const Ie=G*Math.pow(q,L),H=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+H)}function dr(L){return L&&L._delegate?L._delegate:L}},415:(Je,we,N)=>{var h=N(5e3);let X=null;function O(){return X}const le=new h.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function de(){return(0,h.LFG)(B)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let B=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){te()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){te()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ge(){return new B((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,h.LFG)(le).location;return new Ke((0,h.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new h.OlP("appBaseHref");let Ke=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe),h.LFG(qe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe),h.LFG(qe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Be(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Se,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(){return new Ee((0,h.LFG)(he),(0,h.LFG)(oe))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class Cs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $n=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Cs(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Ys(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ys(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ys(n,e){n.context.$implicit=e.item}let Pn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Xt{constructor(){this.$implicit=null,this.ngIf=null}}function cu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class Ts{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class xc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const dp=new xc,ts=new Ts;let lh=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return dp;if((0,h.F4k)(t))return ts;throw function hr(n,e){return new h.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})(),Fc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function xo(n){return"server"===n}let fl=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Mo((0,h.LFG)(le),window)}),n})();class Mo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=pl(this.window.history)||pl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function pl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Xs extends class wa extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){X||(X=n)}(new Xs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ba(){return Zt=Zt||document.querySelector("base"),Zt?Zt.getAttribute("href"):null}();return null==t?null:function Ss(n){fu=fu||document.createElement("a"),fu.setAttribute("href",n);const e=fu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _a(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let fu,Zt=null;const Xn=new h.OlP("TRANSITION_ID"),dn=[{provide:h.ip1,useFactory:function gl(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Xn,le,h.zs3],multi:!0}];class ji{static init(){(0,h.VLi)(new ji)}addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let er=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const eo=new h.OlP("EventManagerPlugins");let ns=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ia{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Di=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),$i=(()=>{class n extends Di{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ro),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ro))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ro(n){O().remove(n)}const ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Po=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ae(n,o,t):(o=o.replace(Po,n),t.push(o))}return t}function Rt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let un=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new No(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Ta(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new vl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ns),h.LFG($i),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class No{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ct[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ct[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ct[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Rt(r)):this.eventManager.addEventListener(e,t,Rt(r))}}class Ta extends No{constructor(e,t,r,o){super(e),this.component=r;const u=Ae(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function yl(n){return"_ngcontent-%COMP%".replace(Po,n)}(o+"-"+r.id),this.hostAttr=function _l(n){return"_nghost-%COMP%".replace(Po,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class vl extends No{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ae(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gp=(()=>{class n extends Ia{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mu=["alt","control","meta","shift"],yu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sa=(()=>{class n extends Ia{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(mu.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function xs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&bn.hasOwnProperty(e)&&(e=bn[e]))}return yu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),mu.forEach(u=>{u!=o&&rs[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const vu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Ti(){Xs.makeCurrent(),ji.init()},multi:!0},{provide:le,useFactory:function _u(){return(0,h.RDi)(document),document},deps:[]}]),xa=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function El(){return new h.qLn},deps:[]},{provide:eo,useClass:gp,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:eo,useClass:Sa,multi:!0,deps:[le]},{provide:un,useClass:un,deps:[ns,$i,h.AFp]},{provide:h.FYo,useExisting:un},{provide:Di,useExisting:$i},{provide:$i,useClass:$i,deps:[le]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:ns,useClass:ns,deps:[eo,h.R0b]},{provide:class en{},useClass:er,deps:[]}];let Ma=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Xn,useExisting:h.AFp},dn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:xa,imports:[Fc,h.hGG]}),n})();"undefined"!=typeof window&&window;var tn=N(8996),Oa=N(7669);function Xe(...n){const e=(0,Oa.yG)(n);return(0,tn.D)(n,e)}var ni=N(7579);class ri extends ni.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var In=N(8306);const{isArray:Cl}=Array,{getPrototypeOf:qc,prototype:qi,keys:Dl}=Object;function nn(n){if(1===n.length){const e=n[0];if(Cl(e))return{args:e,keys:null};if(function ka(n){return n&&"object"==typeof n&&qc(n)===qi}(e)){const t=Dl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ai=N(4671),At=N(4004);const{isArray:Iu}=Array;function Zc(n){return(0,At.U)(e=>function zc(n,e){return Iu(e)?n(...e):n(e)}(n,e))}function Tl(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var gn=N(5403),Vo=N(9672);function tr(n,e,t){n?(0,Vo.f)(t,n,e):e()}var Cu=N(576);function Rs(n,e){const t=(0,Cu.m)(n)?n:()=>n,r=o=>o.error(t());return new In.y(e?o=>e.schedule(r,0,o):r)}const Ps=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var jo=N(8189);function $o(...n){return function io(){return(0,jo.J)(1)}()((0,tn.D)(n,(0,Oa.yG)(n)))}var Ho=N(8421);function Go(n){return new In.y(e=>{(0,Ho.Xf)(n()).subscribe(e)})}var Fa=N(515),Ns=N(727),qn=N(4482);function so(){return(0,qn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Du extends In.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ns.w0;const t=this.getSubject();e.add(this.source.subscribe((0,gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ns.w0.EMPTY)}return e}refCount(){return so()(this)}}function mn(n,e){return(0,qn.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,gn.x)(r,E=>{null==o||o.unsubscribe();let C=0;const x=u++;(0,Ho.Xf)(n(E,x)).subscribe(o=(0,gn.x)(r,R=>r.next(e?e(E,R,x,C++):R),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var oo=N(5698);function zi(...n){const e=(0,Oa.yG)(n);return(0,qn.e)((t,r)=>{(e?$o(n,t,e):$o(n,t)).subscribe(r)})}function ss(n,e,t,r,o){return(u,d)=>{let m=t,E=e,C=0;u.subscribe((0,gn.x)(d,x=>{const R=C++;E=m?n(E,x,R):(m=!0,x),r&&d.next(E)},o&&(()=>{m&&d.next(E),d.complete()})))}}function Zi(n,e){return(0,qn.e)(ss(n,e,arguments.length>=2,!0))}function ii(n,e){return(0,qn.e)((t,r)=>{let o=0;t.subscribe((0,gn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function si(n){return(0,qn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,gn.x)(t,void 0,void 0,d=>{u=(0,Ho.Xf)(n(d,si(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var yn=N(5577);function Tu(n,e){return(0,Cu.m)(e)?(0,yn.z)(n,e,1):(0,yn.z)(n,1)}function La(n){return n<=0?()=>Fa.E:(0,qn.e)((e,t)=>{let r=[];e.subscribe((0,gn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ln(n=vp){return(0,qn.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function vp(){return new Ps}function Ep(n){return(0,qn.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function qo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((o,u)=>n(o,u,r)):Ai.y,(0,oo.q)(1),t?Ep(e):ln(()=>new Ps))}var Ur=N(8505);class Os{constructor(e,t){this.id=e,this.url=t}}class ao extends Os{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Au extends Os{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hn extends Os{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Al extends Os{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uo extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Km extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sl extends Os{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oi extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Br extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class co{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ho{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class os{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Va{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class Su{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zn(n){return new Su(n)}const Ua="ngNavigationCancelingError";function ks(n){const e=Error("NavigationCancelingError: "+n);return e[Ua]=!0,e}function Kc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Si(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!xu(n[o],e[o]))return!1;return!0}function xu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Yc(n){return Array.prototype.concat.apply([],n)}function Wi(n){return n.length>0?n[n.length-1]:null}function rn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Zn(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,tn.D)(Promise.resolve(n)):Xe(n)}const Wo={exact:function I(n,e,t){if(!ut(n.segments,e.segments)||!Y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:M},Ko={exact:function Qc(n,e){return Si(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xu(n[t],e[t]))},ignored:()=>!0};function fo(n,e,t){return Wo[t.paths](n.root,e.root,t.matrixParams)&&Ko[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ut(o,t)||e.hasChildren()||!Y(o,t,r))}if(n.segments.length===t.length){if(!ut(n.segments,t)||!Y(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!M(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ut(n.segments,o)&&Y(n.segments,o,r)&&n.children[xt])&&F(n.children[xt],e,u,r)}}function Y(n,e,t){return e.every((r,o)=>Ko[t](n[o].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return Wn.serialize(this)}}class ge{constructor(e,t){this.segments=e,this.children=t,this.parent=null,rn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return as(this)}}class Le{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zn(this.parameters)),this._parameterMap}toString(){return Pu(this)}}function ut(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class yt{}class pr{parse(e){const t=new Jm(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jr(e.root,!0)}`,r=function Ip(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${ui(t)}=${ui(o)}`).join("&"):`${ui(t)}=${ui(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function li(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Wn=new pr;function as(n){return n.segments.map(e=>Pu(e)).join("/")}function jr(n,e){if(!n.hasChildren())return as(n);if(e){const t=n.children[xt]?jr(n.children[xt],!1):"",r=[];return rn(n.children,(o,u)=>{u!==xt&&r.push(`${u}:${jr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ft(n,e){let t=[];return rn(n.children,(r,o)=>{o===xt&&(t=t.concat(e(r,o)))}),rn(n.children,(r,o)=>{o!==xt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===xt?[jr(n.children[xt],!1)]:[`${o}:${jr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${as(n)}/${t[0]}`:`${as(n)}/(${t.join("//")})`}}function ai(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ui(n){return ai(n).replace(/%3B/gi,";")}function Mu(n){return ai(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ru(n){return decodeURIComponent(n)}function Ml(n){return Ru(n.replace(/\+/g,"%20"))}function Pu(n){return`${Mu(n.path)}${function bp(n){return Object.keys(n).map(e=>`;${Mu(e)}=${Mu(n[e])}`).join("")}(n.parameters)}`}const mh=/^[^\/()?;=#]+/;function po(n){const e=n.match(mh);return e?e[0]:""}const Rl=/^[^=?&#]+/,Cp=/^[^&#]+/;class Jm{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new ge(e,t)),r}parseSegment(){const e=po(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Le(Ru(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=po(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=po(this.remaining);o&&(r=o,this.capture(r))}e[Ru(t)]=Ru(r)}parseQueryParam(e){const t=function Qm(n){const e=n.match(Rl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Dp(n){const e=n.match(Cp);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Ml(t),u=Ml(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=po(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=xt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[xt]:new ge([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Tp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=yh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=yh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Nu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Nu(e,this._root).map(t=>t.value)}}function yh(n,e){if(n===e.value)return e;for(const t of e.children){const r=yh(n,t);if(r)return r}return null}function Nu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Nu(n,t);if(r.length)return r.unshift(e),r}return[]}class go{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function mo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Jc extends Tp{constructor(e,t){super(e),this.snapshot=t,ed(this,e)}toString(){return this.snapshot.toString()}}function Ba(n,e){const t=function Xm(n,e){const d=new Yo([],{},{},"",{},xt,e,null,n.root,-1,{});return new _h("",new go(d,[]))}(n,e),r=new ri([new Le("",{})]),o=new ri({}),u=new ri({}),d=new ri({}),m=new ri(""),E=new Ou(r,o,d,m,u,xt,e,t.root);return E.snapshot=t.root,new Jc(new go(E,[]),t)}class Ou{constructor(e,t,r,o,u,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>zn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>zn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ey(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Xc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Yo{constructor(e,t,r,o,u,d,m,E,C,x,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=x,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _h extends Tp{constructor(e,t){super(t),this.url=e,ed(this,t)}toString(){return vh(this._root)}}function ed(n,e){e.value._routerState=n,e.children.forEach(t=>ed(n,t))}function vh(n){const e=n.children.length>0?` { ${n.children.map(vh).join(", ")} } `:"";return`${n.value}${e}`}function td(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Si(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Si(e.params,t.params)||n.params.next(t.params),function Fs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Si(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Si(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Eh(n,e){const t=Si(n.params,e.params)&&function vt(n,e){return ut(n,e)&&n.every((t,r)=>Si(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Eh(n.parent,e.parent))}function Pl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function ty(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Pl(n,r,o);return Pl(n,r)})}(n,e,t);return new go(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Pl(n,m)),d}}const r=function ny(n){return new Ou(new ri(n.url),new ri(n.params),new ri(n.queryParams),new ri(n.fragment),new ri(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Pl(n,u));return new go(r,o)}}function Ls(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nl(n){return"object"==typeof n&&null!=n&&n.outlets}function nd(n,e,t,r,o){let u={};if(r&&rn(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new ne(t,u,o);const d=ry(n,e,t);return new ne(d,u,o)}function ry(n,e,t){const r={};return rn(n.children,(o,u)=>{r[u]=o===e?t:ry(o,e,t)}),new ge(n.segments,r)}class Sp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ls(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Nl);if(o&&o!==Wi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Pp(n,e,t){if(n||(n=new ge([],{})),0===n.segments.length&&n.hasChildren())return id(n,e,t);const r=function f0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Nl(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!us(E,C,d))return u;r+=2}else{if(!us(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new ge(n.segments.slice(0,r.pathIndex),{});return u.children[xt]=new ge(n.segments.slice(r.pathIndex),n.children),id(u,0,o)}return r.match&&0===o.length?new ge(n.segments,{}):r.match&&!n.hasChildren()?Np(n,e,t):r.match?id(n,0,o):Np(n,e,t)}function id(n,e,t){if(0===t.length)return new ge(n.segments,{});{const r=function Rp(n){return Nl(n[0])?n[0].outlets:{[xt]:n}}(t),o={};return rn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Pp(n.children[d],e,u))}),rn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new ge(n.segments,o)}}function Np(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Nl(u)){const E=Vs(u.outlets);return new ge(r,E)}if(0===o&&Ls(t[0])){r.push(new Le(n.segments[e].path,wh(t[0]))),o++;continue}const d=Nl(u)?u.outlets[xt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Ls(m)?(r.push(new Le(d,wh(m))),o+=2):(r.push(new Le(d,{})),o++)}return new ge(r,{})}function Vs(n){const e={};return rn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Np(new ge([],{}),0,t))}),e}function wh(n){const e={};return rn(n,(t,r)=>e[r]=`${t}`),e}function us(n,e,t){return n==t.path&&Si(e,t.parameters)}class Op{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),td(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=mo(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),rn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=mo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=mo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=mo(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new os(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Zo(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(td(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),td(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function sd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class od{constructor(e,t){this.routes=e,this.module=t}}function $a(n){return"function"==typeof n}function ku(n){return n instanceof ne}const ad=Symbol("INITIAL_VALUE");function Fu(){return mn(n=>function Uo(...n){const e=(0,Oa.yG)(n),t=(0,Oa.jO)(n),{args:r,keys:o}=nn(n);if(0===r.length)return(0,tn.D)([],e);const u=new In.y(function Ms(n,e,t=Ai.y){return r=>{tr(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let E=0;E<o;E++)tr(e,()=>{const C=(0,tn.D)(n[E],e);let x=!1;C.subscribe((0,gn.x)(r,R=>{u[E]=R,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Tl(o,d):Ai.y));return t?u.pipe(Zc(t)):u}(n.map(e=>e.pipe((0,oo.q)(1),zi(ad)))).pipe(Zi((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==ad?o:(u===ad&&(r=!0),r||!1!==u&&d!==t.length-1&&!ku(u)?o:u),e)},ad),ii(e=>e!==ad),(0,At.U)(e=>ku(e)?e:!0===e),(0,oo.q)(1)))}class iy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Lu,this.attachRef=null}}class Lu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new iy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let kl=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new sy(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lu),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class sy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ou?this.route:e===Lu?this.childContexts:this.parent.get(e,t)}}let Ch=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[kl],encapsulation:2}),n})();function Ha(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Dh(r,Th(e,r))}}function Dh(n,e){n.children&&Ha(n.children,e)}function Th(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ah(n){const e=n.children&&n.children.map(Ah),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=Ch),t}function Bt(n){return n.outlet||xt}function Fp(n,e){const t=n.filter(r=>Bt(r)===e);return t.push(...n.filter(r=>Bt(r)!==e)),t}const Lp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Lp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Kc)(t,n,e);if(!u)return Object.assign({},Lp);const d={};rn(u.posParams,(E,C)=>{d[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Uu(n,e,t,r,o="corrected"){if(t.length>0&&function uy(n,e,t){return t.some(r=>Jo(n,e,r)&&Bt(r)!==xt)}(n,t,r)){const d=new ge(e,function ay(n,e,t,r){const o={};o[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Bt(u)!==xt){const d=new ge([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Bt(u)]=d}return o}(n,e,r,new ge(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function ly(n,e,t){return t.some(r=>Jo(n,e,r))}(n,t,r)){const d=new ge(n.segments,function oy(n,e,t,r,o,u){const d={};for(const m of r)if(Jo(n,t,m)&&!o[Bt(m)]){const E=new ge([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Bt(m)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new ge(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Jo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function cy(n,e,t,r){return!!(Bt(n)===r||r!==xt&&Jo(e,t,n))&&("**"===n.path||Vu(e,n,t).matched)}function Vp(n,e,t){return 0===e.length&&!n.children[t]}class Xo{constructor(e){this.segmentGroup=e||null}}class Ar{constructor(e){this.urlTree=e}}function Ga(n){return Rs(new Xo(n))}function Sh(n){return Rs(new Ar(n))}class ud{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Uu(this.urlTree.root,[],[],this.config).segmentGroup,t=new ge(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,At.U)(u=>this.createUrlTree(Fl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(si(u=>{if(u instanceof Ar)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Xo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,At.U)(o=>this.createUrlTree(Fl(o),e.queryParams,e.fragment))).pipe(si(o=>{throw o instanceof Xo?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new ge([],{[xt]:e}):e;return new ne(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(u=>new ge([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,tn.D)(o).pipe(Tu(u=>{const d=r.children[u],m=Fp(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,At.U)(E=>({segment:E,outlet:u})))}),Zi((u,d)=>(u[d.outlet]=d.segment,u),{}),function Wm(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((o,u)=>n(o,u,r)):Ai.y,La(1),t?Ep(e):ln(()=>new Ps))}())}expandSegment(e,t,r,o,u,d){return(0,tn.D)(r).pipe(Tu(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(si(C=>{if(C instanceof Xo)return Xe(null);throw C}))),qo(m=>!!m),si((m,E)=>{if(m instanceof Ps||"EmptyError"===m.name)return Vp(t,o,u)?Xe(new ge([],{})):Ga(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return cy(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Ga(t):Ga(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Sh(u):this.lineralizeSegments(r,u).pipe((0,yn.z)(d=>{const m=new ge(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:x}=Vu(t,o,u);if(!m)return Ga(t);const R=this.applyRedirectCommands(E,o.redirectTo,x);return o.redirectTo.startsWith("/")?Sh(R):this.lineralizeSegments(o,R).pipe((0,yn.z)(V=>this.expandSegment(e,t,r,V.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Xe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,At.U)(R=>(r._loadedConfig=R,new ge(o,{})))):Xe(new ge(o,{}));const{matched:d,consumedSegments:m,remainingSegments:E}=Vu(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,yn.z)(x=>{const R=x.module,V=x.routes,{segmentGroup:K,slicedSegments:se}=Uu(t,m,E,V),Pe=new ge(K.segments,K.children);if(0===se.length&&Pe.hasChildren())return this.expandChildren(R,V,Pe).pipe((0,At.U)(gt=>new ge(m,gt)));if(0===V.length&&0===se.length)return Xe(new ge(m,{}));const Ue=Bt(r)===u;return this.expandSegment(R,Pe,V,se,Ue?xt:u,!0).pipe((0,At.U)(Tt=>new ge(m.concat(Tt.segments),Tt.children)))})):Ga(t)}getChildConfig(e,t,r){return t.children?Xe(new od(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,yn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,At.U)(u=>(t._loadedConfig=u,u))):function nr(n){return Rs(ks(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Xe(new od([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Xe(o.map(d=>{const m=e.get(d);let E;if(function bh(n){return n&&$a(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!$a(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return Zn(E)})).pipe(Fu(),(0,Ur.b)(d=>{if(!ku(d))return;const m=ks(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,At.U)(d=>!0===d)):Xe(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Xe(r);if(o.numberOfChildren>1||!o.children[xt])return Rs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return rn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return rn(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new ge(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Fl(n){const e={};for(const r of Object.keys(n.children)){const u=Fl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function dy(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new ge(n.segments.concat(e.segments),e.children)}return n}(new ge(n.segments,e))}class ci{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yo{constructor(e,t){this.component=e,this.route=t}}function Bp(n,e,t){const r=n._root;return za(r,e?e._root:null,t,[r.value])}function Bu(n,e,t){const r=function Mh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function za(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=mo(e);return n.children.forEach(d=>{(function $p(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function hy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ut(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ut(n.url,e.url)||!Si(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eh(n,e)||!Si(n.queryParams,e.queryParams);default:return!Eh(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new ci(r)):(u.data=d.data,u._resolvedData=d._resolvedData),za(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new yo(m.outlet.component,d))}else d&&di(e,m,o),o.canActivateChecks.push(new ci(r)),za(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),rn(u,(d,m)=>di(d,t.getContext(m),o)),o}function di(n,e,t){const r=mo(n),o=n.value;rn(r,(u,d)=>{di(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new yo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class qp{}function Us(n){return new In.y(e=>e.error(n))}class zp{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Uu(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new Yo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new go(r,t),u=new _h(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=ey(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Fp(e,u),E=this.processSegmentGroup(m,d,u);if(null===E)return null;r.push(...E)}const o=Wp(r);return function Zp(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Vp(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!cy(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const K=r.length>0?Wi(r).parameters:{};u=new Yo(r,K,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Bt(e),e.component,e,Za(t),ls(t)+r.length,f(e))}else{const K=Vu(t,e,r);if(!K.matched)return null;d=K.consumedSegments,m=K.remainingSegments,u=new Yo(d,K.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Bt(e),e.component,e,Za(t),ls(t)+d.length,f(e))}const E=function gy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=Uu(t,d,m,E.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const K=this.processChildren(E,C);return null===K?null:[new go(u,K)]}if(0===E.length&&0===x.length)return[new go(u,[])];const R=Bt(e)===o,V=this.processSegment(E,C,x,R?xt:o);return null===V?null:[new go(u,V)]}}function Nh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Wp(n){const e=[],t=new Set;for(const r of n){if(!Nh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Wp(r.children);e.push(new go(r.value,o))}return e.filter(r=>!t.has(r))}function Za(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ls(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function Z(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Fe(n){return mn(e=>{const t=n(e);return t?(0,tn.D)(t).pipe((0,At.U)(()=>e)):Xe(e)})}class at extends class ht{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _n=new h.OlP("ROUTES");class fi{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,At.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new od(Yc(d.injector.get(_n,void 0,h.XFs.Self|h.XFs.Optional)).map(Ah),d)}),si(u=>{throw t._loader$=void 0,u}));return t._loader$=new Du(o,()=>new ni.x).pipe(so()),t._loader$}loadModuleFactory(e){return Zn(e()).pipe((0,yn.z)(t=>t instanceof h.YKP?Xe(t):(0,tn.D)(this.compiler.compileModuleAsync(t))))}}class my{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ea(n){throw n}function cd(n,e,t){return e.parse("/")}function dd(n,e){return Xe(null)}const Oh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rr=(()=>{class n{constructor(t,r,o,u,d,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ni.x,this.errorHandler=ea,this.malformedUriErrorHandler=cd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dd,afterPreactivation:dd},this.urlHandlingStrategy=new my,this.routeReuseStrategy=new at,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const R=d.get(h.R0b);this.isNgZoneEnabled=R instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function Ym(){return new ne(new ge([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fi(d,m,V=>this.triggerEvent(new zo(V)),V=>this.triggerEvent(new lo(V))),this.routerState=Ba(this.currentUrlTree,this.rootComponentType),this.transitions=new ri({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ii(o=>0!==o.id),(0,At.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mn(o=>{let u=!1,d=!1;return Xe(o).pipe((0,Ur.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mn(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Fh(m.source)&&(this.browserUrlTree=m.extractedUrl),Xe(m).pipe(mn(R=>{const V=this.transitions.getValue();return r.next(new ao(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),V!==this.transitions.getValue()?Fa.E:Promise.resolve(R)}),function Up(n,e,t,r){return mn(o=>function qa(n,e,t,r,o){return new ud(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,At.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ur.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function g(n,e,t,r,o){return(0,yn.z)(u=>function Ll(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new zp(n,e,t,r,o,u).recognize();return null===d?Us(new qp):Xe(d)}catch(d){return Us(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,At.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ur.b)(R=>{if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(K,R)}this.browserUrlTree=R.urlAfterRedirects}const V=new uo(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(V)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:K,source:se,restoredState:Pe,extras:Ue}=m,Dt=new ao(V,this.serializeUrl(K),se,Pe);r.next(Dt);const Tt=Ba(K,this.rootComponentType).snapshot;return Xe(Object.assign(Object.assign({},m),{targetSnapshot:Tt,urlAfterRedirects:K,extras:Object.assign(Object.assign({},Ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Fa.E}),Fe(m=>{const{targetSnapshot:E,id:C,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:V,replaceUrl:K}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!V,replaceUrl:!!K})}),(0,Ur.b)(m=>{const E=new Km(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,At.U)(m=>Object.assign(Object.assign({},m),{guards:Bp(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Hp(n,e){return(0,yn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?Xe(Object.assign(Object.assign({},t),{guardsResult:!0})):function fy(n,e,t,r){return(0,tn.D)(n).pipe((0,yn.z)(o=>function Ph(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Xe(u.map(m=>{const E=Bu(m,e,o);let C;if(function p0(n){return n&&$a(n.canDeactivate)}(E))C=Zn(E.canDeactivate(n,e,t,r));else{if(!$a(E))throw new Error("Invalid CanDeactivate guard");C=Zn(E(n,e,t,r))}return C.pipe(qo())})).pipe(Fu()):Xe(!0)}(o.component,o.route,t,e,r)),qo(o=>!0!==o,!0))}(d,r,o,n).pipe((0,yn.z)(m=>m&&function kp(n){return"boolean"==typeof n}(m)?function ld(n,e,t,r){return(0,tn.D)(e).pipe(Tu(o=>$o(function Gp(n,e){return null!==n&&e&&e(new co(n)),Xe(!0)}(o.route.parent,r),function py(n,e){return null!==n&&e&&e(new ho(n)),Xe(!0)}(o.route,r),function Rh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function jp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Go(()=>Xe(d.guards.map(E=>{const C=Bu(E,d.node,t);let x;if(function Ih(n){return n&&$a(n.canActivateChild)}(C))x=Zn(C.canActivateChild(r,n));else{if(!$a(C))throw new Error("Invalid CanActivateChild guard");x=Zn(C(r,n))}return x.pipe(qo())})).pipe(Fu())));return Xe(u).pipe(Fu())}(n,o.path,t),function hi(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const o=r.map(u=>Go(()=>{const d=Bu(u,e,t);let m;if(function Ol(n){return n&&$a(n.canActivate)}(d))m=Zn(d.canActivate(e,n));else{if(!$a(d))throw new Error("Invalid CanActivate guard");m=Zn(d(e,n))}return m.pipe(qo())}));return Xe(o).pipe(Fu())}(n,o.route,t))),qo(o=>!0!==o,!0))}(r,u,n,e):Xe(m)),(0,At.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ur.b)(m=>{if(ku(m.guardsResult)){const C=ks(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new Sl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),ii(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Fe(m=>{if(m.guards.canActivateChecks.length)return Xe(m).pipe((0,Ur.b)(E=>{const C=new oi(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),mn(E=>{let C=!1;return Xe(E).pipe(function v(n,e){return(0,yn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Xe(t);let u=0;return(0,tn.D)(o).pipe(Tu(d=>function T(n,e,t,r){return function P(n,e,t,r){const o=Z(n);if(0===o.length)return Xe({});const u={};return(0,tn.D)(o).pipe((0,yn.z)(d=>function fe(n,e,t,r){const o=Bu(n,e,r);return Zn(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Ur.b)(m=>{u[d]=m}))),La(1),(0,yn.z)(()=>Z(u).length===o.length?Xe(u):Fa.E))}(n._resolve,n,e,r).pipe((0,At.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),ey(n,t).resolve),null)))}(d.route,r,n,e)),(0,Ur.b)(()=>u++),La(1),(0,yn.z)(d=>u===o.length?Xe(t):Fa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ur.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Ur.b)(E=>{const C=new Br(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),Fe(m=>{const{targetSnapshot:E,id:C,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:V,replaceUrl:K}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!V,replaceUrl:!!K})}),(0,At.U)(m=>{const E=function Ap(n,e,t){const r=Pl(n,e._root,t?t._root:void 0);return new Jc(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,Ur.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new Op(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ur.b)({next(){u=!0},complete(){u=!0}}),function Wc(n){return(0,qn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),si(m=>{if(d=!0,function wp(n){return n&&n[Ua]}(m)){const E=ku(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new hn(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Fh(o.source)};this.scheduleNavigation(x,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new Al(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Fa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ha(t),this.config=t.map(Ah),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,x=E?this.currentUrlTree.fragment:d;let R=null;switch(m){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),function Qo(n,e,t,r,o){if(0===t.length)return nd(e.root,e.root,e.root,r,o);const u=function h0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Sp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return rn(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Sp(t,e,r)}(t);if(u.toRoot())return nd(e.root,e.root,new ge([],{}),r,o);const d=function xp(n,e,t){if(n.isAbsolute)return new rd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new rd(u,u===e.root,0)}const r=Ls(n.commands[0])?0:1;return function Mp(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new rd(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?id(d.segmentGroup,d.index,u.commands):Pp(d.segmentGroup,d.index,u.commands);return nd(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,R,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ku(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function kh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Oh):!1===r?Object.assign({},hd):r,ku(t))return fo(this.currentUrlTree,t,o);const u=this.parseUrl(t);return fo(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Au(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,E;if(this.disposed)return Promise.resolve(!1);let C,x,R;d?(C=d.resolve,x=d.reject,R=d.promise):R=new Promise((se,Pe)=>{C=se,x=Pe});const V=++this.navigationId;let K;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),K=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):K=0,this.setTransition({id:V,targetPageId:K,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:x,promise:R,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),R.catch(se=>Promise.reject(se))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new hn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Fh(n){return"imperative"!==n}let Ul=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new ni.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ju(this.skipLocationChange),replaceUrl:ju(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ju(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(rr),h.Y36(Ou),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function ju(n){return""===n||!!n}class _y{}class y0{preload(e,t){return Xe(null)}}let _0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new fi(o,r,E=>t.triggerEvent(new zo(E)),E=>t.triggerEvent(new lo(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof Au),Tu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,tn.D)(o).pipe((0,jo.J)(),(0,At.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Xe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,yn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rr),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(_y))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Kp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ao?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Au&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Va&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Va(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const cs=new h.OlP("ROUTER_CONFIGURATION"),Ey=new h.OlP("ROUTER_FORROOT_GUARD"),v0=[Ee,{provide:yt,useClass:pr},{provide:rr,useFactory:function by(n,e,t,r,o,u,d={},m,E){const C=new rr(null,n,e,t,r,o,Yc(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function b0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(x=>{var R,V;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(V=console.groupEnd)||void 0===V||V.call(console)}),C},deps:[yt,Lu,Ee,h.zs3,h.Sil,_n,cs,[class Vl{},new h.FiY],[class We{},new h.FiY]]},Lu,{provide:Ou,useFactory:function Yp(n){return n.routerState.root},deps:[rr]},_0,y0,class vy{preload(e,t){return t().pipe(si(()=>Xe(null)))}},{provide:cs,useValue:{enableTracing:!1}}];function xI(){return new h.PXZ("Router",rr)}let Lh=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[v0,wy(t),{provide:Ey,useFactory:w0,deps:[[rr,new h.FiY,new h.tp0]]},{provide:cs,useValue:r||{}},{provide:he,useFactory:E0,deps:[oe,[new h.tBr(qe),new h.FiY],cs]},{provide:Kp,useFactory:MI,deps:[rr,fl,cs]},{provide:_y,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:y0},{provide:h.PXZ,multi:!0,useFactory:xI},[fd,{provide:h.ip1,multi:!0,useFactory:I0,deps:[fd]},{provide:Cy,useFactory:Iy,deps:[fd]},{provide:h.tb,multi:!0,useExisting:Cy}]]}}static forChild(t){return{ngModule:n,providers:[wy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ey,8),h.LFG(rr,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function MI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Kp(n,e,t)}function E0(n,e,t={}){return t.useHash?new Te(n,e):new Ke(n,e)}function w0(n){return"guarded"}function wy(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:_n,multi:!0,useValue:n}]}let fd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ni.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(rr),d=this.injector.get(cs);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Xe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(cs),o=this.injector.get(_0),u=this.injector.get(Kp),d=this.injector.get(rr),m=this.injector.get(h.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function I0(n){return n.appInitializer.bind(n)}function Iy(n){return n.bootstrapListener.bind(n)}const Cy=new h.OlP("Router Initializer"),RI=function(){return["/login"]},C0=function(){return["/registro"]};let PI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-bienvenido"]],decls:17,vars:4,consts:[[1,"banner"],[1,"container","d-flex","flex-column","justify-content-start","align-items-start"],[1,"row"],[1,"col-lg-6","col-md-12","col-xl-7"],[1,"block"],[1,"text-uppercase","text-sm","letter-spacing","spanTotal"],[1,"mb-3","mt-3"],[1,"mb-4","pr-5"],[1,"btn-container","contenedorBotones"],[3,"routerLink"],[1,"btnRegistro",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),h._UZ(5,"br"),h.TgZ(6,"span",5),h._uU(7,"Laboratorio IV"),h.qZA(),h.TgZ(8,"h1",6),h._uU(9,"Clinica Laboratorio"),h.qZA(),h.TgZ(10,"p",7),h._uU(11,"Bienvenido a la clinica, por favor loguearse para acceder"),h.qZA(),h.TgZ(12,"div",8)(13,"button",9),h._uU(14,"Entrar"),h.qZA(),h.TgZ(15,"button",10),h._uU(16,"Registro"),h.qZA()()()()()()()),2&t&&(h.xp6(13),h.Q6J("routerLink",h.DdM(2,RI)),h.xp6(2),h.Q6J("routerLink",h.DdM(3,C0)))},directives:[Ul],styles:[".banner[_ngcontent-%COMP%]{margin-top:100px;background:#fff;background:url(banner.1e7b8500cd1d2789.jpg) no-repeat bottom;background-size:cover;min-height:500px}.divider[_ngcontent-%COMP%]{width:40px;height:5px;background:#e12454}.spanTotal[_ngcontent-%COMP%]{letter-spacing:2px;color:#6f8ba4;font-family:Roboto,sans-serif;line-height:1.6;font-size:14px}.banner[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;line-height:1.2;letter-spacing:-1.2px;text-transform:capitalize;color:#223a66;font-weight:700;text-shadow:.5px .5px .5px grey;font-family:Exo,sans-serif}p[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;-webkit-font-smoothing:antialiased;font-size:16px;color:#6f8ba4;font-weight:400;text-shadow:.5px .5px .5px grey}.btn-container[_ngcontent-%COMP%]{display:flex}.contenedorBotones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}button[_ngcontent-%COMP%]{outline:0px;box-shadow:none}button[_ngcontent-%COMP%]{border-radius:50px;background:#e12454;color:#fff;border-color:#e12454;display:inline-block;font-size:14px;font-size:.8125rem;font-weight:700;letter-spacing:.5px;padding:.75rem 2rem;font-family:Exo,sans-serif;text-transform:uppercase;border:2px solid transparent;transition:all .35s ease}button[_ngcontent-%COMP%]:hover{background:#223a66;color:#fff;border-color:#223a66}.btnRegistro[_ngcontent-%COMP%]{border-radius:50px;background:#223a66;color:#fff;border-color:#223a66;display:inline-block;font-size:14px;font-size:.8125rem;font-weight:700;letter-spacing:.5px;padding:.75rem 2rem;font-family:Exo,sans-serif;text-transform:uppercase;border:2px solid transparent;transition:all .35s ease}.btnRegistro[_ngcontent-%COMP%]:hover{background:#e12454;color:#fff;border-color:#e12454}"]}),n})();var ye=N(5861),Ty=N(3942),ds=N(9681),wt=N(2090),Vh=N(4859);const Ay="firebasestorage.googleapis.com",D0="storageBucket";class Vn extends wt.ZR{constructor(e,t){super(hs(e),`Firebase Storage: ${t} (${hs(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vn.prototype)}_codeEquals(e){return hs(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function hs(n){return"storage/"+n}function Sy(){return new Vn("unknown","An unknown error occurred, please check the error payload for server response.")}function x0(){return new Vn("canceled","User canceled the upload/download.")}function xy(){return new Vn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Wa(n){return new Vn("invalid-argument",n)}function Bs(){return new Vn("app-deleted","The Firebase app was deleted.")}function My(n){return new Vn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Uh(n,e){return new Vn("invalid-format","String does not match format '"+n+"': "+e)}function jl(n){throw new Vn("internal-error","Internal error: "+n)}class Cn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Cn.makeFromUrl(e,t)}catch(o){return new Cn(e,"")}if(""===r.path)return r;throw function UI(n){return new Vn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function C(st){st.path_=decodeURIComponent(st.path)}const R=t.replace(/[.]/g,"\\."),gt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${R}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${t===Ay?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let st=0;st<gt.length;st++){const Mt=gt[st],jt=Mt.regex.exec(e);if(jt){let ou=jt[Mt.indices.path];ou||(ou=""),r=new Cn(jt[Mt.indices.bucket],ou),Mt.postModify(r);break}}if(null==r)throw function VI(n){return new Vn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Ry{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function $l(n){return"string"==typeof n||n instanceof String}function Bh(n){return jh()&&n instanceof Blob}function jh(){return"undefined"!=typeof Blob}function $h(n,e,t,r){if(r<e)throw Wa(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Wa(`Invalid value for '${n}'. Expected ${t} or less.`)}function _o(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function BI(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var $u=(()=>{return(n=$u||($u={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",$u;var n})();class jI{constructor(e,t,r,o,u,d,m,E,C,x,R){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=E,this.timeout_=C,this.progressCallback_=x,this.connectionFactory_=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,K)=>{this.resolve_=V,this.reject_=K,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const E=this.callback_(m,m.getResponse());!function uS(n){return void 0!==n}(E)?u():u(E)}catch(E){d(E)}else if(null!==m){const E=Sy();E.serverResponse=m.getErrorText(),d(this.errorCallback_?this.errorCallback_(m,E):E)}else d(o.canceled?this.appDelete_?Bs():x0():function S0(){return new Vn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Jp(!1,null,!0)):this.backoffId_=function P0(n,e,t){let r=1,o=null,u=null,d=!1,m=0;function E(){return 2===m}let C=!1;function x(...Ue){C||(C=!0,e.apply(null,Ue))}function R(Ue){o=setTimeout(()=>{o=null,n(K,E())},Ue)}function V(){u&&clearTimeout(u)}function K(Ue,...Dt){if(C)return void V();if(Ue)return V(),void x.call(null,Ue,...Dt);if(E()||d)return V(),void x.call(null,Ue,...Dt);let gt;r<64&&(r*=2),1===m?(m=2,gt=0):gt=1e3*(r+Math.random()),R(gt)}let se=!1;function Pe(Ue){se||(se=!0,V(),!C&&(null!==o?(Ue||(m=2),clearTimeout(o),R(0)):Ue||(m=1)))}return R(0),u=setTimeout(()=>{d=!0,Pe(!0)},t),Pe}((r,o)=>{if(o)return void r(!1,new Jp(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===$u.NO_ERROR,E=u.getStatus();if(!m||this.isRetryStatusCode_(E)){const x=u.getErrorCode()===$u.ABORT;return void r(!1,new Jp(!1,null,x))}const C=-1!==this.successCodes_.indexOf(E);r(!0,new Jp(C,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Py(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class Jp{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function F0(...n){const e=function k0(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(jh())return new Blob(n);throw new Vn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const js={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class L0{constructor(e,t){this.data=e,this.contentType=t||null}}function V0(n,e){switch(n){case js.RAW:return new L0(qI(e));case js.BASE64:case js.BASE64URL:return new L0(zI(n,e));case js.DATA_URL:return new L0(function fS(n){const e=new ZI(n);return e.base64?zI(js.BASE64,e.rest):function hS(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Uh(js.DATA_URL,"Malformed data URL.")}return qI(e)}(e.rest)}(e),function pS(n){return new ZI(n).contentType}(e))}throw Sy()}function qI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zI(n,e){switch(n){case js.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw Uh(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case js.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw Uh(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Ny(n){return atob(n)}(e)}catch(o){throw Uh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class ZI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Uh(js.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function gS(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class $r{constructor(e,t){let r=0,o="";Bh(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Bh(this.data_)){const o=function GI(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new $r(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $r(r,!0)}}static getBlob(...e){if(jh()){const t=e.map(r=>r instanceof $r?r.data_:r);return new $r(F0.apply(null,t))}{const t=e.map(d=>$l(d)?V0(js.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[u++]=d[m]}),new $r(o,!0)}}uploadData(){return this.data_}}function Hh(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function lS(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Xp(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function B0(n,e){return e}class Hr{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||B0}}let eg=null;function pd(){if(eg)return eg;const n=[];n.push(new Hr("bucket")),n.push(new Hr("generation")),n.push(new Hr("metageneration")),n.push(new Hr("name","fullPath",!0));const t=new Hr("name");t.xform=function e(u,d){return function Hu(n){return!$l(n)||n.length<2?n:Xp(n)}(d)},n.push(t);const o=new Hr("size");return o.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(o),n.push(new Hr("timeCreated")),n.push(new Hr("updated")),n.push(new Hr("md5Hash",null,!0)),n.push(new Hr("cacheControl",null,!0)),n.push(new Hr("contentDisposition",null,!0)),n.push(new Hr("contentEncoding",null,!0)),n.push(new Hr("contentLanguage",null,!0)),n.push(new Hr("contentType",null,!0)),n.push(new Hr("metadata","customMetadata",!0)),eg=n,eg}function j0(n,e,t){const r=Hh(e);return null===r?null:function Oy(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function KI(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Cn(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function ky(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const H0="prefixes";class xi{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ki(n){if(!n)throw Sy()}function Ka(n,e){return function t(r,o){const u=j0(n,o,e);return Ki(null!==u),u}}function Hl(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function FI(){return new Vn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function kI(){return new Vn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function OI(n){return new Vn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function LI(n){return new Vn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function Gl(n){const e=Hl(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function A0(n){return new Vn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function tg(n,e,t){const o=_o(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new xi(o,"GET",Ka(n,t),d);return m.errorHandler=Gl(e),m}function q0(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const m=_o(e.bucketOnlyServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,x=new xi(m,"GET",function YI(n,e){return function t(r,o){const u=function Fy(n,e,t){const r=Hh(t);return null===r?null:function md(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[H0])for(const o of t[H0]){const u=o.replace(/\/$/,""),d=n._makeStorageReference(new Cn(e,u));r.prefixes.push(d)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new Cn(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return Ki(null!==u),u}}(n,e.bucket),C);return x.urlParams=u,x.errorHandler=Hl(e),x}function Ly(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Z0(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class qh{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function Vy(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){Ki(!1)}return Ki(!!t&&-1!==(e||["active"]).indexOf(t)),t}const yS={STATE_CHANGED:"state_changed"},Yi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ng(n){switch(n){case"running":case"pausing":case"canceling":return Yi.RUNNING;case"paused":return Yi.PAUSED;case"success":return Yi.SUCCESS;case"canceled":return Yi.CANCELED;default:return Yi.ERROR}}class _S{constructor(e,t,r){if(function N0(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function yd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class eC extends class Y0{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$u.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$u.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$u.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw jl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jl("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw jl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function vo(){return new eC}class X0{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=pd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function JI(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d=Ly(e,r,o),m={name:d.fullPath},E=_o(u,n.host,n._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},R=ky(d,t),se=new xi(E,"POST",function K(Pe){let Ue;Vy(Pe);try{Ue=Pe.getResponseHeader("X-Goog-Upload-URL")}catch(Dt){Ki(!1)}return Ki($l(Ue)),Ue},n.maxUploadRetryTime);return se.urlParams=m,se.headers=x,se.body=R,se.errorHandler=Hl(e),se}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,vo,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function fs(n,e,t,r){const E=new xi(t,"POST",function u(C){const x=Vy(C,["active","final"]);let R=null;try{R=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch(K){Ki(!1)}R||Ki(!1);const V=Number(R);return Ki(!isNaN(V)),new qh(V,r.size(),"final"===x)},n.maxUploadRetryTime);return E.headers={"X-Goog-Upload-Command":"query"},E.errorHandler=Hl(e),E}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,vo,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new qh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let d;try{d=function XI(n,e,t,r,o,u,d,m){const E=new qh(0,0);if(d?(E.current=d.current,E.total=d.total):(E.current=0,E.total=r.size()),r.size()!==E.total)throw function M0(){return new Vn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const C=E.total-E.current;let x=C;o>0&&(x=Math.min(x,o));const R=E.current,se={"X-Goog-Upload-Command":x===C?"upload, finalize":"upload","X-Goog-Upload-Offset":`${E.current}`},Pe=r.slice(R,R+x);if(null===Pe)throw xy();const gt=new xi(t,"POST",function Ue(st,Mt){const jt=Vy(st,["active","final"]),Or=E.current+x,ou=r.size();let aS;return aS="final"===jt?Ka(e,u)(st,Mt):null,new qh(Or,ou,"final"===jt,aS)},e.maxUploadRetryTime);return gt.headers=se,gt.body=Pe.uploadData(),gt.progressCallback=m||null,gt.errorHandler=Hl(n),gt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(E){return this._error=E,void this._transition("error")}const m=this._ref.storage._makeRequest(d,vo,o,u);this._request=m,m.getPromise().then(E=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(E.current),E.finalized?(this._metadata=E.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=tg(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,vo,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function W0(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},E=function m(){let gt="";for(let st=0;st<2;st++)gt+=Math.random().toString().slice(2);return gt}();d["Content-Type"]="multipart/related; boundary="+E;const C=Ly(e,r,o),x=ky(C,t),K=$r.getBlob("--"+E+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+E+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",r,"\r\n--"+E+"--");if(null===K)throw xy();const se={name:C.fullPath},Pe=_o(u,n.host,n._protocol),Dt=n.maxUploadRetryTime,Tt=new xi(Pe,"POST",Ka(n,t),Dt);return Tt.urlParams=se,Tt.headers=d,Tt.body=K.uploadData(),Tt.errorHandler=Hl(e),Tt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,vo,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=x0(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ng(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new _S(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ng(this._state)){case Yi.SUCCESS:yd(this._resolve.bind(null,this.snapshot))();break;case Yi.CANCELED:case Yi.ERROR:yd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ng(this._state)){case Yi.RUNNING:case Yi.PAUSED:e.next&&yd(e.next.bind(e,this.snapshot))();break;case Yi.SUCCESS:e.complete&&yd(e.complete.bind(e))();break;default:e.error&&yd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ql{constructor(e,t){this._service=e,this._location=t instanceof Cn?t:Cn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ql(e,t)}get root(){const e=new Cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xp(this._location.path)}get storage(){return this._service}get parent(){const e=function WI(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Cn(this._location.bucket,e);return new ql(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw My(e)}}function rE(n,e,t){return iE.apply(this,arguments)}function iE(){return(iE=(0,ye.Z)(function*(n,e,t){const o=yield By(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield rE(n,e,o.nextPageToken))})).apply(this,arguments)}function By(n,e){null!=e&&"number"==typeof e.maxResults&&$h("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=q0(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,vo)}function oC(n){n._throwIfRoot("getDownloadURL");const e=function QI(n,e,t){const o=_o(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new xi(o,"GET",function G0(n,e){return function t(r,o){const u=j0(n,o,e);return Ki(null!==u),function $0(n,e,t,r){const o=Hh(e);if(null===o||!$l(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(C=>{const R=n.fullPath;return _o("/b/"+d(n.bucket)+"/o/"+d(R),t,r)+BI({alt:"media",token:C})})[0]}(u,o,n.host,n._protocol)}}(n,t),d);return m.errorHandler=Gl(e),m}(n.storage,n._location,pd());return n.storage.makeRequestWithTokens(e,vo).then(t=>{if(null===t)throw function R0(){return new Vn("no-download-url","The given file does not have any download URLs.")}();return t})}function sE(n,e){const t=function U0(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Cn(n._location.bucket,t);return new ql(n.storage,r)}function sg(n,e){if(n instanceof ag){const t=n;if(null==t._bucket)throw function St(){return new Vn("no-default-bucket","No default bucket found. Did you set the '"+D0+"' property when initializing the app?")}();const r=new ql(t,t._bucket);return null!=e?sg(r,e):r}return void 0!==e?sE(n,e):n}function uC(n,e){if(e&&function aC(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ag)return function ig(n,e){return new ql(n,e)}(n,e);throw Wa("To use ref(service, url), the first argument must be a Storage instance.")}return sg(n,e)}function og(n,e){const t=null==e?void 0:e[D0];return null==t?null:Cn.makeFromBucketSpec(t,n)}class ag{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=Ay,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Cn.makeFromBucketSpec(o,this._host):og(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Cn.makeFromBucketSpec(this._url,e):og(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$h("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$h("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ql(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new Ry(Bs());{const u=function dS(n,e,t,r,o,u){const d=BI(n.urlParams),m=n.url+d,E=Object.assign({},n.headers);return function cS(n,e){e&&(n["X-Firebase-GMPID"]=e)}(E,e),function $I(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(E,t),function O0(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(E,u),function HI(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(E,r),new jI(m,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const oE="@firebase/storage";function hE(n,e){return uC(n=(0,wt.m9)(n),e)}function dC(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new ag(t,r,o,e,ds.SDK_VERSION)}!function Hy(){(0,ds._registerComponent)(new Vh.wA("storage",dC,"PUBLIC").setMultipleInstances(!0)),(0,ds.registerVersion)(oE,"0.9.6",""),(0,ds.registerVersion)(oE,"0.9.6","esm2017")}();class zh{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Gy{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new zh(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new zh(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?d=>t(new zh(d,this,this._ref)):{next:t.next?d=>t.next(new zh(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class qy{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Qa(e,this._service))}get items(){return this._delegate.items.map(e=>new Qa(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Qa{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function ES(n,e){return sE(n,e)}(this._delegate,e);return new Qa(t,this.storage)}get root(){return new Qa(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Qa(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Gy(function uE(n,e,t){return function ta(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new X0(n,new $r(e),t)}(n=(0,wt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=js.RAW,r){this._throwIfRoot("putString");const o=V0(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new Gy(new X0(this._delegate,new $r(o.data,!0),u),this)}listAll(){return function Ya(n){return function rC(n){const e={prefixes:[],items:[]};return rE(n,e).then(()=>e)}(n=(0,wt.m9)(n))}(this._delegate).then(e=>new qy(e,this.storage))}list(e){return function dE(n,e){return By(n=(0,wt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new qy(t,this.storage))}getMetadata(){return function lE(n){return function iC(n){n._throwIfRoot("getMetadata");const e=tg(n.storage,n._location,pd());return n.storage.makeRequestWithTokens(e,vo)}(n=(0,wt.m9)(n))}(this._delegate)}updateMetadata(e){return function cE(n,e){return function sC(n,e){n._throwIfRoot("updateMetadata");const t=function z0(n,e,t,r){const u=_o(e.fullServerUrl(),n.host,n._protocol),m=ky(t,r),C=n.maxOperationRetryTime,x=new xi(u,"PATCH",Ka(n,r),C);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=m,x.errorHandler=Gl(e),x}(n.storage,n._location,e,pd());return n.storage.makeRequestWithTokens(t,vo)}(n=(0,wt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function lg(n){return oC(n=(0,wt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function cC(n){return function jy(n){n._throwIfRoot("deleteObject");const e=function mS(n,e){const r=_o(e.fullServerUrl(),n.host,n._protocol),m=new xi(r,"DELETE",function d(E,C){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=Gl(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,vo)}(n=(0,wt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw My(e)}}class dg{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(mE(e))throw Wa("ref() expected a child path but got a URL, use refFromURL instead.");return new Qa(hE(this._delegate,e),this)}refFromURL(e){if(!mE(e))throw Wa("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cn.makeFromUrl(e,this._delegate.host)}catch(t){throw Wa("refFromUrl() expected a valid full URL but got an invalid one.")}return new Qa(hE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function pE(n,e,t,r={}){!function $y(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,wt.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function mE(n){return/^[A-Za-z]+:\/\//.test(n)}function _E(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new dg(t,r)}!function fC(n){const e={TaskState:Yi,TaskEvent:yS,StringFormat:js,Storage:dg,Reference:Qa};n.INTERNAL.registerComponent(new Vh.wA("storage-compat",_E,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(Ty.Z);var vE=N(127),vd=N(6451),hg=N(5363),pC=N(6063);class gC extends ni.x{constructor(e=1/0,t=1/0,r=pC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)m=E;m&&r.splice(0,m+1)}}}var mC=N(3099);function $s(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,mC.B)({connector:()=>new gC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function fg(n,e){return(0,Cu.m)(e)?mn(()=>n,e):mn(()=>n)}var pg=N(9468),Un=N(5813),pi=N(2011);N(5867);var zl=N(1877);const CC=new Map,wE={activated:!1,tokenObservers:[]},bE={initialized:!1,enabled:!1};function gr(n){return CC.get(n)||wE}function Eo(n,e){CC.set(n,e)}function Zy(){return bE}class AC{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new wt.BH,yield function SC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new wt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Mi=new wt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Wl(n){if(!gr(n).activated)throw Mi.create("use-before-activation",{appName:n.name})}function Yy(n,e){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(R){throw Mi.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==d.status)throw Mi.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(R){throw Mi.create("fetch-parse-error",{originalErrorMessage:R.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}})).apply(this,arguments)}function gi(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const mi="firebase-app-check-store";let Ja=null;function Ql(){return Ja||(Ja=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Mi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(mi,{keyPath:"compositeKey"})}}catch(t){e(Mi.create("storage-open",{originalErrorMessage:t.message}))}}),Ja)}function Gu(){return(Gu=(0,ye.Z)(function*(n,e){const r=(yield Ql()).transaction(mi,"readwrite"),u=r.objectStore(mi).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var C;m(Mi.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Cd=new zl.Yd("@firebase/app-check");function Jy(n,e){return(0,wt.hl)()?function wd(n,e){return function Jl(n,e){return Gu.apply(this,arguments)}(function Qy(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Cd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Xy(){return Zy().enabled}function TE(){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,ye.Z)(function*(){const n=Zy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const PC={error:"UNKNOWN_ERROR"};function AE(n){return wt.US.encodeString(JSON.stringify(n),!1)}function Dg(n){return e_.apply(this,arguments)}function e_(){return(e_=(0,ye.Z)(function*(n,e=!1){const t=n.app;Wl(t);const r=gr(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&r_(E)&&(o=E)}if(!e&&o&&r_(o))return{token:o.token};let m,d=!1;if(Xy()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Yy(gi(t,yield TE()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const E=yield r.exchangeTokenPromise;return yield Jy(t,E),Eo(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Cd.warn(E.message):Cd.error(E),u=E}return o?(m={token:o.token},Eo(t,Object.assign(Object.assign({},r),{token:o})),yield Jy(t,o)):m=OC(u),d&&SE(t,m),m})).apply(this,arguments)}function t_(n,e){const t=gr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Eo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function n_(n){const{app:e}=n,t=gr(e);let r=t.tokenRefresher;r||(r=function NC(n){const{app:e}=n;return new AC((0,ye.Z)(function*(){let r;if(r=gr(e).token?yield Dg(n,!0):yield Dg(n),r.error)throw r.error}),()=>!0,()=>{const t=gr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Eo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function SE(n,e){const t=gr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function r_(n){return n.expireTimeMillis-Date.now()>0}function OC(n){return{token:AE(PC),error:n}}class i_{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gr(this.app);for(const t of e)t_(this.app,t.next);return Promise.resolve()}}const jC="app-check-internal";!function u_(){(0,ds._registerComponent)(new Vh.wA("app-check",n=>function s_(n,e){return new i_(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jC).initialize()})),(0,ds._registerComponent)(new Vh.wA(jC,n=>function kC(n){return{getToken:e=>Dg(n,e),addTokenListener:e=>function Tg(n,e,t,r){const{app:o}=n,u=gr(o),d={next:t,error:r,type:e};if(Eo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&r_(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),n_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>n_(n))}(n,"INTERNAL",e),removeTokenListener:e=>t_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ds.registerVersion)("@firebase/app-check","0.5.8")}();class qu{constructor(){return(0,Un.vb)("app-check")}}"undefined"!=typeof window&&window;const Pg=new h.OlP("angularfire2.auth.use-emulator"),h_=new h.OlP("angularfire2.auth.settings"),$E=new h.OlP("angularfire2.auth.tenant-id"),f_=new h.OlP("angularfire2.auth.langugage-code"),p_=new h.OlP("angularfire2.auth.use-device-language"),Ng=new h.OlP("angularfire.auth.persistence"),g_=(n,e,t,r,o,u,d,m)=>(0,pi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[C,x]of Object.entries(d))E.settings[C]=x;return m&&E.setPersistence(m),E},[t,r,o,u,d,m]);let m_=(()=>{class n{constructor(t,r,o,u,d,m,E,C,x,R,V,K){const se=new ni.x,Pe=Xe(void 0).pipe((0,hg.Q)(d.outsideAngular),mn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8775)))),(0,At.U)(()=>(0,pi.on)(t,u,r)),(0,At.U)(Ue=>g_(Ue,u,m,C,x,R,E,V)),$s({bufferSize:1,refCount:!1}));if(xo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{Pe.pipe(qo()).subscribe();const Dt=Pe.pipe(mn(st=>st.getRedirectResult().then(Mt=>Mt,()=>null)),Un.iC,$s({bufferSize:1,refCount:!1})),Tt=Pe.pipe(mn(st=>new In.y(Mt=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(jt=>Mt.next(jt),jt=>Mt.error(jt),()=>Mt.complete()))})))),gt=Pe.pipe(mn(st=>new In.y(Mt=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(jt=>Mt.next(jt),jt=>Mt.error(jt),()=>Mt.complete()))}))));this.authState=Dt.pipe(fg(Tt),(0,pg.R)(d.outsideAngular),(0,hg.Q)(d.insideAngular)),this.user=Dt.pipe(fg(gt),(0,pg.R)(d.outsideAngular),(0,hg.Q)(d.insideAngular)),this.idToken=this.user.pipe(mn(st=>st?(0,tn.D)(st.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(mn(st=>st?(0,tn.D)(st.getIdTokenResult()):Xe(null))),this.credential=(0,vd.T)(Dt,se,this.authState.pipe(ii(st=>!st))).pipe((0,At.U)(st=>(null==st?void 0:st.user)?st:null),(0,pg.R)(d.outsideAngular),(0,hg.Q)(d.insideAngular))}return(0,pi.pX)(this,Pe,u,{spy:{apply:(Ue,Dt,Tt)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Tt.then(gt=>se.next(gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pi.Dh),h.LFG(pi.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Un.HU),h.LFG(Pg,8),h.LFG(h_,8),h.LFG($E,8),h.LFG(f_,8),h.LFG(p_,8),h.LFG(Ng,8),h.LFG(qu,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var HE=N(4986);function Yh(){return(0,qn.e)((n,e)=>{let t,r=!1;n.subscribe((0,gn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function GE(n,e){return n===e}N(8775);var et,qE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ia={},Og=Og||{},Ct=qE||self;function Qh(){}function zE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var kg="closure_uid_"+(1e9*Math.random()>>>0),KC=0;function mr(n,e,t){return n.call.apply(n.bind,arguments)}function ZE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Gr(n,e,t){return(Gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mr:ZE).apply(null,arguments)}function Fg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Sr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function zu(){this.s=this.s,this.o=this.o}var KE={};zu.prototype.s=!1,zu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function WC(n){return Object.prototype.hasOwnProperty.call(n,kg)&&n[kg]||(n[kg]=++KC)}(this);delete KE[n]}},zu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tc=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},YE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function __(n){return Array.prototype.concat.apply([],arguments)}function v_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Xh(n){return/^[\s\xa0]*$/.test(n)}var Dn,QC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yi(n,e){return-1!=n.indexOf(e)}function ef(n,e){return n<e?-1:n>e?1:0}e:{var QE=Ct.navigator;if(QE){var JE=QE.userAgent;if(JE){Dn=JE;break e}}Dn=""}function Hs(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Gs(n){const e={};for(const t in n)e[t]=n[t];return e}var qs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<qs.length;u++)t=qs[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Lg(n){return Lg[" "](n),n}Lg[" "]=Qh;var Vg,n,XC=yi(Dn,"Opera"),Dd=yi(Dn,"Trident")||yi(Dn,"MSIE"),XE=yi(Dn,"Edge"),tf=XE||Dd,Td=yi(Dn,"Gecko")&&!(yi(Dn.toLowerCase(),"webkit")&&!yi(Dn,"Edge"))&&!(yi(Dn,"Trident")||yi(Dn,"MSIE"))&&!yi(Dn,"Edge"),eD=yi(Dn.toLowerCase(),"webkit")&&!yi(Dn,"Edge");function w_(){var n=Ct.document;return n?n.documentMode:void 0}e:{var Ug="",Bg=(n=Dn,Td?/rv:([^\);]+)(\)|;)/.exec(n):XE?/Edge\/([\d\.]+)/.exec(n):Dd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):eD?/WebKit\/(\S+)/.exec(n):XC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bg&&(Ug=Bg?Bg[1]:""),Dd){var Ad=w_();if(null!=Ad&&Ad>parseFloat(Ug)){Vg=String(Ad);break e}}Vg=Ug}var tD={};var $g=Ct.document&&Dd&&(w_()||parseInt(Vg,10))||void 0,tw=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",Qh,e),Ct.removeEventListener("test",Qh,e)}catch(t){}return n}();function qr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Sd(n,e){if(qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Td){e:{try{Lg(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:nw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sd.Z.h.call(this)}}qr.prototype.h=function(){this.defaultPrevented=!0},Sr(Sd,qr);var nw={2:"touch",3:"pen",4:"mouse"};Sd.prototype.h=function(){Sd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var xd="closure_listenable_"+(1e6*Math.random()|0),rw=0;function iw(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++rw,this.ca=this.fa=!1}function nf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Hg(n){this.src=n,this.g={},this.h=0}function I_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=tc(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(nf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function C_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Hg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=C_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new iw(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var D_="closure_lm_"+(1e6*Math.random()|0),T_={};function sw(n,e,t,r,o){if(r&&r.once)return aw(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)sw(n,e[u],t,r,o);return null}return t=M_(t),n&&n[xd]?n.N(e,t,Jh(r)?!!r.capture:!!r,o):ow(n,e,t,!1,r,o)}function ow(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Jh(o)?!!o.capture:!!o,m=S_(n);if(m||(n[D_]=m=new Hg(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function nD(){var e=rD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tw||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(lw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function aw(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)aw(n,e[u],t,r,o);return null}return t=M_(t),n&&n[xd]?n.O(e,t,Jh(r)?!!r.capture:!!r,o):ow(n,e,t,!0,r,o)}function uw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)uw(n,e[u],t,r,o);else r=Jh(r)?!!r.capture:!!r,t=M_(t),n&&n[xd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=C_(u=n.g[e],t,r,o))&&(nf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=S_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=C_(e,t,r,o)),(t=-1<n?e[n]:null)&&A_(t))}function A_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[xd])I_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(lw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=S_(e))?(I_(t,n),0==t.h&&(t.src=null,e[D_]=null)):nf(n)}}}function lw(n){return n in T_?T_[n]:T_[n]="on"+n}function rD(n,e){if(n.ca)n=!0;else{e=new Sd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&A_(n),n=t.call(r,e)}return n}function S_(n){return(n=n[D_])instanceof Hg?n:null}var x_="__closure_events_fn_"+(1e9*Math.random()>>>0);function M_(n){return"function"==typeof n?n:(n[x_]||(n[x_]=function(e){return n.handleEvent(e)}),n[x_])}function xr(){zu.call(this),this.i=new Hg(this),this.P=this,this.I=null}function zr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new qr(e,n);else if(e instanceof qr)e.target=e.target||n;else{var o=e;E_(e=new qr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=rf(d,r,!0,e)&&o}if(o=rf(d=e.g=n,r,!0,e)&&o,o=rf(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=rf(d=e.g=t[u],r,!1,e)&&o}function rf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&I_(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}Sr(xr,zu),xr.prototype[xd]=!0,xr.prototype.removeEventListener=function(n,e,t,r){uw(this,n,e,t,r)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)nf(t[r]);delete n.g[e],n.h--}}this.I=null},xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gg=Ct.JSON.stringify;function cw(){var n=Zu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zg,R_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new hw,n=>n.reset());class hw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fw(n){Ct.setTimeout(()=>{throw n},0)}function qg(n,e){zg||function pw(){var n=Ct.Promise.resolve(void 0);zg=function(){n.then(iD)}}(),Zg||(zg(),Zg=!0),Zu.add(n,e)}var Zg=!1,Zu=new class dw{constructor(){this.h=this.g=null}add(e,t){const r=R_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function iD(){for(var n;n=cw();){try{n.h.call(n.g)}catch(t){fw(t)}var e=R_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Zg=!1}function Wg(n,e){xr.call(this),this.h=n||1,this.g=e||Ct,this.j=Gr(this.kb,this),this.l=Date.now()}function Wu(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function gw(n,e,t){if("function"==typeof n)t&&(n=Gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function Kg(n){n.g=gw(()=>{n.g=null,n.i&&(n.i=!1,Kg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Sr(Wg,xr),(et=Wg.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zr(this,"tick"),this.da&&(Wu(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){Wg.Z.M.call(this),Wu(this),delete this.g};class RS extends zu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Kg(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Md(n){zu.call(this),this.h=n,this.g={}}Sr(Md,zu);var P_=[];function sD(n,e,t,r){Array.isArray(t)||(t&&(P_[0]=t.toString()),t=P_);for(var o=0;o<t.length;o++){var u=sw(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ft(n){Hs(n.g,function(e,t){this.g.hasOwnProperty(t)&&A_(e)},n),n.g={}}function Yg(){this.g=!0}function Xa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Qg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Gg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Md.prototype.M=function(){Md.Z.M.call(this),ft(this)},Md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yg.prototype.Aa=function(){this.g=!1},Yg.prototype.info=function(){};var sa={},Nn=null;function N_(){return Nn=Nn||new xr}function O_(n){qr.call(this,sa.Ma,n)}function sf(n){const e=N_();zr(e,new O_(e,n))}function mw(n,e){qr.call(this,sa.STAT_EVENT,n),this.stat=e}function _i(n){const e=N_();zr(e,new mw(e,n))}function k_(n,e){qr.call(this,sa.Na,n),this.size=e}function Rd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}sa.Ma="serverreachability",Sr(O_,qr),sa.STAT_EVENT="statevent",Sr(mw,qr),sa.Na="timingevent",Sr(k_,qr);var af={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function F_(){}function Pd(){}F_.prototype.h=null;var Nd,uf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function L_(){qr.call(this,"d")}function V_(){qr.call(this,"c")}function lf(){}function Od(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Md(this),this.P=lD,this.W=new Wg(n=tf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new U_}function U_(){this.i=null,this.g="",this.h=!1}Sr(L_,qr),Sr(V_,qr),Sr(lf,F_),lf.prototype.g=function(){return new XMLHttpRequest},lf.prototype.i=function(){return{}},Nd=new lf;var lD=45e3,nc={},Ku={};function B_(n,e,t){n.K=1,n.v=ff(ps(e)),n.s=t,n.U=!0,vw(n,null)}function vw(n,e){n.F=Date.now(),kd(n),n.A=ps(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Rw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new U_,n.g=wD(n.l,t?e:null,!n.s),0<n.O&&(n.L=new RS(Gr(n.Ia,n,n.g),n.O)),sD(n.V,n.g,"readystatechange",n.gb),e=n.H?Gs(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sf(1),function oD(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var x=C[0];C=C[1];var R=x.split("_");d=2<=R.length&&"type"==R[1]?d+(x+"=")+C+"&":d+(x+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ew(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function j_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=ww(n,t),o==Ku){4==e&&(n.o=4,_i(14),r=!1),Xa(n.j,n.m,null,"[Incomplete Response]");break}if(o==nc){n.o=4,_i(15),Xa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xa(n.j,n.m,o,null),Iw(n,o)}Ew(n)&&o!=Ku&&o!=nc&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),oc(e),e.L=!0,_i(11))):(Xa(n.j,n.m,t,"[Invalid Chunked Response]"),rc(n),df(n))}function ww(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ku:(t=Number(e.substring(t,r)),isNaN(t)?nc:(r+=1)+t>e.length?Ku:(e=e.substr(r,t),n.C=r+t,e))}function kd(n){n.Y=Date.now()+n.P,bw(n,n.P)}function bw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Rd(Gr(n.eb,n),e)}function cf(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function df(n){0==n.l.G||n.I||ov(n.l,n)}function rc(n){cf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Wu(n.W),ft(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Iw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||q_(t.i,n)))if(t.I=n.N,!n.J&&q_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Rd(Gr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;_f(t),nv(t)}Ud(t),_i(18)}if(1>=kw(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else ac(t,11)}else if((n.J||t.g==n)&&_f(t),!Xh(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const R=C[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const se=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(se){var u=r.i;!u.g&&(yi(se,"spdy")||yi(se,"quic")||yi(se,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(z_(u,u.h),u.h=null))}if(r.D){const Pe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(r.sa=Pe,Tn(r.F,r.D,Pe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=zw(r,r.H?r.la:null,r.W),d.J){Fw(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(cf(m),kd(m)),r.g=d}else am(r);0<t.l.length&&om(t)}else"stop"!=C[0]&&"close"!=C[0]||ac(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ac(t,7):tv(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}sf(4)}catch(C){}}function Cw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zE(n)||"string"==typeof n)YE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(zE(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function PS(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(zE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function hf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof hf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Jg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];oa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)oa(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function oa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=Od.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==Ju(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const x=Ju(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>x)&&(3!=x||tf||this.g&&(this.h.h||this.g.ga()||$w(this.g)))){this.I||4!=x||7==e||sf(8==e||0>=R?3:2),cf(this);var t=this.g.ba();this.N=t;t:if(Ew(this)){var r=$w(this.g);n="";var o=r.length,u=4==Ju(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){rc(this),df(this);var d="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function aD(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xh(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,_i(12),rc(this),df(this);break e}Xa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Iw(this,t)}this.U?(j_(this,x,d),tf&&this.i&&3==x&&(sD(this.V,this.W,"tick",this.fb),this.W.start())):(Xa(this.j,this.m,d,null),Iw(this,d)),4==x&&rc(this),this.i&&!this.I&&(4==x?ov(this.l,this):(this.i=!1,kd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,_i(12)):(this.o=0,_i(13)),rc(this),df(this)}}}catch(x){}},et.fb=function(){if(this.g){var n=Ju(this.g),e=this.g.ga();this.C<e.length&&(cf(this),j_(this,n,e),this.i&&4!=n&&kd(this))}},et.cancel=function(){this.I=!0,rc(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function uD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sf(3),_i(17)),rc(this),this.o=2,df(this)):bw(this,this.Y-n)},(et=hf.prototype).R=function(){Jg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Jg(this),this.g.concat()},et.get=function(n,e){return oa(this.h,n)?this.h[n]:e},et.set=function(n,e){oa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Dw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Yu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Yu){this.g=void 0!==e?e:n.g,Xg(this,n.j),this.s=n.s,em(this,n.i),tm(this,n.m),this.l=n.l,e=n.h;var t=new ic;t.i=e.i,e.g&&(t.g=new hf(e.g),t.h=e.h),Tw(this,t),this.o=n.o}else n&&(t=String(n).match(Dw))?(this.g=!!e,Xg(this,t[1]||"",!0),this.s=aa(t[2]||""),em(this,t[3]||"",!0),tm(this,t[4]),this.l=aa(t[5]||"",!0),Tw(this,t[6]||"",!0),this.o=aa(t[7]||"")):(this.g=!!e,this.h=new ic(null,this.g))}function ps(n){return new Yu(n)}function Xg(n,e,t){n.j=t?aa(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function em(n,e,t){n.i=t?aa(e,!0):e}function tm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Tw(n,e,t){e instanceof ic?(n.h=e,function gD(n,e){e&&!n.j&&(Qu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&($_(this,r),Rw(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=pf(e,Mw)),n.h=new ic(e,n.g))}function Tn(n,e,t){n.h.set(e,t)}function ff(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function aa(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function pf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Aw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Aw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Yu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(pf(e,Sw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(pf(e,Sw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(pf(t,"/"==t.charAt(0)?fD:xw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",pf(t,pD)),n.join("")};var Sw=/[#\/\?@]/g,xw=/[#\?:]/g,fD=/[#\?]/g,Mw=/[#\?@]/g,pD=/#/g;function ic(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qu(n){n.g||(n.g=new hf,n.h=0,n.i&&function cD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $_(n,e){Qu(n),e=Fd(n,e),oa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,oa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Jg(n)))}function H_(n,e){return Qu(n),e=Fd(n,e),oa(n.g.h,e)}function Rw(n,e,t){$_(n,e),0<t.length&&(n.i=null,n.g.set(Fd(n,e),v_(t)),n.h+=t.length)}function Fd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Pw(n){this.l=n||Nw,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=ic.prototype).add=function(n,e){Qu(this),this.i=null,n=Fd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Qu(this),this.g.forEach(function(t,r){YE(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Qu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){Qu(this);var e=[];if("string"==typeof n)H_(this,n)&&(e=__(e,this.g.get(Fd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=__(e,n[t])}return e},et.set=function(n,e){return Qu(this),this.i=null,H_(this,n=Fd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Nw=10;function Ow(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kw(n){return n.h?1:n.g?n.g.size:0}function q_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function z_(n,e){n.g?n.g.add(e):n.h=e}function Fw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Lw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return v_(n.i)}function Z_(){}function mD(){this.g=new Z_}function Vw(n,e,t){const r=t||"";try{Cw(n,function(o,u){let d=o;Jh(o)&&(d=Gg(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function nm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function gf(n){this.l=n.$b||null,this.j=n.ib||!1}function mf(n,e){xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=W_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pw.prototype.cancel=function(){if(this.i=Lw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Z_.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},Z_.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},Sr(gf,F_),gf.prototype.g=function(){return new mf(this.l,this.j)},gf.prototype.i=function(n){return function(){return n}}({}),Sr(mf,xr);var W_=0;function Bw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function yf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,sc(n)}function sc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=mf.prototype).open=function(n,e){if(this.readyState!=W_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,sc(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yf(this)),this.readyState=W_},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,sc(this)),this.g&&(this.readyState=3,sc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yf(this):sc(this),3==this.readyState&&Bw(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,yf(this))},et.Ta=function(n){this.g&&(this.response=n,yf(this))},et.ha=function(){this.g&&yf(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(mf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var K_=Ct.JSON.parse;function Kn(n){xr.call(this),this.headers=new hf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rm,this.K=this.L=!1}Sr(Kn,xr);var rm="",yD=/^https?$/i,_D=["POST","PUT"];function vD(n){return"content-type"==n.toLowerCase()}function Q_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jw(n),im(n)}function jw(n){n.D||(n.D=!0,zr(n,"complete"),zr(n,"error"))}function J_(n){if(n.h&&void 0!==Og&&(!n.C[1]||4!=Ju(n)||2!=n.ba()))if(n.v&&4==Ju(n))gw(n.Fa,0,n);else if(zr(n,"readystatechange"),4==Ju(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Dw)[1]||null;if(!o&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;o=u.substr(0,u.length-1)}r=!yD.test(o?o.toLowerCase():"")}t=r}if(t)zr(n,"complete"),zr(n,"success");else{n.m=6;try{var d=2<Ju(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",jw(n)}}finally{im(n)}}}function im(n,e){if(n.g){X_(n);const t=n.g,r=n.C[0]?Qh:null;n.g=null,n.C=null,e||zr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function X_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function Ju(n){return n.g?n.g.readyState:0}function $w(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ev(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function sm(n){let e="";return Hs(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function ua(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ld(n){this.za=0,this.l=[],this.h=new Yg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ua("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ua("baseRetryDelayMs",5e3,n),this.$a=ua("retryDelaySeedMs",1e4,n),this.Ya=ua("forwardChannelMaxRetries",2,n),this.ra=ua("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Pw(n&&n.concurrentRequestLimit),this.Ca=new mD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function tv(n){if(rv(n),3==n.G){var e=n.V++,t=ps(n.F);Tn(t,"SID",n.J),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),Vd(n,t),(e=new Od(n,n.h,e,void 0)).K=2,e.v=ff(ps(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=wD(e.l,null),e.g.ea(e.v)),e.F=Date.now(),kd(e)}um(n)}function nv(n){n.g&&(oc(n),n.g.cancel(),n.g=null)}function rv(n){nv(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),_f(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function iv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&om(n)}function om(n){Ow(n.i)||n.m||(n.m=!0,qg(n.Ha,n),n.C=0)}function Hw(n,e){var t;t=e?e.m:n.V++;const r=ps(n.F);Tn(r,"SID",n.J),Tn(r,"RID",t),Tn(r,"AID",n.U),Vd(n,r),n.o&&n.s&&ev(r,n.o,n.s),t=new Od(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=sv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),z_(n.i,t),B_(t,r,e)}function Vd(n,e){n.j&&Cw({},function(t,r){Tn(e,r,t)})}function sv(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Gr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const x=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{Vw(x,d,"req"+C+"_")}catch(R){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function am(n){n.g||n.u||(n.Y=1,qg(n.Ga,n),n.A=0)}function Ud(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Rd(Gr(n.Ga,n),qw(n,n.A)),n.A++,0))}function oc(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function Gw(n){n.g=new Od(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ps(n.oa);Tn(e,"RID","rpc"),Tn(e,"SID",n.J),Tn(e,"CI",n.N?"0":"1"),Tn(e,"AID",n.U),Vd(n,e),Tn(e,"TYPE","xmlhttp"),n.o&&n.s&&ev(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ff(ps(e)),t.s=null,t.U=!0,vw(t,n)}function _f(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function ov(n,e){var t=null;if(n.g==e){_f(n),oc(n),n.g=null;var r=2}else{if(!q_(n.i,e))return;t=e.D,Fw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;zr(r=N_(),new k_(r,t,e,o)),om(n)}else am(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function ED(n,e){return!(kw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Rd(Gr(n.Ha,n,e),qw(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ud(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ac(n,5);break;case 4:ac(n,10);break;case 3:ac(n,6);break;default:ac(n,2)}}function qw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ac(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Gr(n.jb,n);t||(t=new Yu("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||Xg(t,"https"),ff(t)),function Uw(n,e){const t=new Yg;if(Ct.Image){const r=new Image;r.onload=Fg(nm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Fg(nm,t,r,"TestLoadImage: error",!1,e),r.onabort=Fg(nm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fg(nm,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else _i(2);n.G=0,n.j&&n.j.va(e),um(n),rv(n)}function um(n){n.G=0,n.I=-1,n.j&&((0!=Lw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,v_(n.l),n.l.length=0),n.j.ua())}function zw(n,e,t){let r=function dD(n){return n instanceof Yu?ps(n):new Yu(n,void 0)}(t);if(""!=r.i)e&&em(r,e+"."+r.i),tm(r,r.m);else{const o=Ct.location;r=function hD(n,e,t,r){var o=new Yu(null,void 0);return n&&Xg(o,n),e&&em(o,e),t&&tm(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Hs(n.aa,function(o,u){Tn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Tn(r,e,t),Tn(r,"VER",n.ma),Vd(n,r),r}function wD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&n.Ba&&!n.qa?new gf({ib:!0}):n.qa)).L=n.H,e}function Zw(){}function lm(){if(Dd&&!(10<=Number($g)))throw Error("Environmental error: no available transport.")}function Mr(n,e){xr.call(this),this.g=new Ld(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Xh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vf(this)}function av(n){L_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function uc(){V_.call(this),this.status=1}function vf(n){this.g=n}(et=Kn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Nd.g(),this.C=function _w(n){return n.h||(n.h=n.i())}(this.u?this.u:Nd),this.g.onreadystatechange=Gr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Q_(this,u)}n=t||"";const o=new hf(this.headers);r&&Cw(r,function(u,d){o.set(d,u)}),r=function YC(n){e:{var e=vD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=tc(_D,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{X_(this),0<this.B&&((this.K=function Y_(n){return Dd&&function ew(){return function JC(n){var e=tD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=QC(String(Vg)).split("."),t=QC("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=ef(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||ef(0==o[2].length,0==u[2].length)||ef(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gr(this.pa,this)):this.A=gw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Q_(this,u)}},et.pa=function(){void 0!==Og&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zr(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zr(this,"complete"),zr(this,"abort"),im(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),im(this,!0)),Kn.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?J_(this):this.cb())},et.cb=function(){J_(this)},et.ba=function(){try{return 2<Ju(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),K_(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=Ld.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Od(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Gs(u),E_(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=sv(this,o,e),Tn(t=ps(this.F),"RID",n),Tn(t,"CVER",22),this.D&&Tn(t,"X-HTTP-Session-Id",this.D),Vd(this,t),this.o&&u&&ev(t,this.o,u),z_(this.i,o),this.Ra&&Tn(t,"TYPE","init"),this.ja?(Tn(t,"$req",e),Tn(t,"SID","null"),o.$=!0,B_(o,t,null)):B_(o,t,e),this.G=2}}else 3==this.G&&(n?Hw(this,n):0==this.l.length||Ow(this.i)||Hw(this))},et.Ga=function(){if(this.u=null,Gw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Rd(Gr(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_i(10),nv(this),Gw(this))},et.ab=function(){null!=this.v&&(this.v=null,nv(this),Ud(this),_i(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),_i(2)):(this.h.info("Failed to ping google.com"),_i(1))},(et=Zw.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},lm.prototype.g=function(n,e){return new Mr(n,e)},Sr(Mr,xr),Mr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),qg(Gr(n.hb,n,e))),_i(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=zw(n,null,n.W),om(n)},Mr.prototype.close=function(){tv(this.g)},Mr.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,iv(this.g,e)}else this.v?((e={}).__data__=Gg(n),iv(this.g,e)):iv(this.g,n)},Mr.prototype.M=function(){this.g.j=null,delete this.j,tv(this.g),delete this.g,Mr.Z.M.call(this)},Sr(av,L_),Sr(uc,V_),Sr(vf,Zw),vf.prototype.xa=function(){zr(this.g,"a")},vf.prototype.wa=function(n){zr(this.g,new av(n))},vf.prototype.va=function(n){zr(this.g,new uc(n))},vf.prototype.ua=function(){zr(this.g,"b")},lm.prototype.createWebChannel=lm.prototype.g,Mr.prototype.send=Mr.prototype.u,Mr.prototype.open=Mr.prototype.m,Mr.prototype.close=Mr.prototype.close,af.NO_ERROR=0,af.TIMEOUT=8,af.HTTP_ERROR=6,yw.COMPLETE="complete",Pd.EventType=uf,uf.OPEN="a",uf.CLOSE="b",uf.ERROR="c",uf.MESSAGE="d",xr.prototype.listen=xr.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.La,Kn.prototype.getLastErrorCode=Kn.prototype.Da,Kn.prototype.getStatus=Kn.prototype.ba,Kn.prototype.getResponseJson=Kn.prototype.Qa,Kn.prototype.getResponseText=Kn.prototype.ga,Kn.prototype.send=Kn.prototype.ea;var Ww=ia.createWebChannelTransport=function(){return new lm},bD=ia.getStatEventTarget=function(){return N_()},Kw=ia.ErrorCode=af,Yw=ia.EventType=yw,NS=ia.Event=sa,uv=ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lv=ia.FetchXmlHttpFactory=gf,Ef=ia.WebChannel=Pd,ID=ia.XhrIo=Kn;const Qw="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let Bd="9.8.0";const Xu=new zl.Yd("@firebase/firestore");function cv(){return Xu.logLevel}function Oe(n,...e){if(Xu.logLevel<=zl.in.DEBUG){const t=e.map(cm);Xu.debug(`Firestore (${Bd}): ${n}`,...t)}}function ir(n,...e){if(Xu.logLevel<=zl.in.ERROR){const t=e.map(cm);Xu.error(`Firestore (${Bd}): ${n}`,...t)}}function eu(n,...e){if(Xu.logLevel<=zl.in.WARN){const t=e.map(cm);Xu.warn(`Firestore (${Bd}): ${n}`,...t)}}function cm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Bd}) INTERNAL ASSERTION FAILED: `+n;throw ir(e),new Error(e)}function bt(n,e){n||tt()}function Ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends wt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class TD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AD{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new yr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ye.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new yr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new Xw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Zr(e)}}class wf{constructor(e,t,r){this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class SD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new wf(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class la{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new dm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ri{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function bf(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ri.A=-1;class eb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=bf(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function jd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function If(n){return n+"\0"}class An{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new An(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new An(0,0))}static max(){return new Et(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function tb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function el(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class lc{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===lc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ht extends lc{construct(e,t,r){return new Ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Ht(t)}static emptyPath(){return new Ht([])}}const xD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _r extends lc{construct(e,t,r){return new _r(e,t,r)}static isValidIdentifier(e){return xD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _r(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Me(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Me(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Me(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _r(t)}static emptyPath(){return new _r([])}}class Cf{constructor(e){this.fields=e,e.sort(_r.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Yn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const nb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(n){if(bt(!!n),"string"==typeof n){let e=0;const t=nb.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sn(n.seconds),nanos:Sn(n.nanos)}}function Sn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function cc(n){return"string"==typeof n?Yn.fromBase64String(n):Yn.fromUint8Array(n)}function fv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rb(n){const e=n.mapValue.fields.__previous_value__;return fv(e)?rb(e):e}function Df(n){const e=ca(n.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}class ib{constructor(e,t,r,o,u,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class wo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wo&&e.projectId===this.projectId&&e.database===this.database}}function $d(n){return null==n}function Tf(n){return 0===n&&1/n==-1/0}function pv(n){return"number"==typeof n&&Number.isInteger(n)&&!Tf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class He{constructor(e){this.path=e}static fromPath(e){return new He(Ht.fromString(e))}static fromName(e){return new He(Ht.fromString(e).popFirst(5))}static empty(){return new He(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ht.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Ht(e.slice()))}}const tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Af={nullValue:"NULL_VALUE"};function nl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fv(n)?4:ab(n)?9007199254740991:10:tt()}function da(n,e){if(n===e)return!0;const t=nl(n);if(t!==nl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Df(n).isEqual(Df(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ca(r.timestampValue),d=ca(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,cc(n.bytesValue).isEqual(cc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Sn(r.geoPointValue.latitude)===Sn(o.geoPointValue.latitude)&&Sn(r.geoPointValue.longitude)===Sn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Sn(r.integerValue)===Sn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Sn(r.doubleValue),d=Sn(o.doubleValue);return u===d?Tf(u)===Tf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return jd(n.arrayValue.values||[],e.arrayValue.values||[],da);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(tb(u)!==tb(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!da(u[m],d[m])))return!1;return!0}(n,e);default:return tt()}var o}function Hd(n,e){return void 0!==(n.values||[]).find(t=>da(t,e))}function rl(n,e){if(n===e)return 0;const t=nl(n),r=nl(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Sn(o.integerValue||o.doubleValue),m=Sn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return vi(n.timestampValue,e.timestampValue);case 4:return vi(Df(n),Df(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=cc(o),m=cc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let E=0;E<d.length&&E<m.length;E++){const C=Pt(d[E],m[E]);if(0!==C)return C}return Pt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Pt(Sn(o.latitude),Sn(u.latitude));return 0!==d?d:Pt(Sn(o.longitude),Sn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let E=0;E<d.length&&E<m.length;++E){const C=rl(d[E],m[E]);if(C)return C}return Pt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===tl.mapValue&&u===tl.mapValue)return 0;if(o===tl.mapValue)return 1;if(u===tl.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const R=Pt(m[x],C[x]);if(0!==R)return R;const V=rl(d[m[x]],E[C[x]]);if(0!==V)return V}return Pt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function vi(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=ca(n),r=ca(e),o=Pt(t.seconds,r.seconds);return 0!==o?o:Pt(t.nanos,r.nanos)}function bo(n){return gv(n)}function gv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=ca(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?cc(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=gv(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${gv(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sb(n){return!!n&&"integerValue"in n}function tu(n){return!!n&&"arrayValue"in n}function ob(n){return!!n&&"nullValue"in n}function hm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fm(n){return!!n&&"mapValue"in n}function Gd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return el(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ab(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function MD(n){return"nullValue"in n?Af:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dc(wo.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function mv(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dc(wo.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tl:tt()}function yv(n,e){const t=rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _v(n,e){const t=rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gd(t)}setAll(e){let t=_r.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Gd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());fm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];fm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){el(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new vr(Gd(this.value))}}function pm(n){const e=[];return el(n.fields,(t,r)=>{const o=new _r([t]);if(fm(r)){const u=pm(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Cf(e)}class xn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,Et.min(),Et.min(),vr.empty(),0)}static newFoundDocument(e,t,r){return new xn(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new xn(e,2,t,Et.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,Et.min(),vr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function vv(n){return n.fields.find(e=>2===e.kind)}function il(n){return n.fields.filter(e=>2!==e.kind)}Sf.UNKNOWN_ID=-1;class hc{constructor(e,t){this.fieldPath=e,this.kind=t}}class qd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qd(0,gs.min())}}function ub(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new An(t+1,0):new An(t,r));return new gs(o,He.empty(),e)}function Ev(n){return new gs(n.readTime,n.key,-1)}class gs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gs(Et.min(),He.empty(),-1)}static max(){return new gs(Et.max(),He.empty(),-1)}}function RD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}class Qn{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gm(this.root,e,this.comparator,!0)}}class gm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Rr.RED,this.left=null!=o?o:Rr.EMPTY,this.right=null!=u?u:Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Rr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Rr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1,Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Rr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lb(this.data.getIterator())}getIteratorFrom(e){return new lb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class lb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fc(n){return n.hasNext()?n.getNext():void 0}class cb{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function db(n,e=null,t=[],r=[],o=null,u=null,d=null){return new cb(n,e,t,r,o,u,d)}function pc(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+bo(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),$d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>bo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>bo(r)).join(",")),e.P=t}return e.P}function xf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!BS(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!da(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OD(n.startAt,e.startAt)&&OD(n.endAt,e.endAt)}function Mf(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Rf(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function wv(n,e,t){let r=Af,o=!0;for(const u of Rf(n,e)){let d=Af,m=!0;switch(u.op){case"<":case"<=":d=MD(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Af}yv({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];yv({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function bv(n,e,t){let r=tl,o=!0;for(const u of Rf(n,e)){let d=tl,m=!0;switch(u.op){case">=":case">":d=mv(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=tl}_v({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];_v({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new PD(e,t,r):"array-contains"===t?new FS(e,r):"in"===t?new LS(e,r):"not-in"===t?new VS(e,r):"array-contains-any"===t?new US(e,r):new Wr(e,t,r)}static V(e,t,r){return"in"===t?new kS(e,r):new fb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(rl(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.v(rl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class PD extends Wr{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.v(t)}}class kS extends Wr{constructor(e,t){super(e,"in",t),this.keys=ND(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fb extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=ND(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ND(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class FS extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tu(t)&&Hd(t.arrayValue,this.value)}}class LS extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hd(this.value.arrayValue,t)}}class VS extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hd(this.value.arrayValue,t)}}class US extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hd(this.value.arrayValue,r))}}class gc{constructor(e,t){this.position=e,this.inclusive=t}}class Pf{constructor(e,t="asc"){this.field=e,this.dir=t}}function BS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Nf(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?He.comparator(He.fromName(d.referenceValue),t.key):rl(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function OD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!da(n.position[t],e.position[t]))return!1;return!0}class ha{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function mm(n,e,t,r,o,u,d,m){return new ha(n,e,t,r,o,u,d,m)}function mc(n){return new ha(n)}function gb(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Of(n){for(const e of n.filters)if(e.S())return e.field;return null}function ym(n){return null!==n.collectionGroup}function yc(n){const e=Ze(n);if(null===e.D){e.D=[];const t=Of(e),r=gb(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Pf(t)),e.D.push(new Pf(_r.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Pf(_r.keyField(),u))}}}return e.D}function ms(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=db(e.path,e.collectionGroup,yc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of yc(e))t.push(new Pf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new gc(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new gc(e.startAt.position,e.startAt.inclusive):null;e.C=db(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function kD(n,e,t){return new ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zd(n,e){return xf(ms(n),ms(e))&&n.limitType===e.limitType}function mb(n){return`${pc(ms(n))}|lt:${n.limitType}`}function kf(n){return`Query(target=${function hb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${bo(r.value)}`;var r}).join(", ")}]`),$d(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>bo(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>bo(t)).join(",")),`Target(${e})`}(ms(n))}; limitType=${n.limitType})`}function Iv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):He.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Nf(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,yc(t),r)||t.endAt&&!function(o,u,d){const m=Nf(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,yc(t),r)));var t,r}function FD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LD(n){return(e,t)=>{let r=!1;for(const o of yc(n)){const u=jS(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function jS(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),E=d.data.field(o);return null!==m&&null!==E?rl(m,E):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function yb(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tf(e)?"-0":e}}function _b(n){return{integerValue:""+n}}function vb(n,e){return pv(e)?_b(e):yb(n,e)}class Cv{constructor(){this._=void 0}}function VD(n,e,t){return n instanceof Ei?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof _c?_m(n,e):n instanceof vc?wb(n,e):function(r,o){const u=Eb(r,o),d=Tv(u)+Tv(r.k);return sb(u)&&sb(r.k)?_b(d):yb(r.M,d)}(n,e)}function Dv(n,e,t){return n instanceof _c?_m(n,e):n instanceof vc?wb(n,e):t}function Eb(n,e){return n instanceof sl?sb(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ei extends Cv{}class _c extends Cv{constructor(e){super(),this.elements=e}}function _m(n,e){const t=Av(e);for(const r of n.elements)t.some(o=>da(o,r))||t.push(r);return{arrayValue:{values:t}}}class vc extends Cv{constructor(e){super(),this.elements=e}}function wb(n,e){let t=Av(e);for(const r of n.elements)t=t.filter(o=>!da(o,r));return{arrayValue:{values:t}}}class sl extends Cv{constructor(e,t){super(),this.M=e,this.k=t}}function Tv(n){return Sn(n.integerValue||n.doubleValue)}function Av(n){return tu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ff{constructor(e,t){this.field=e,this.transform=t}}class Ib{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Zd{}function Io(n,e,t){n instanceof Lf?function(r,o,u){const d=r.value.clone(),m=Db(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ec?function(r,o,u){if(!vm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Db(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Mv(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sv(n,e,t){var o;n instanceof Lf?function(r,o,u){if(!vm(r.precondition,o))return;const d=r.value.clone(),m=UD(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(xv(o),d).setHasLocalMutations()}(n,e,t):n instanceof Ec?function(r,o,u){if(!vm(r.precondition,o))return;const d=UD(r.fieldTransforms,u,o),m=o.data;m.setAll(Mv(r)),m.setAll(d),o.convertToFoundDocument(xv(o),m).setHasLocalMutations()}(n,e,t):vm(n.precondition,o=e)&&o.convertToNoDocument(Et.min())}function $S(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Eb(r.transform,o||null);null!=u&&(null==t&&(t=vr.empty()),t.set(r.field,u))}return t||null}function Cb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&jd(t,r,(o,u)=>function bb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof _c&&r instanceof _c||t instanceof vc&&r instanceof vc?jd(t.elements,r.elements,da):t instanceof sl&&r instanceof sl?da(t.k,r.k):t instanceof Ei&&r instanceof Ei);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function xv(n){return n.isFoundDocument()?n.version:Et.min()}class Lf extends Zd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Ec extends Zd{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function Mv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Db(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Dv(d,m,t[o]))}return r}function UD(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,VD(u,d,e))}return r}class Wd extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Em extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class BD{constructor(e){this.count=e}}var or,Gt;function wm(n){switch(n){default:return tt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function bm(n){if(void 0===n)return ir("GRPC error has no .code"),ce.UNKNOWN;switch(n){case or.OK:return ce.OK;case or.CANCELLED:return ce.CANCELLED;case or.UNKNOWN:return ce.UNKNOWN;case or.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case or.INTERNAL:return ce.INTERNAL;case or.UNAVAILABLE:return ce.UNAVAILABLE;case or.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case or.NOT_FOUND:return ce.NOT_FOUND;case or.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case or.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case or.ABORTED:return ce.ABORTED;case or.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case or.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case or.DATA_LOSS:return ce.DATA_LOSS;default:return tt()}}(Gt=or||(or={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";class nu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}const jD=new Qn(He.comparator);function ys(){return jD}const Tb=new Qn(He.comparator);function Rv(...n){let e=Tb;for(const t of n)e=e.insert(t.key,t);return e}function Vf(){return new nu(n=>n.toString(),(n,e)=>n.isEqual(e))}const HS=new Qn(He.comparator),GS=new cn(He.comparator);function Qt(...n){let e=GS;for(const t of n)e=e.add(t);return e}const $D=new cn(Pt);function Im(){return $D}class Uf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Cm.createSynthesizedTargetChangeForCurrentChange(e,t)),new Uf(Et.min(),r,Im(),ys(),Qt())}}class Cm{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Cm(Yn.EMPTY_BYTE_STRING,t,Qt(),Qt(),Qt())}}class Pv{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class HD{constructor(e,t){this.targetId=e,this.$=t}}class GD{constructor(e,t,r=Yn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class qD{constructor(){this.B=0,this.L=Ab(),this.U=Yn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Qt(),t=Qt(),r=Qt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new Cm(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Ab()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class zD{constructor(e){this.nt=e,this.st=new Map,this.it=ys(),this.rt=Bf(),this.ot=new cn(Pt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Mf(u))if(0===r){const d=new He(u.path);this.ct(t,d,xn.newNoDocument(d,Et.min()))}else bt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&Mf(m.target)){const E=new He(m.target.path);null!==this.it.get(E)||this.It(d,E)||this.ct(d,E,xn.newNoDocument(E,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Qt();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Uf(e,t,this.ot,this.it,r);return this.it=ys(),this.rt=Bf(),this.ot=new cn(Pt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new qD,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new cn(Pt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new qD),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Bf(){return new Qn(He.comparator)}function Ab(){return new Qn(He.comparator)}const ZD={asc:"ASCENDING",desc:"DESCENDING"},Sb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class wc{constructor(e,t){this.databaseId=e,this.N=t}}function Kd(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dm(n,e){return n.N?e.toBase64():e.toUint8Array()}function Nv(n,e){return Kd(n,e.toTimestamp())}function Pr(n){return bt(!!n),Et.fromTimestamp(function(e){const t=ca(e);return new An(t.seconds,t.nanos)}(n))}function jf(n,e){return(t=n,new Ht(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tm(n){const e=Ht.fromString(n);return bt(Fb(e)),e}function ol(n,e){return jf(n.databaseId,e.path)}function ru(n,e){const t=Tm(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(Ov(t))}function xb(n,e){return jf(n.databaseId,e)}function WD(n){const e=Tm(n);return 4===e.length?Ht.emptyPath():Ov(e)}function Am(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ov(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Mb(n,e,t){return{name:ol(n,e),fields:t.value.mapValue.fields}}function Rb(n,e,t){const r=ru(n,e.name),o=Pr(e.updateTime),u=new vr({mapValue:{fields:e.fields}}),d=xn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Yd(n,e){let t;if(e instanceof Lf)t={update:Mb(n,e.key,e.value)};else if(e instanceof Wd)t={delete:ol(n,e.key)};else if(e instanceof Ec)t={update:Mb(n,e.key,e.data),updateMask:ZS(e.fieldMask)};else{if(!(e instanceof Em))return tt();t={verify:ol(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Ei)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _c)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof vc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof sl)return{fieldPath:u.field.canonicalString(),increment:d.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Nv(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function Sm(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?sr.updateTime(Pr(o.updateTime)):void 0!==o.exists?sr.exists(o.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(bt("REQUEST_TIME"===d.setToServerValue),m=new Ei):"appendMissingElements"in d?m=new _c(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new vc(d.removeAllFromArray.values||[]):"increment"in d?m=new sl(u,d.increment):tt();const E=_r.fromServerFormat(d.fieldPath);return new Ff(E,m)}(n,o)):[];var o;if(e.update){const o=ru(n,e.update.name),u=new vr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Cf((e.updateMask.fieldPaths||[]).map(C=>_r.fromServerFormat(C)));return new Ec(o,u,d,t,r)}return new Lf(o,u,t,r)}if(e.delete){const o=ru(n,e.delete);return new Wd(o,t)}if(e.verify){const o=ru(n,e.verify);return new Em(o,t)}return tt()}function Nb(n,e){return{documents:[xb(n,e.path)]}}function Ob(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xb(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xb(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(x=>function(R){if("=="===R.op){if(hm(R.value))return{unaryFilter:{field:Qd(R.field),op:"IS_NAN"}};if(ob(R.value))return{unaryFilter:{field:Qd(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(hm(R.value))return{unaryFilter:{field:Qd(R.field),op:"IS_NOT_NAN"}};if(ob(R.value))return{unaryFilter:{field:Qd(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qd(R.field),op:Lv(R.op),value:R.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:Qd((x=C).field),direction:kb(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||$d(C)?C:{value:C});var C,m,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function kv(n){let e=WD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=QD(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Pf(Jd((R=x).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(x){let R;return R="object"==typeof x?x.value:x,$d(R)?null:R}(t.limit));let E=null;var x;t.startAt&&(E=new gc((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new gc(x.values||[],!x.before)}(t.endAt)),mm(e,o,d,u,m,"F",E,C)}function QD(n){return n?void 0!==n.unaryFilter?[zS(n)]:void 0!==n.fieldFilter?[qS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>QD(e)).reduce((e,t)=>e.concat(t)):tt():[]}function kb(n){return ZD[n]}function Lv(n){return Sb[n]}function Qd(n){return{fieldPath:n.canonicalString()}}function Jd(n){return _r.fromServerFormat(n.fieldPath)}function qS(n){return Wr.create(Jd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function zS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Jd(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Jd(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Jd(n.unaryFilter.field);return Wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jd(n.unaryFilter.field);return Wr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function ZS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JD(e)),e=WS(n.get(t),e);return JD(e)}function WS(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function JD(n){return n+"\x01\x01"}function iu(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ht.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new Ht(r)}const XD=["userId","batchId"];function Vv(n,e){return[n,Pi(e)]}function Lb(n,e,t){return[n,Pi(e),t]}const KS={},YS=["prefixPath","collectionGroup","readTime","documentId"],QS=["prefixPath","collectionGroup","documentId"],JS=["collectionGroup","readTime","prefixPath","documentId"],i=["canonicalId","targetId"],s=["targetId","path"],a=["path","targetId"],l=["collectionId","parent"],c=["indexId","uid"],p=["uid","sequenceNumber"],_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],w=["indexId","uid","orderedDocumentKey"],b=["userId","collectionPath","documentId"],A=["userId","collectionPath","largestBatchId"],S=["userId","collectionGroup","largestBatchId"],k=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],U=[...k,"documentOverlays"],Q=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_e=[...Q,"indexConfiguration","indexState","indexEntries"],ke="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):z.reject(t)}static resolve(e){return new z((t,r)=>{t(e)})}static reject(e){return new z((t,r)=>{r(e)})}static waitFor(e){return new z((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next(o=>o?z.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class De{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new yr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new qt(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=$f(r.target.error);this.At.reject(new qt(e,o))}}static open(e,t,r,o){try{return new De(t,e.transaction(o,r))}catch(u){throw new qt(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bc(t)}}class nt{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===nt.Vt((0,wt.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),su(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,wt.hl)())return!1;if(nt.St())return!0;const e=(0,wt.z$)(),t=nt.Vt(e),r=0<t&&t<10,o=nt.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new qt(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Me(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new qt(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=De.open(u.db,e,d?"readonly":"readwrite",r),C=o(E).next(x=>(E.bt(),x)).catch(x=>(E.abort(x),z.reject(x))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Lt{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return su(this.Ft.delete())}}class qt extends Me{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Er(n){return"IndexedDbTransactionError"===n.name}class bc{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),su(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),su(this.store.add(e))}get(e){return su(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),su(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),su(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new z((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new z((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new z((r,o)=>{t.onerror=u=>{const d=$f(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new z((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new Lt(m),C=t(m.primaryKey,m.value,E);if(C instanceof z){const x=C.catch(R=>(E.done(),z.reject(R)));r.push(x)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>z.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function su(n){return new z((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=$f(r.target.error);t(o)}})}let xm=!1;function $f(n){const e=nt.Vt((0,wt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xm||(xm=!0,setTimeout(()=>{throw r},0)),r}}return n}class Mm extends $e{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ar(n,e){const t=Ze(n);return nt.xt(t.Ht,e)}class Hf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Io(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Sv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Sv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&jd(this.mutations,e.mutations,(t,r)=>Cb(t,r))&&jd(this.baseMutations,e.baseMutations,(t,r)=>Cb(t,r))}}class Gf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=HS;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Gf(e,t,r,o)}}class qf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fa{constructor(e,t,r,o,u=Et.min(),d=Et.min(),m=Yn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class XS{constructor(e){this.Jt=e}}function ex(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ol(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Kd(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zf(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:zf(e.version)}}var o,u;return r}function Vb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zf(n){const e=new An(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Rm(n,e){const t=(e.baseMutations||[]).map(u=>Sm(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Sm(n.Jt,u)),o=An.fromMillis(e.localWriteTimeMs);return new Hf(e.batchId,o,t,r)}function Uv(n){const e=Zf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Zf(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=ms(mc(WD(o.documents[0])))):r=ms(kv(n.query)),new fa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Yn.fromBase64String(n.resumeToken))}function tx(n,e){const t=zf(e.snapshotVersion),r=zf(e.lastLimboFreeSnapshotVersion);let o;o=Mf(e.target)?Nb(n.Jt,e.target):Ob(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function eT(n){const e=kv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kD(e,e.limit,"L"):e}function tT(n,e){return new qf(e.largestBatchId,Sm(n.Jt,e.overlayMutation))}function nx(n,e){const t=e.path.lastSegment();return[n,Pi(e.path.popLast()),t]}class E1{getBundleMetadata(e,t){return rx(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Zf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return rx(e).put({bundleId:(r=t).id,createTime:zf(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ix(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:eT(o.bundledQuery),readTime:Zf(o.readTime)};var o})}saveNamedQuery(e,t){return ix(e).put({name:(r=t).name,readTime:zf(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function rx(n){return ar(n,"bundles")}function ix(n){return ar(n,"namedQueries")}class nT{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new nT(e,t.uid||"")}getOverlay(e,t){return Bv(e).get(nx(this.userId,t)).next(r=>r?tT(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new qf(t,d);o.push(this.Xt(e,m))}),z.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Pi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Bv(e).Qt("collectionPathOverlayIndex",m))}),z.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Vf(),u=Pi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Bv(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const E of m){const C=tT(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Vf();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bv(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,x)=>{const R=tT(this.M,C);u.size()<o||R.largestBatchId===d?(u.set(R.getKey(),R),d=R.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return Bv(e).put(function(r,o,u){const[d,m,E]=nx(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Yd(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Bv(n){return ar(n,"documentOverlays")}class Wf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Sn(e.integerValue));else if("doubleValue"in e){const r=Sn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Tf(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(cc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?ab(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),He.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function w1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function sx(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=w1(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Wf.fe=new Wf;class b1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=sx(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=sx(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class I1{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class C1{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class jv{constructor(){this.De=new b1,this.Ce=new I1(this.De),this.xe=new C1(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Kf{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Kf(this.indexId,this.documentKey,this.arrayValue,r)}}function Yf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ox(n.arrayValue,e.arrayValue),0!==t?t:(t=ox(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function ox(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class D1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=vv(e);if(void 0!==t&&!this.Be(t))return!1;const r=il(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class T1{constructor(){this.qe=new rT}addToCollectionParentIndex(e,t){return this.qe.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(gs.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class rT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new cn(Ht.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new cn(Ht.comparator)).toArray()}}const Ub=new Uint8Array(0);class A1{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new rT,this.Ge=new nu(r=>pc(r),(r,o)=>xf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Pi(o)};return ax(e).put(u)}return z.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[If(t),""],!1,!0);return ax(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(iu(d.parent))}return r})}addFieldIndex(e,t){const r=Bb(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Bb(e),o=jb(e),u=$v(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=$v(e);let o=!0;const u=new Map;return z.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Qt();const m=[];return z.forEach(u,(E,C)=>{var x;Oe("IndexedDbIndexManager",`Using index ${x=E,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${pc(t)}`);const R=function(gt,st){const Mt=vv(st);if(void 0===Mt)return null;for(const jt of Rf(gt,Mt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(C,E),V=function(gt,st){const Mt=new Map;for(const jt of il(st))for(const Or of Rf(gt,jt.fieldPath))switch(Or.op){case"==":case"in":Mt.set(jt.fieldPath.canonicalString(),Or.value);break;case"not-in":case"!=":return Mt.set(jt.fieldPath.canonicalString(),Or.value),Array.from(Mt.values())}return null}(C,E),K=function(gt,st){const Mt=[];let jt=!0;for(const Or of il(st)){const ou=0===Or.kind?wv(gt,Or.fieldPath,gt.startAt):bv(gt,Or.fieldPath,gt.startAt);Mt.push(ou.value),jt&&(jt=ou.inclusive)}return new gc(Mt,jt)}(C,E),se=function(gt,st){const Mt=[];let jt=!0;for(const Or of il(st)){const ou=0===Or.kind?bv(gt,Or.fieldPath,gt.endAt):wv(gt,Or.fieldPath,gt.endAt);Mt.push(ou.value),jt&&(jt=ou.inclusive)}return new gc(Mt,jt)}(C,E),Pe=this.We(E,C,K),Ue=this.We(E,C,se),Dt=this.ze(E,C,V),Tt=this.He(E.indexId,R,Pe,K.inclusive,Ue,se.inclusive,Dt);return z.forEach(Tt,gt=>r.Gt(gt,t.limit).next(st=>{st.forEach(Mt=>{const jt=He.fromSegments(Mt.documentKey);d.has(jt)||(d=d.add(jt),m.push(jt))})}))}).next(()=>m)}return z.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),C=E/(null!=t?t.length:1),x=[];for(let R=0;R<E;++R){const V=t?this.Je(t[R/C]):Ub,K=this.Ye(e,V,r[R%C],o),se=this.Xe(e,V,u[R%C],d),Pe=m.map(Ue=>this.Ye(e,V,Ue,!0));x.push(...this.createRange(K,se,Pe))}return x}Ye(e,t,r,o){const u=new Kf(e,He.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Kf(e,He.empty(),t,r);return o?u.ke():u}je(e,t){const r=new D1(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return z.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new cn(_r.comparator),E=!1;for(const C of d.filters){const x=C;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?E=!0:m=m.add(x.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new jv;for(const o of il(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Wf.fe.Zt(u,d)}return r.Se()}Je(e){const t=new jv;return Wf.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new jv;return Wf.fe.Zt(dc(this.databaseId,t),r.Ne(function(o){const u=il(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new jv);let u=0;for(const d of il(e)){const m=r[u++];for(const E of o)if(this.en(t,d.fieldPath)&&tu(m))o=this.nn(o,d,m);else{const C=E.Ne(d.kind);Wf.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const E=new jv;E.seed(m.Se()),Wf.fe.Zt(d,E.Ne(t.kind)),u.push(E)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Bb(e),o=jb(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return z.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{d.push(function(C,x){const R=x?new qd(x.sequenceNumber,new gs(Zf(x.readTime),new He(iu(x.documentKey)),x.largestBatchId)):qd.empty(),V=C.fields.map(([K,se])=>new hc(_r.fromServerFormat(K),se));return new Sf(C.indexId,C.collectionGroup,V,R)}(m,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Pt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Bb(e),u=jb(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>z.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:zf((V=r).readTime),documentKey:Pi(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?z.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),z.forEach(m,E=>this.on(e,o,E).next(C=>{const x=this.un(u,E);return C.isEqual(x)?z.resolve():this.an(e,u,E,C,x)}))))})}cn(e,t,r,o){return $v(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return $v(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=$v(e);let u=new cn(Yf);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new Kf(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new cn(Yf);const o=this.Ze(t,e);if(null==o)return r;const u=vv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(tu(d))for(const m of d.arrayValue.values||[])r=r.add(new Kf(t.indexId,e.key,this.Je(m),o))}else r=r.add(new Kf(t.indexId,e.key,Ub,o));return r}an(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,E,C,x,R){const V=m.getIterator(),K=E.getIterator();let se=fc(V),Pe=fc(K);for(;se||Pe;){let Ue=!1,Dt=!1;if(se&&Pe){const Tt=C(se,Pe);Tt<0?Dt=!0:Tt>0&&(Ue=!0)}else null!=se?Dt=!0:Ue=!0;Ue?(x(Pe),Pe=fc(K)):Dt?(R(se),se=fc(V)):(se=fc(V),Pe=fc(K))}}(o,u,Yf,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),z.waitFor(d)}rn(e){let t=1;return jb(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Yf(d,m)).filter((d,m,E)=>!m||0!==Yf(d,E[m-1]));const o=[];o.push(e);for(const d of r){const m=Yf(d,e),E=Yf(d,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(d),o.push(d.ke());else if(E>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Ub,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Ub,[]]));return u}getMinOffset(e,t){let r;return z.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||RD(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=gs.min()})).next(()=>r)}}function ax(n){return ar(n,"collectionParents")}function $v(n){return ar(n,"indexEntries")}function Bb(n){return ar(n,"indexConfiguration")}function jb(n){return ar(n,"indexState")}const ux={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zs(e,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lx(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:d},(x,R,V)=>(m++,V.delete()));u.push(E.next(()=>{bt(1===m)}));const C=[];for(const x of t.mutations){const R=Lb(e,x.key.path,t.batchId);u.push(o.delete(R)),C.push(x.key)}return z.waitFor(u).next(()=>C)}function $b(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(41943040,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);class iT{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new iT(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xd(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Pm(e),d=Xd(e);return d.add({}).next(m=>{bt("number"==typeof m);const E=new Hf(m,t,r,o),C=function(V,K,se){const Pe=se.baseMutations.map(Dt=>Yd(V.Jt,Dt)),Ue=se.mutations.map(Dt=>Yd(V.Jt,Dt));return{userId:K,batchId:se.batchId,localWriteTimeMs:se.localWriteTime.toMillis(),baseMutations:Pe,mutations:Ue}}(this.M,this.userId,E),x=[];let R=new cn((V,K)=>Pt(V.canonicalString(),K.canonicalString()));for(const V of o){const K=Lb(this.userId,V.key.path,m);R=R.add(V.key.path.popLast()),x.push(d.put(C)),x.push(u.put(K,KS))}return R.forEach(V=>{x.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.ln[m]=E.keys()}),z.waitFor(x).next(()=>E)})}lookupMutationBatch(e,t){return Xd(e).get(t).next(r=>r?(bt(r.userId===this.userId),Rm(this.M,r)):null)}fn(e,t){return this.ln[t]?z.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Xd(e).Wt({index:"userMutationsIndex",range:o},(d,m,E)=>{m.userId===this.userId&&(bt(m.batchId>=r),u=Rm(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xd(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Rm(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vv(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Pm(e).Wt({range:o},(d,m,E)=>{const[C,x,R]=d,V=iu(x);if(C===this.userId&&t.path.isEqual(V))return Xd(e).get(R).next(K=>{if(!K)throw tt();bt(K.userId===this.userId),u.push(Rm(this.M,K))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Pt);const o=[];return t.forEach(u=>{const d=Vv(this.userId,u.path),m=IDBKeyRange.lowerBound(d),E=Pm(e).Wt({range:m},(C,x,R)=>{const[V,K,se]=C,Pe=iu(K);V===this.userId&&u.path.isEqual(Pe)?r=r.add(se):R.done()});o.push(E)}),z.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Vv(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new cn(Pt);return Pm(e).Wt({range:d},(E,C,x)=>{const[R,V,K]=E,se=iu(V);R===this.userId&&r.isPrefixOf(se)?se.length===o&&(m=m.add(K)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Xd(e).get(u).next(d=>{if(null===d)throw tt();bt(d.userId===this.userId),r.push(Rm(this.M,d))}))}),z.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return lx(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),z.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Pm(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const E=iu(u[1]);o.push(E)}else m.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return cx(e,this.userId,t)}wn(e){return dx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cx(n,e,t){const r=Vv(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Pm(n).Wt({range:u,jt:!0},(m,E,C)=>{const[x,R,V]=m;x===e&&R===o&&(d=!0),C.done()}).next(()=>d)}function Xd(n){return ar(n,"mutations")}function Pm(n){return ar(n,"documentMutations")}function dx(n){return ar(n,"mutationQueues")}class Qf{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Qf(0)}static yn(){return new Qf(-1)}}class S1{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Qf(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Et.fromTimestamp(new An(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Nm(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Nm(e).Wt((d,m)=>{const E=Uv(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>z.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Nm(e).Wt((r,o)=>{const u=Uv(o);t(u)})}pn(e){return hx(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}In(e,t){return hx(e).put("targetGlobalKey",t)}Tn(e,t){return Nm(e).put(tx(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=pc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Nm(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,E)=>{const C=Uv(m);xf(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=eh(e);return t.forEach(d=>{const m=Pi(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),z.waitFor(o)}removeMatchingKeys(e,t,r){const o=eh(e);return z.forEach(t,u=>{const d=Pi(u.path);return z.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=eh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=eh(e);let u=Qt();return o.Wt({range:r,jt:!0},(d,m,E)=>{const C=iu(d[1]),x=new He(C);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=Pi(t.path),o=IDBKeyRange.bound([r],[If(r)],!1,!0);let u=0;return eh(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],E,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Nm(e).get(t).next(r=>r?Uv(r):null)}}function Nm(n){return ar(n,"targets")}function hx(n){return ar(n,"targetGlobal")}function eh(n){return ar(n,"targetDocuments")}function Jf(n){return sT.apply(this,arguments)}function sT(){return sT=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==ke)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),sT.apply(this,arguments)}function fx([n,e],[t,r]){const o=Pt(n,t);return 0===o?Pt(e,r):o}class x1{constructor(e){this.An=e,this.buffer=new cn(fx),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class M1{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Er(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Jf(o)}yield t.Sn(e)}))}}class R1{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return z.resolve(Ri.A);const r=new x1(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(ux)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ux):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,E,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,d=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(C=Date.now(),cv()<=zl.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${R} documents in `+(C-E)+`ms\nTotal Duration: ${C-x}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class P1{constructor(e,t){this.db=e,this.garbageCollector=new R1(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Hb(e,r)}removeReference(e,t,r){return Hb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hb(e,t)}On(e,t){return function(r,o){let u=!1;return dx(r).zt(d=>cx(r,d,o).next(m=>(m&&(u=!0),z.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const E=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Et.min()),eh(e).delete([0,Pi(d.path)])))});o.push(E)}}).next(()=>z.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hb(e,t)}Mn(e,t){const r=eh(e);let o,u=Ri.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:E,sequenceNumber:C})=>{0===d?(u!==Ri.A&&t(new He(iu(o)),u),u=C,o=E):u=Ri.A}).next(()=>{u!==Ri.A&&t(new He(iu(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hb(n,e){return eh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Pi(e.path),sequenceNumber:r}));var r}class px{constructor(){this.changes=new nu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N1{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xf(e).put(r)}removeEntry(e,t,r){return Xf(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Vb(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=xn.newInvalidDocument(t);return Xf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Hv(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:xn.newInvalidDocument(t)};return Xf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Hv(t))},(o,u)=>{r={document:this.$n(t,u),size:$b(u)}}).next(()=>r)}getEntries(e,t){let r=ys();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=ys(),o=new Qn(He.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,$b(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return z.resolve();let o=new cn(yx);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(Hv(o.first()),Hv(o.last())),d=o.getIterator();let m=d.getNext();return Xf(e).Wt({index:"documentKeyIndex",range:u},(E,C,x)=>{const R=He.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&yx(m,R)<0;)r(m,null),m=d.getNext();m&&m.isEqual(R)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?x.Ut(Hv(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Vb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xf(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=ys();for(const E of d){const C=this.$n(He.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=ys();const d=mx(t,r),m=mx(t,gs.max());return Xf(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(E,C,x)=>{const R=this.$n(He.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(R.key,R),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new O1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gx(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Fn(e,t){return gx(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function v1(n,e){let t;if(e.document)t=Rb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),o=Zf(e.noDocument.readTime);t=xn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=He.fromSegments(e.unknownDocument.path),o=Zf(e.unknownDocument.version);t=xn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new An(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return xn.newInvalidDocument(e)}}class O1 extends px{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new nu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new cn((u,d)=>Pt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const E=ex(this.Kn.M,d);o=o.add(u.path.popLast()),r+=$b(E)-m.size,t.push(this.Kn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=ex(this.Kn.M,d.convertToNoDocument(Et.min()));t.push(this.Kn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function gx(n){return ar(n,"remoteDocumentGlobal")}function Xf(n){return ar(n,"remoteDocumentsV14")}function Hv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mx(n,e){const t=e.documentKey.path.toArray();return[n,Vb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yx(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Pt(t[u],r[u]),o)return o;return o=Pt(t.length,r.length),o||(o=Pt(t[t.length-2],r[r.length-2]),o||Pt(t[t.length-1],r[r.length-1]))}class k1{constructor(e){this.M=e}kt(e,t,r,o){const u=new De("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XD,{unique:!0}),m.createObjectStore("documentMutations"),_x(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=z.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),_x(e)),d=d.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XD,{unique:!0});const x=E.store("mutations"),R=C.map(V=>x.put(V));return z.waitFor(R)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:b});E.createIndex("collectionPathOverlayIndex",A,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",S,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:YS});E.createIndex("documentKeyIndex",QS),E.createIndex("collectionGroupIndex",JS)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:c}).createIndex("sequenceNumberIndex",p,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:_}).createIndex("documentKeyIndex",w,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=$b(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>z.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>z.forEach(m,E=>{bt(E.userId===u.userId);const C=Rm(this.M,E);return lx(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const E=new Ht(d),C=[0,Pi(E)];u.push(t.get(C).next(x=>x?z.resolve():t.put({targetId:0,path:Pi(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>z.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:l});const r=t.store("collectionParents"),o=new rT,u=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:Pi(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const E=new Ht(d);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,E],C)=>{const x=iu(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Uv(o),d=tx(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),E=(C=d,C.document?new He(Ht.fromString(C.document.name).popFirst(5)):C.noDocument?He.fromSegments(C.noDocument.path):C.unknownDocument?He.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const x={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>z.waitFor(o))}}function _x(n){n.createObjectStore("targetDocuments",{keyPath:s}).createIndex("documentTargetsIndex",a,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",i,{unique:!0}),n.createObjectStore("targetGlobal")}const oT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aT{constructor(e,t,r,o,u,d,m,E,C,x,R=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=x,this.ts=R,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!aT.vt())throw new Me(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new P1(this,o),this.hs=t+"main",this.M=new XS(E),this.ls=new nt(this.hs,this.ts,new k1(this.M)),this.fs=new S1(this.referenceDelegate,this.M),this.ds=new N1(this.M),this._s=new E1,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,oT);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ri(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Er(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Gv(e).get("owner").next(t=>z.resolve(this.Ps(t)))}Vs(e){return Gb(e).delete(this.clientId)}vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ar(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(E=>-1===d.indexOf(E));return z.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?z.resolve(!0):Gv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,oT);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gb(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Mm(t,Ri.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Gb(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return iT.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new A1(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return nT.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?_e:13===d?Q:12===d?U:11===d?k:void tt();var d;let m;return this.ls.runTransaction(e,o,u,E=>(m=new Mm(E,this.es?this.es.next():Ri.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Me(ce.FAILED_PRECONDITION,ke);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}$s(e){return Gv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ce.FAILED_PRECONDITION,oT)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gv(e).put("owner",t)}static vt(){return nt.vt()}Rs(e){const t=Gv(e);return t.get("owner").next(r=>this.Ps(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):z.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(ir(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,wt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ir("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ir("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gv(n){return ar(n,"owner")}function Gb(n){return ar(n,"clientMetadata")}function uT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class F1{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return He.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):ym(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new He(t)).next(r=>{let o=Rv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=Rv();return this.indexManager.getCollectionParents(e,o).next(d=>z.forEach(d,m=>{const E=(C=t,x=m.child(o),new ha(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.zs(e,E,r).next(C=>{C.forEach((x,R)=>{u=u.insert(x,R)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const E=m.key;let C=o.get(E);null==C&&(C=xn.newInvalidDocument(E),o=o.insert(E,C)),Sv(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,d)=>{Iv(t,d)||(o=o.remove(u))}),o))}}class lT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Qt(),o=Qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new lT(e,t.fromCache,r,o)}}class vx{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return z.resolve(null)}ei(e,t,r,o){return function pb(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(Et.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(cv()<=zl.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),kf(t)),this.ri(e,d,t,ub(o,-1)))})}si(e,t){let r=new cn(LD(e));return t.forEach((o,u)=>{Iv(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return cv()<=zl.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",kf(t)),this.Zs.Qs(e,t,gs.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class L1{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Qn(Pt),this.ai=new nu(u=>pc(u),xf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new F1(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Ex(n,e,t,r){return new L1(n,e,t,r)}function wx(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ye.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let E=Qt();for(const C of o){d.push(C.batchId);for(const x of C.mutations)E=E.add(x.key)}for(const C of u){m.push(C.batchId);for(const x of C.mutations)E=E.add(x.key)}return t.fi.Ks(r,E).next(C=>({di:C,removedBatchIds:d,addedBatchIds:m}))})})}),cT.apply(this,arguments)}function V1(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,E,C){const x=E.batch,R=x.keys();let V=z.resolve();return R.forEach(K=>{V=V.next(()=>C.getEntry(m,K)).next(se=>{const Pe=E.docVersions.get(K);bt(null!==Pe),se.version.compareTo(Pe)<0&&(x.applyToRemoteDocument(se,E),se.isValidDocument()&&(se.setReadTime(E.commitVersion),C.addEntry(se)))})}),V.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function bx(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function U1(n,e){const t=Ze(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,x)=>{const R=o.get(x);if(!R)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,x)));let V=R.withSequenceNumber(u.currentSequenceNumber);var K,se,Pe;e.targetMismatches.has(x)?V=V.withResumeToken(Yn.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),o=o.insert(x,V),se=V,Pe=C,(0===(K=R).resumeToken.approximateByteSize()||se.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,V))});let E=ys();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(Ix(u,d,e.documentUpdates).next(C=>{E=C})),!r.isEqual(Et.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return z.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,E)).next(()=>E)}).then(u=>(t.ui=o,u))}function Ix(n,e,t){let r=Qt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ys();return t.forEach((d,m)=>{const E=o.get(d);m.isNoDocument()&&m.version.isEqual(Et.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Oe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",E.version," Watch version:",m.version)}),u})}function B1(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Om(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,z.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new fa(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function km(n,e,t){return dT.apply(this,arguments)}function dT(){return dT=(0,ye.Z)(function*(n,e,t){const r=Ze(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Er(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),dT.apply(this,arguments)}function qb(n,e,t){const r=Ze(n);let o=Et.min(),u=Qt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,C){const x=Ze(m),R=x.ai.get(C);return void 0!==R?z.resolve(x.ui.get(R)):x.fs.getTargetData(E,C)}(r,d,ms(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(E=>{u=E})}).next(()=>r.oi.Qs(d,e,t?o:Et.min(),t?u:Qt())).next(m=>(Tx(r,FD(e),m),{documents:m,_i:u})))}function Cx(n,e){const t=Ze(n),r=Ze(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function Dx(n,e){const t=Ze(n),r=t.ci.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,ub(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Tx(t,e,o),o))}function Tx(n,e,t){let r=Et.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function hT(){return hT=(0,ye.Z)(function*(n,e,t,r){const o=Ze(n);let u=Qt(),d=ys();for(const C of t){const x=e.wi(C.metadata.name);C.document&&(u=u.add(x));const R=e.mi(C);R.setReadTime(e.gi(C.metadata.readTime)),d=d.insert(x,R)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),E=yield Om(o,(C=r,ms(mc(Ht.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Ix(C,m,d).next(x=>(m.apply(C),x)).next(x=>o.fs.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.fs.addMatchingKeys(C,u,E.targetId)).next(()=>o.fi.Gs(C,x)).next(()=>x)))}),hT.apply(this,arguments)}function $1(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,ye.Z)(function*(n,e,t=Qt()){const r=yield Om(n,ms(eT(e.bundledQuery))),o=Ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Pr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Yn.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),fT.apply(this,arguments)}class H1{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return z.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Pr(r.createTime)}),z.resolve()}getNamedQuery(e,t){return z.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:eT(r.bundledQuery),readTime:Pr(r.readTime)}),z.resolve();var r}}class G1{constructor(){this.overlays=new Qn(He.comparator),this.Ii=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),z.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const o=Vf(),u=t.length+1,d=new He(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return z.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Qn((C,x)=>C-x);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=u.get(C.largestBatchId);null===x&&(x=Vf(),u=u.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=Vf(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return z.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new qf(t,r));let u=this.Ii.get(t);void 0===u&&(u=Qt(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class pT{constructor(){this.Ti=new cn(wi.Ei),this.Ai=new cn(wi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new wi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new wi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new He(new Ht([])),r=new wi(t,e),o=new wi(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new He(new Ht([])),r=new wi(t,e),o=new wi(t,e+1);let u=Qt();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new wi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class wi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return He.comparator(e.key,t.key)||Pt(e.Ci,t.Ci)}static Ri(e,t){return Pt(e.Ci,t.Ci)||He.comparator(e.key,t.key)}}class q1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new cn(wi.Ei)}checkEmpty(e){return z.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new Hf(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new wi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return z.resolve(d)}lookupMutationBatch(e,t){return z.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return z.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return z.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new wi(t,0),o=new wi(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Pt);return t.forEach(o=>{const u=new wi(o,0),d=new wi(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),z.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const d=new wi(new He(u),0);let m=new cn(Pt);return this.Ni.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.Ci)),!0)},d),z.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return z.forEach(t.mutations,o=>{const u=new wi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new wi(t,0),o=this.Ni.firstAfterOrEqual(r);return z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return z.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class z1{constructor(e){this.$i=e,this.docs=new Qn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=ys();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():xn.newInvalidDocument(o))}),z.resolve(r)}getAllFromCollection(e,t,r){let o=ys();const u=new He(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:E}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||RD(Ev(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Bi(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Z1(this)}getSize(e){return z.resolve(this.size)}}class Z1 extends px{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class W1{constructor(e){this.persistence=e,this.Li=new nu(t=>pc(t),xf),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ui=0,this.qi=new pT,this.targetCount=0,this.Ki=Qf.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),z.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Qf(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Tn(t),z.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),z.waitFor(u).next(()=>o)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),z.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.qi.containsKey(t))}}class K1{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ri(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new W1(this),this.indexManager=new T1,this.ds=new z1(r=>this.referenceDelegate.Qi(r)),this.M=new XS(t),this._s=new H1(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new G1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new q1(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new Y1(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return z.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class Y1 extends $e{constructor(e){super(),this.currentSequenceNumber=e}}class gT{constructor(e){this.persistence=e,this.Hi=new pT,this.Ji=null}static Yi(e){return new gT(e)}get Xi(){if(this.Ji)return this.Ji;throw tt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xi,r=>{const o=He.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,Et.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return z.or([()=>z.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Ax(n,e){return`firestore_clients_${n}_${e}`}function Sx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function mT(n,e){return`firestore_targets_${n}_${e}`}class zb{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Me(o.error.code,o.error.message))),d?new zb(e,t,o.state,u):(ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Me(r.error.code,r.error.message))),u?new qv(e,r.state,o):(ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Im();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=pv(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Zb(e,u):(ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yT{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yT(t.clientId,t.onlineState):(ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _T{constructor(){this.activeTargetIds=Im()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vT{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Qn(Pt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=Ax(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new _T),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(Ax(e.persistenceKey,o));if(u){const d=Zb.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(mT(this.persistenceKey,e));if(r){const o=qv.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mT(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=Ri.A;if(null!=u)try{const m=JSON.parse(u);bt("number"==typeof m),d=m}catch(m){ir("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Ri.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new zb(this.currentUser,e,t,r),u=Sx(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=Sx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=mT(this.persistenceKey,e),u=new qv(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Zb.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return zb.tr(new Zr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return qv.tr(o,t)}pr(e){return yT.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Im();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class xx{constructor(){this.Ur=new _T,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new _T,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Q1{Kr(e){}shutdown(){}}class Mx{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const J1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class X1{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class eP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(E=>(Oe("RestConnection","Received: ",E),E),E=>{throw eu("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${J1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new ID;m.listenOnce(Yw.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Kw.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Kw.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new Me(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Kw.HTTP_ERROR:const x=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const V=function(K){const se=K.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(se)>=0?se:ce.UNKNOWN}(R.status);d(new Me(V,R.message))}else d(new Me(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Me(ce.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Ww(),d=bD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new lv({})),this.lo(m.initMessageHeaders,t,r),(0,wt.uI)()||(0,wt.b$)()||(0,wt.d)()||(0,wt.w1)()||(0,wt.Mn)()||(0,wt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Oe("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let x=!1,R=!1;const V=new X1({Jr:se=>{R?Oe("Connection","Not sending because WebChannel is closed:",se):(x||(Oe("Connection","Opening WebChannel transport."),C.open(),x=!0),Oe("Connection","WebChannel sending:",se),C.send(se))},Yr:()=>C.close()}),K=(se,Pe,Ue)=>{se.listen(Pe,Dt=>{try{Ue(Dt)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return K(C,Ef.EventType.OPEN,()=>{R||Oe("Connection","WebChannel transport opened.")}),K(C,Ef.EventType.CLOSE,()=>{R||(R=!0,Oe("Connection","WebChannel transport closed"),V.ro())}),K(C,Ef.EventType.ERROR,se=>{R||(R=!0,eu("Connection","WebChannel transport errored:",se),V.ro(new Me(ce.UNAVAILABLE,"The operation could not be completed")))}),K(C,Ef.EventType.MESSAGE,se=>{var Pe;if(!R){const Ue=se.data[0];bt(!!Ue);const Dt=Ue,Tt=Dt.error||(null===(Pe=Dt[0])||void 0===Pe?void 0:Pe.error);if(Tt){Oe("Connection","WebChannel received error:",Tt);const gt=Tt.status;let st=function(jt){const Or=or[jt];if(void 0!==Or)return bm(Or)}(gt),Mt=Tt.message;void 0===st&&(st=ce.INTERNAL,Mt="Unknown error status: "+gt+" with message "+Tt.message),R=!0,V.ro(new Me(st,Mt)),C.close()}else Oe("Connection","WebChannel received:",Ue),V.oo(Ue)}}),K(d,NS.STAT_EVENT,se=>{se.stat===uv.PROXY?Oe("Connection","Detected buffering proxy"):se.stat===uv.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.io()},0),V}}function Rx(){return"undefined"!=typeof window?window:null}function Wb(){return"undefined"!=typeof document?document:null}function zv(n){return new wc(n,!0)}class ET{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Px{constructor(e,t,r,o,u,d,m,E){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new ET(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ye.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(ir(t.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Me(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}jo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tP extends Px{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function YD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:tt(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(bt(void 0===C||"string"==typeof C),Yn.fromBase64String(C||"")):(bt(void 0===C||C instanceof Uint8Array),Yn.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const C=void 0===E.code?ce.UNKNOWN:bm(E.code);return new Me(C,E.message||"")}(d);t=new GD(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ru(n,r.document.name),u=Pr(r.document.updateTime),d=new vr({mapValue:{fields:r.document.fields}}),m=xn.newFoundDocument(o,u,d);t=new Pv(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ru(n,r.document),u=r.readTime?Pr(r.readTime):Et.min(),d=xn.newNoDocument(o,u);t=new Pv([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ru(n,r.document);t=new Pv([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new BD(r.count||0);t=new HD(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Et.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?Pr(u.readTime):Et.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Am(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=Mf(m)?{documents:Nb(o,m)}:{query:Ob(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Dm(o,u.resumeToken):u.snapshotVersion.compareTo(Et.min())>0&&(d.readTime=Kd(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function Fv(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Am(this.M),t.removeTarget=e,this.Lo(t)}}class nP extends Px{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Pb(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let u=Pr(r.updateTime?r.updateTime:o);return u.isEqual(Et.min())&&(u=Pr(o)),new Ib(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.tu(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Am(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Yd(this.M,r))};this.Lo(t)}}class rP extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ce.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ce.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class iP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ir(t),this.uu=!1):Oe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class sP{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var E;th(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ye.Z)(function*(C){const x=Ze(C);x.wu.add(4),yield Fm(x),x.yu.set("Unknown"),x.wu.delete(4),yield Zv(x)}),function(C){return E.apply(this,arguments)})(d))}))}),this.yu=new iP(r,o)}}function Zv(n){return wT.apply(this,arguments)}function wT(){return wT=(0,ye.Z)(function*(n){if(th(n))for(const e of n.mu)yield e(!0)}),wT.apply(this,arguments)}function Fm(n){return bT.apply(this,arguments)}function bT(){return bT=(0,ye.Z)(function*(n){for(const e of n.mu)yield e(!1)}),bT.apply(this,arguments)}function Kb(n,e){const t=Ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),DT(t)?CT(t):Vm(t).Mo()&&IT(t,e))}function Wv(n,e){const t=Ze(n),r=Vm(t);t._u.delete(e),r.Mo()&&Nx(t,e),0===t._u.size&&(r.Mo()?r.$o():th(t)&&t.yu.set("Unknown"))}function IT(n,e){n.pu.Z(e.targetId),Vm(n).Ho(e)}function Nx(n,e){n.pu.Z(e),Vm(n).Jo(e)}function CT(n){n.pu=new zD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Vm(n).start(),n.yu.au()}function DT(n){return th(n)&&!Vm(n).ko()&&n._u.size>0}function th(n){return 0===Ze(n).wu.size}function Ox(n){n.pu=void 0}function oP(n){return TT.apply(this,arguments)}function TT(){return TT=(0,ye.Z)(function*(n){n._u.forEach((e,t)=>{IT(n,e)})}),TT.apply(this,arguments)}function aP(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,ye.Z)(function*(n,e){Ox(n),DT(n)?(n.yu.lu(e),CT(n)):n.yu.set("Unknown")}),AT.apply(this,arguments)}function uP(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,ye.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof GD&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yb(n,r)}else if(e instanceof Pv?n.pu.ut(e):e instanceof HD?n.pu._t(e):n.pu.ht(e),!t.isEqual(Et.min()))try{const r=yield bx(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(E);C&&o._u.set(E,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const E=o._u.get(m);if(!E)return;o._u.set(m,E.withResumeToken(Yn.EMPTY_BYTE_STRING,E.snapshotVersion)),Nx(o,m);const C=new fa(E.target,m,1,E.sequenceNumber);IT(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield Yb(n,r)}var r}),ST.apply(this,arguments)}function Yb(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,ye.Z)(function*(n,e,t){if(!Er(e))throw e;n.wu.add(1),yield Fm(n),n.yu.set("Offline"),t||(t=()=>bx(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Zv(n)}))}),xT.apply(this,arguments)}function kx(n,e){return e().catch(t=>Yb(n,t,e))}function Lm(n){return MT.apply(this,arguments)}function MT(){return MT=(0,ye.Z)(function*(n){const e=Ze(n),t=nh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;lP(e);)try{const o=yield B1(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,cP(e,o)}catch(o){yield Yb(e,o)}Fx(e)&&Lx(e)}),MT.apply(this,arguments)}function lP(n){return th(n)&&n.du.length<10}function cP(n,e){n.du.push(e);const t=nh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function Fx(n){return th(n)&&!nh(n).ko()&&n.du.length>0}function Lx(n){nh(n).start()}function dP(n){return RT.apply(this,arguments)}function RT(){return RT=(0,ye.Z)(function*(n){nh(n).nu()}),RT.apply(this,arguments)}function hP(n){return PT.apply(this,arguments)}function PT(){return PT=(0,ye.Z)(function*(n){const e=nh(n);for(const t of n.du)e.Zo(t.mutations)}),PT.apply(this,arguments)}function fP(n,e,t){return NT.apply(this,arguments)}function NT(){return NT=(0,ye.Z)(function*(n,e,t){const r=n.du.shift(),o=Gf.from(r,e,t);yield kx(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Lm(n)}),NT.apply(this,arguments)}function pP(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ye.Z)(function*(n,e){var t;e&&nh(n).Xo&&(yield(t=(0,ye.Z)(function*(r,o){if(wm(u=o.code)&&u!==ce.ABORTED){const d=r.du.shift();nh(r).Fo(),yield kx(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Lm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Fx(n)&&Lx(n)}),OT.apply(this,arguments)}function Vx(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,ye.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=th(t);t.wu.add(3),yield Fm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Zv(t)}),kT.apply(this,arguments)}function FT(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,ye.Z)(function*(n,e){const t=Ze(n);e?(t.wu.delete(2),yield Zv(t)):e||(t.wu.add(2),yield Fm(t),t.yu.set("Unknown"))}),LT.apply(this,arguments)}function Vm(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ze(e);return o.iu(),new tP(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:oP.bind(null,n),eo:aP.bind(null,n),zo:uP.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Fo(),DT(n)?CT(n):n.yu.set("Unknown")):(yield n.Iu.stop(),Ox(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function nh(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ze(e);return o.iu(),new nP(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:dP.bind(null,n),eo:pP.bind(null,n),eu:hP.bind(null,n),tu:fP.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Tu.Fo(),yield Lm(n)):(yield n.Tu.stop(),n.du.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class VT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new VT(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Um(n,e){if(ir("AsyncQueue",`${e}: ${n}`),Er(n))return new Me(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Bm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Rv(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new Bm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Bm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ux{constructor(){this.Eu=new Qn(He.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):tt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class jm{constructor(e,t,r,o,u,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new jm(e,t,Bm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class gP{constructor(){this.Ru=void 0,this.listeners=[]}}class mP{constructor(){this.queries=new nu(e=>mb(e),zd),this.onlineState="Unknown",this.bu=new Set}}function UT(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new gP),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=Um(d,`Initialization of query '${kf(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&HT(t)}),BT.apply(this,arguments)}function jT(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),$T.apply(this,arguments)}function yP(n,e){const t=Ze(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&HT(t)}function _P(n,e,t){const r=Ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function HT(n){n.bu.forEach(e=>{e.next()})}class GT{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new jm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=jm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class vP{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Bx{constructor(e){this.M=e}wi(e){return ru(this.M,e)}mi(e){return e.metadata.exists?Rb(this.M,e.document,!1):xn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Pr(e)}}class EP{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Ht.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Bx(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Qt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function j1(n,e,t,r){return hT.apply(this,arguments)}(e.localStore,new Bx(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield $1(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function jx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $x{constructor(e){this.key=e}}class Hx{constructor(e){this.key=e}}class Gx{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Qt(),this.mutatedKeys=Qt(),this.Gu=LD(e),this.Qu=new Bm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Ux,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,R)=>{const V=o.get(x),K=Iv(this.query,R)?R:null,se=!!V&&this.mutatedKeys.has(V.key),Pe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Ue=!1;V&&K?V.data.isEqual(K.data)?se!==Pe&&(r.track({type:3,doc:K}),Ue=!0):this.Hu(V,K)||(r.track({type:2,doc:K}),Ue=!0,(E&&this.Gu(K,E)>0||C&&this.Gu(K,C)<0)&&(m=!0)):!V&&K?(r.track({type:0,doc:K}),Ue=!0):V&&!K&&(r.track({type:1,doc:V}),Ue=!0,(E||C)&&(m=!0)),Ue&&(K?(d=d.add(K),u=Pe?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const x="F"===this.query.limitType?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,x)=>function(R,V){const K=se=>{switch(se){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return K(R)-K(V)}(C.type,x.type)||this.Gu(C.doc,x.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,E=m!==this.qu;return this.qu=m,0!==u.length||E?{snapshot:new jm(this.query,e.Qu,o,u,e.mutatedKeys,0===m,E,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ux,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Hx(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new $x(r))}),t}ta(e){this.Uu=e._i,this.Ku=Qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return jm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class wP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bP{constructor(e){this.key=e,this.na=!1}}class IP{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new nu(m=>mb(m),zd),this.ra=new Map,this.oa=new Set,this.ua=new Qn(He.comparator),this.aa=new Map,this.ca=new pT,this.ha={},this.la=new Map,this.fa=Qf.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function CP(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,ye.Z)(function*(n,e){const t=pA(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield Om(t.localStore,ms(e));t.isPrimaryClient&&Kb(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield zT(t,e,r,"current"===m)}return o}),qT.apply(this,arguments)}function zT(n,e,t,r){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ye.Z)(function*(n,e,t,r){n._a=(x,R,V)=>{return(K=(0,ye.Z)(function*(se,Pe,Ue,Dt){let Tt=Pe.view.Wu(Ue);Tt.ii&&(Tt=yield qb(se.localStore,Pe.query,!1).then(({documents:Mt})=>Pe.view.Wu(Mt,Tt)));const gt=Dt&&Dt.targetChanges.get(Pe.targetId),st=Pe.view.applyChanges(Tt,se.isPrimaryClient,gt);return rA(se,Pe.targetId,st.Xu),st.snapshot}),function(se,Pe,Ue,Dt){return K.apply(this,arguments)})(n,x,R,V);var K};const o=yield qb(n.localStore,e,!0),u=new Gx(e,o._i),d=u.Wu(o.documents),m=Cm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,m);rA(n,t,E.Xu);const C=new wP(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),E.snapshot}),ZT.apply(this,arguments)}function DP(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,ye.Z)(function*(n,e){const t=Ze(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!zd(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield km(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Wv(t.remoteStore,r.targetId),$m(t,r.targetId)}).catch(Jf))):($m(t,r.targetId),yield km(t.localStore,r.targetId,!0))}),WT.apply(this,arguments)}function KT(){return KT=(0,ye.Z)(function*(n,e,t){const r=gA(n);try{const o=yield function(u,d){const m=Ze(u),E=An.now(),C=d.reduce((R,V)=>R.add(V.key),Qt());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>m.fi.Ks(R,C).next(V=>{x=V;const K=[];for(const se of d){const Pe=$S(se,x.get(se.key));null!=Pe&&K.push(new Ec(se.key,Pe,pm(Pe.value.mapValue),sr.exists(!0)))}return m.Bs.addMutationBatch(R,E,K,d)})).then(R=>(R.applyToLocalDocumentSet(x),{batchId:R.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let E=u.ha[u.currentUser.toKey()];E||(E=new Qn(Pt)),E=E.insert(d,m),u.ha[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Ic(r,o.changes),yield Lm(r.remoteStore)}catch(o){const u=Um(o,"Failed to persist write");t.reject(u)}}),KT.apply(this,arguments)}function qx(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,ye.Z)(function*(n,e){const t=Ze(n);try{const r=yield U1(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?bt(d.na):o.removedDocuments.size>0&&(bt(d.na),d.na=!1))}),yield Ic(t,r,e)}catch(r){yield Jf(r)}}),YT.apply(this,arguments)}function zx(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=Ze(u);m.onlineState=d;let E=!1;m.queries.forEach((C,x)=>{for(const R of x.listeners)R.Pu(d)&&(E=!0)}),E&&HT(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function AP(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,ye.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new Qn(He.comparator);d=d.insert(u,xn.newNoDocument(u,Et.min()));const m=Qt().add(u),E=new Uf(Et.min(),new Map,new cn(Pt),d,m);yield qx(r,E),r.ua=r.ua.remove(u),r.aa.delete(e),iA(r)}else yield km(r.localStore,e,!1).then(()=>$m(r,e,t)).catch(Jf)}),QT.apply(this,arguments)}function SP(n,e){return JT.apply(this,arguments)}function JT(){return JT=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const o=yield V1(t.localStore,e);nA(t,r,null),tA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ic(t,o)}catch(o){yield Jf(o)}}),JT.apply(this,arguments)}function xP(n,e,t){return XT.apply(this,arguments)}function XT(){return XT=(0,ye.Z)(function*(n,e,t){const r=Ze(n);try{const o=yield function(u,d){const m=Ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.Bs.lookupMutationBatch(E,d).next(x=>(bt(null!==x),C=x.keys(),m.Bs.removeMutationBatch(E,x))).next(()=>m.Bs.performConsistencyCheck(E)).next(()=>m.fi.Ks(E,C))})}(r.localStore,e);nA(r,e,t),tA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ic(r,o)}catch(o){yield Jf(o)}}),XT.apply(this,arguments)}function eA(){return eA=(0,ye.Z)(function*(n,e){const t=Ze(n);th(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Um(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),eA.apply(this,arguments)}function tA(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function nA(n,e,t){const r=Ze(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function $m(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||Zx(n,r)})}function Zx(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Wv(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),iA(n))}function rA(n,e,t){for(const r of t)r instanceof $x?(n.ca.addReference(r.key,e),RP(n,r)):r instanceof Hx?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||Zx(n,r.key)):tt()}function RP(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oa.add(r),iA(n))}function iA(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new He(Ht.fromString(e)),r=n.fa.next();n.aa.set(r,new bP(t)),n.ua=n.ua.insert(t,r),Kb(n.remoteStore,new fa(ms(mc(t.path)),r,2,Ri.A))}}function Ic(n,e,t){return sA.apply(this,arguments)}function sA(){return sA=(0,ye.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,E)=>{d.push(r._a(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=lT.Ys(E.targetId,C);u.push(x)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,ye.Z)(function*(E,C){const x=Ze(E);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>z.forEach(C,V=>z.forEach(V.Hs,K=>x.persistence.referenceDelegate.addReference(R,V.targetId,K)).next(()=>z.forEach(V.Js,K=>x.persistence.referenceDelegate.removeReference(R,V.targetId,K)))))}catch(R){if(!Er(R))throw R;Oe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of C){const V=R.targetId;if(!R.fromCache){const K=x.ui.get(V),Pe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);x.ui=x.ui.insert(V,Pe)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),sA.apply(this,arguments)}function PP(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield wx(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new Me(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ic(t,r.di)}var o}),oA.apply(this,arguments)}function NP(n,e){const t=Ze(n),r=t.aa.get(e);if(r&&r.na)return Qt().add(r.key);{let o=Qt();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function OP(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,ye.Z)(function*(n,e){const t=Ze(n),r=yield qb(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&rA(t,e.targetId,o.Xu),o}),aA.apply(this,arguments)}function kP(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*(n,e){const t=Ze(n);return Dx(t.localStore,e).then(r=>Ic(t,r))}),uA.apply(this,arguments)}function FP(n,e,t,r){return lA.apply(this,arguments)}function lA(){return lA=(0,ye.Z)(function*(n,e,t,r){const o=Ze(n),u=yield function(d,m){const E=Ze(d),C=Ze(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.fn(x,m).next(R=>R?E.fi.Ks(x,R):z.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Lm(o.remoteStore):"acknowledged"===t||"rejected"===t?(nA(o,e,r||null),tA(o,e),m=e,Ze(Ze(o.localStore).Bs)._n(m)):tt(),yield Ic(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),lA.apply(this,arguments)}function cA(){return cA=(0,ye.Z)(function*(n,e){const t=Ze(n);if(pA(t),gA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Wx(t,r.toArray());t.da=!0,yield FT(t.remoteStore,!0);for(const u of o)Kb(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>($m(t,d),km(t.localStore,d,!0))),Wv(t.remoteStore,d)}),yield o,yield Wx(t,r),function(u){const d=Ze(u);d.aa.forEach((m,E)=>{Wv(d.remoteStore,E)}),d.ca.Si(),d.aa=new Map,d.ua=new Qn(He.comparator)}(t),t.da=!1,yield FT(t.remoteStore,!1)}}),cA.apply(this,arguments)}function Wx(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,ye.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[];for(const d of e){let m;const E=r.ra.get(d);if(E&&0!==E.length){m=yield Om(r.localStore,ms(E[0]));for(const C of E){const x=r.ia.get(C),R=yield OP(r,x);R.snapshot&&u.push(R.snapshot)}}else{const C=yield Cx(r.localStore,d);m=yield Om(r.localStore,C),yield zT(r,Kx(C),d,!1)}o.push(m)}return r.sa.zo(u),o}),dA.apply(this,arguments)}function Kx(n){return mm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function VP(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Fs()}function UP(n,e,t,r){return hA.apply(this,arguments)}function hA(){return hA=(0,ye.Z)(function*(n,e,t,r){const o=Ze(n);if(o.da)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Dx(o.localStore,FD(u[0])),m=Uf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ic(o,d,m);break}case"rejected":yield km(o.localStore,e,!0),$m(o,e,r);break;default:tt()}}),hA.apply(this,arguments)}function BP(n,e,t){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(n,e,t){const r=pA(n);if(r.da){for(const o of e){if(r.ra.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield Cx(r.localStore,o),d=yield Om(r.localStore,u);yield zT(r,Kx(u),d.targetId,!1),Kb(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield km(r.localStore,o,!1).then(()=>{Wv(r.remoteStore,o),$m(r,o)}).catch(Jf))}}),fA.apply(this,arguments)}function pA(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AP.bind(null,e),e.sa.zo=yP.bind(null,e.eventManager),e.sa.wa=_P.bind(null,e.eventManager),e}function gA(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,e),e}class Yx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=zv(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Ex(this.persistence,new vx,e.initialUser,this.M)}ya(e){return new K1(gT.Yi,this.M)}ga(e){return new xx}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qx extends Yx{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield gA(r.Ta.syncEngine),yield Lm(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Ex(this.persistence,new vx,e.initialUser,this.M)}pa(e){return new M1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=uT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new aT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Rx(),Wb(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new xx}}class $P extends Qx{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof vT&&(r.sharedClientState.syncEngine={$r:FP.bind(null,o),Br:UP.bind(null,o),Lr:BP.bind(null,o),Fs:VP.bind(null,o),Fr:kP.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ye.Z)(function*(d){yield function LP(n,e){return cA.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=Rx();if(!vT.vt(t))throw new Me(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=uT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class mA{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>zx(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=PP.bind(null,r.syncEngine),yield FT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mP}createDatastore(e){const t=zv(e.databaseInfo.databaseId),r=new eP(e.databaseInfo);return new rP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>zx(this.syncEngine,m,0),d=Mx.vt()?new Mx:new Q1,new sP(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,E,C){const x=new IP(r,o,u,d,m,E);return C&&(x.da=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ze(t);Oe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Fm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Jx(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Qb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HP{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new yr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new vP(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ye.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class GP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const m=Ze(u),E=Am(m.M)+"/documents",C={documents:d.map(K=>ol(m.M,K))},x=yield m._o("BatchGetDocuments",E,C),R=new Map;x.forEach(K=>{const se=function KD(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=ru(t,r.found.name),u=Pr(r.found.updateTime),d=new vr({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=ru(t,r.missing),u=Pr(r.readTime);return xn.newNoDocument(o,u)}(n,e):tt()}(m.M,K);R.set(se.key.toString(),se)});const V=[];return d.forEach(K=>{const se=R.get(K.toString());bt(!!se),V.push(se)}),V}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=He.fromPath(o);e.mutations.push(new Em(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=Ze(o),m=Am(d.M)+"/documents",E={writes:u.map(C=>Yd(d.M,C))};yield d.co("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Me(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qP{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new ET(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ye.Z)(function*(){const t=new GP(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!$d(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!wm(t)}return!1}}class zP{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Zr.UNAUTHENTICATED,this.clientId=eb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Um(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Xx(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield wx(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yA.apply(this,arguments)}function eM(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vA(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Vx(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Vx(e.remoteStore,u)),n.onlineComponents=e}),_A.apply(this,arguments)}function vA(n){return EA.apply(this,arguments)}function EA(){return EA=(0,ye.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield Xx(n,new Yx)),n.offlineComponents}),EA.apply(this,arguments)}function Jb(n){return wA.apply(this,arguments)}function wA(){return wA=(0,ye.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield eM(n,new mA)),n.onlineComponents}),wA.apply(this,arguments)}function tM(n){return vA(n).then(e=>e.persistence)}function bA(n){return vA(n).then(e=>e.localStore)}function nM(n){return Jb(n).then(e=>e.remoteStore)}function IA(n){return Jb(n).then(e=>e.syncEngine)}function Hm(n){return CA.apply(this,arguments)}function CA(){return CA=(0,ye.Z)(function*(n){const e=yield Jb(n),t=e.eventManager;return t.onListen=CP.bind(null,e.syncEngine),t.onUnlisten=DP.bind(null,e.syncEngine),t}),CA.apply(this,arguments)}function rM(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,E){const C=new Qb({next:R=>{u.enqueueAndForget(()=>jT(o,x));const V=R.docs.has(d);!V&&R.fromCache?E.reject(new Me(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&R.fromCache&&m&&"server"===m.source?E.reject(new Me(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),x=new GT(mc(d.path),C,{includeMetadataChanges:!0,ku:!0});return UT(o,x)}(yield Hm(n),n.asyncQueue,e,t,r)})),r.promise}function iM(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,E){const C=new Qb({next:R=>{u.enqueueAndForget(()=>jT(o,x)),R.fromCache&&"server"===m.source?E.reject(new Me(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),x=new GT(d,C,{includeMetadataChanges:!0,ku:!0});return UT(o,x)}(yield Hm(n),n.asyncQueue,e,t,r)})),r.promise}const sM=new Map;function DA(n,e,t){if(!t)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oM(n,e,t,r){if(!0===e&&!0===r)throw new Me(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aM(n){if(!He.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uM(n){if(He.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xb(n);throw new Me(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lM(n,e){if(e<=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class cM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cM({}),this._settingsFrozen=!1,e instanceof wo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Me(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new DD;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new SD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sM.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),sM.delete(e),t.terminate())}(this),Promise.resolve()}}class On{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new On(this.firestore,e,this._key)}}class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class al extends Qi{constructor(e,t,r){super(e,t,mc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new On(this.firestore,null,new He(e))}withConverter(e){return new al(this.firestore,e,this._path)}}function dM(n,e,...t){if(n=(0,wt.m9)(n),DA("collection","path",e),n instanceof Kv){const r=Ht.fromString(e,...t);return uM(r),new al(n,null,r)}{if(!(n instanceof On||n instanceof al))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ht.fromString(e,...t));return uM(r),new al(n.firestore,null,r)}}function eI(n,e,...t){if(n=(0,wt.m9)(n),1===arguments.length&&(e=eb.R()),DA("doc","path",e),n instanceof Kv){const r=Ht.fromString(e,...t);return aM(r),new On(n,null,new He(r))}{if(!(n instanceof On||n instanceof al))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ht.fromString(e,...t));return aM(r),new On(n.firestore,n instanceof al?n.converter:null,new He(r))}}function hM(n,e){return n=(0,wt.m9)(n),e=(0,wt.m9)(e),(n instanceof On||n instanceof al)&&(e instanceof On||e instanceof al)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function fM(n,e){return n=(0,wt.m9)(n),e=(0,wt.m9)(e),n instanceof Qi&&e instanceof Qi&&n.firestore===e.firestore&&zd(n._query,e._query)&&n.converter===e.converter}class rN{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new ET(this,"async_queue_retry"),this.Qa=()=>{const t=Wb();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Wb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Wb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new yr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ye.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Er(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,ir("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=VT.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&tt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function TA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class iN{constructor(){this._progressObserver={},this._taskCompletionResolver=new yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends Kv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new rN,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pM(this),this._firestoreClient.terminate()}}function Nr(n){return n._firestoreClient||pM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ib(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new zP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function gM(n,e,t){const r=new yr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield Xx(n,t),yield eM(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function mM(n){if(n._initialized||n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul(Yn.fromBase64String(e))}catch(t){throw new Me(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ul(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ep{constructor(e){this._methodName=e}}class tI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const pN=/^__.*__$/;class gN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ec(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lf(e,this.data,t,this.fieldTransforms)}}class yM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ec(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _M(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class nI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new nI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return sI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(_M(this.ec)&&pN.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class mN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||zv(e)}lc(e,t,r,o=!1){return new nI({ec:e,methodName:t,hc:r,path:_r.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function tp(n){const e=n._freezeSettings(),t=zv(n._databaseId);return new mN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rI(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);MA("Data must be an object, but it was:",d,r);const m=wM(r,d);let E,C;if(u.merge)E=new Cf(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const R of u.mergeFields){const V=RA(e,R,t);if(!d.contains(V))throw new Me(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);IM(x,V)||x.push(V)}E=new Cf(x),C=d.fieldTransforms.filter(R=>E.covers(R.field))}else E=null,C=d.fieldTransforms;return new gN(new vr(m),E,C)}class Yv extends ep{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yv}}function vM(n,e,t){return new nI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class AA extends ep{_toFieldTransform(e){return new Ff(e.path,new Ei)}isEqual(e){return e instanceof AA}}class yN extends ep{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=vM(this,e,!0),r=this.fc.map(u=>np(u,t)),o=new _c(r);return new Ff(e.path,o)}isEqual(e){return this===e}}class _N extends ep{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=vM(this,e,!0),r=this.fc.map(u=>np(u,t)),o=new vc(r);return new Ff(e.path,o)}isEqual(e){return this===e}}class vN extends ep{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new sl(e.M,vb(e.M,this.dc));return new Ff(e.path,t)}isEqual(e){return this===e}}function SA(n,e,t,r){const o=n.lc(1,e,t);MA("Data must be an object, but it was:",o,r);const u=[],d=vr.empty();el(r,(E,C)=>{const x=iI(e,E,t);C=(0,wt.m9)(C);const R=o.oc(x);if(C instanceof Yv)u.push(x);else{const V=np(C,R);null!=V&&(u.push(x),d.set(x,V))}});const m=new Cf(u);return new yM(d,m,o.fieldTransforms)}function xA(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[RA(e,r,t)],E=[o];if(u.length%2!=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(RA(e,u[V])),E.push(u[V+1]);const C=[],x=vr.empty();for(let V=m.length-1;V>=0;--V)if(!IM(C,m[V])){const K=m[V];let se=E[V];se=(0,wt.m9)(se);const Pe=d.oc(K);if(se instanceof Yv)C.push(K);else{const Ue=np(se,Pe);null!=Ue&&(C.push(K),x.set(K,Ue))}}const R=new Cf(C);return new yM(x,R,d.fieldTransforms)}function EM(n,e,t,r=!1){return np(t,n.lc(r?4:3,e))}function np(n,e){if(bM(n=(0,wt.m9)(n)))return MA("Unsupported field value:",e,n),wM(n,e);if(n instanceof ep)return function(t,r){if(!_M(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=np(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,wt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vb(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=An.fromDate(t);return{timestampValue:Kd(r.M,o)}}if(t instanceof An){const o=new An(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kd(r.M,o)}}if(t instanceof tI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ul)return{bytesValue:Dm(r.M,t._byteString)};if(t instanceof On){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jf(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${Xb(t)}`)}(n,e)}function wM(n,e){const t={};return dv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(n,(r,o)=>{const u=np(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function bM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof An||n instanceof tI||n instanceof ul||n instanceof On||n instanceof ep)}function MA(n,e,t){if(!bM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Xb(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function RA(n,e,t){if((e=(0,wt.m9)(e))instanceof Cc)return e._internalPath;if("string"==typeof e)return iI(n,e);throw sI("Field path arguments must be of type string or ",n,!1,void 0,t)}const EN=new RegExp("[~\\*/\\[\\]]");function iI(n,e,t){if(e.search(EN)>=0)throw sI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cc(...e.split("."))._internalPath}catch(r){throw sI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new Me(ce.INVALID_ARGUMENT,m+n+E)}function IM(n,e){return n.some(t=>t.isEqual(e))}class Qv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wN extends Qv{data(){return super.data()}}function oI(n,e){return"string"==typeof e?iI(n,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}class rp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dc extends Qv{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Jv extends Dc{data(e={}){return super.data(e)}}class rh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Jv(this._firestore,this._userDataWriter,r.key,r,new rp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Jv(r._firestore,r._userDataWriter,d.doc.key,d.doc,new rp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Jv(r._firestore,r._userDataWriter,d.doc.key,d.doc,new rp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:bN(d.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function CM(n,e){return n instanceof Dc&&e instanceof Dc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rh&&e instanceof rh&&n._firestore===e._firestore&&fM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function DM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xv{}function ih(n,...e){for(const t of e)n=t._apply(n);return n}class IN extends Xv{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=tp(e.firestore),r=function(o,u,d,m,E,C,x){let R;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){RM(x,C);const K=[];for(const se of x)K.push(MM(m,o,se));R={arrayValue:{values:K}}}else R=MM(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||RM(x,C),R=EM(d,"where",x,"in"===C||"not-in"===C);const V=Wr.create(E,C,R);return function(K,se){if(se.S()){const Ue=Of(K);if(null!==Ue&&!Ue.isEqual(se.field))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${se.field.toString()}'`);const Dt=gb(K);null!==Dt&&PM(0,se.field,Dt)}const Pe=function(Ue,Dt){for(const Tt of Ue.filters)if(Dt.indexOf(Tt.op)>=0)return Tt.op;return null}(K,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(se.op));if(null!==Pe)throw new Me(ce.INVALID_ARGUMENT,Pe===se.op?`Invalid query. You cannot use more than one '${se.op.toString()}' filter.`:`Invalid query. You cannot use '${se.op.toString()}' filters with '${Pe.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Qi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new ha(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class DN extends Xv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Pf(o,u);return function(m,E){if(null===gb(m)){const C=Of(m);null!==C&&PM(0,C,E.field)}}(r,d),d}(e._query,this._c,this.gc);return new Qi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ha(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class TM extends Xv{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Qi(e.firestore,e.converter,kD(e._query,this.yc,this.Ic))}}class AM extends Xv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=xM(e,this.type,this.Tc,this.Ec);return new Qi(e.firestore,e.converter,(o=t,new ha((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class SM extends Xv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=xM(e,this.type,this.Tc,this.Ec);return new Qi(e.firestore,e.converter,(o=t,new ha((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function xM(n,e,t,r){if(t[0]=(0,wt.m9)(t[0]),t[0]instanceof Qv)return function(o,u,d,m,E){if(!m)throw new Me(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const x of yc(o))if(x.field.isKeyField())C.push(dc(u,m.key));else{const R=m.data.field(x.field);if(fv(R))throw new Me(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const V=x.field.canonicalString();throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(R)}return new gc(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=tp(n.firestore);return function(u,d,m,E,C,x){const R=u.explicitOrderBy;if(C.length>R.length)throw new Me(ce.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let K=0;K<C.length;K++){const se=C[K];if(R[K].field.isKeyField()){if("string"!=typeof se)throw new Me(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof se}`);if(!ym(u)&&-1!==se.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${se}' contains a slash.`);const Pe=u.path.child(Ht.fromString(se));if(!He.isDocumentKey(Pe))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Pe}' is not because it contains an odd number of segments.`);const Ue=new He(Pe);V.push(dc(d,Ue))}else{const Pe=EM(m,E,se);V.push(Pe)}}return new gc(V,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function MM(n,e,t){if("string"==typeof(t=(0,wt.m9)(t))){if(""===t)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ym(e)&&-1!==t.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ht.fromString(t));if(!He.isDocumentKey(r))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dc(n,new He(r))}if(t instanceof On)return dc(n,t._key);throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xb(t)}.`)}function RM(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function PM(n,e,t){if(!t.isEqual(e))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const NN={maxAttempts:5};class PA{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return el(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new tI(Sn(e.latitude),Sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Df(e));default:return null}}convertTimestamp(e){const t=ca(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ht.fromString(e);bt(Fb(r));const o=new wo(r.get(1),r.get(3)),u=new He(r.popFirst(5));return o.isEqual(t)||ir(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function aI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ON extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,t)}}class NM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tp(e)}set(e,t,r){this._verifyNotCommitted();const o=sh(e,this._firestore),u=aI(o.converter,t,r),d=rI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,sr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=sh(e,this._firestore);let d;return d="string"==typeof(t=(0,wt.m9)(t))||t instanceof Cc?xA(this._dataReader,"WriteBatch.update",u._key,t,r,o):SA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sh(e,this._firestore);return this._mutations=this._mutations.concat(new Wd(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sh(n,e){if((n=(0,wt.m9)(n)).firestore!==e)throw new Me(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ip extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,t)}}function OM(n,e,t){n=Wt(n,On);const r=Wt(n.firestore,Bn),o=aI(n.converter,e,t);return Gm(r,[rI(tp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,sr.none())])}function kM(n,e,t,...r){n=Wt(n,On);const o=Wt(n.firestore,Bn),u=tp(o);let d;return d="string"==typeof(e=(0,wt.m9)(e))||e instanceof Cc?xA(u,"updateDoc",n._key,e,t,r):SA(u,"updateDoc",n._key,e),Gm(o,[d.toMutation(n._key,sr.exists(!0))])}function FM(n,...e){var t,r,o;n=(0,wt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||TA(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(TA(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let E,C,x;if(n instanceof On)C=Wt(n.firestore,Bn),x=mc(n._key.path),E={next:R=>{e[d]&&e[d](NA(C,n,R))},error:e[d+1],complete:e[d+2]};else{const R=Wt(n,Qi);C=Wt(R.firestore,Bn),x=R._query;const V=new ip(C);E={next:K=>{e[d]&&e[d](new rh(C,V,R,K))},error:e[d+1],complete:e[d+2]},DM(n._query)}return function(R,V,K,se){const Pe=new Qb(se),Ue=new GT(V,Pe,K);return R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return UT(yield Hm(R),Ue)})),()=>{Pe.Aa(),R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return jT(yield Hm(R),Ue)}))}}(Nr(C),x,m,E)}function Gm(n,e){return function(t,r){const o=new yr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function TP(n,e,t){return KT.apply(this,arguments)}(yield IA(t),r,o)})),o.promise}(Nr(n),e)}function NA(n,e,t){const r=t.docs.get(e._key),o=new ip(n);return new Dc(n,o,e._key,r,new rp(t.hasPendingWrites,t.fromCache),e.converter)}class GN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tp(e)}get(e){const t=sh(e,this._firestore),r=new ON(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new Qv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Qv(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=sh(e,this._firestore),u=aI(o.converter,t,r),d=rI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=sh(e,this._firestore);let d;return d="string"==typeof(t=(0,wt.m9)(t))||t instanceof Cc?xA(this._dataReader,"Transaction.update",u._key,t,r,o):SA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=sh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sh(e,this._firestore),r=new ip(this._firestore);return super.get(e).then(o=>new Dc(this._firestore,r,t._key,o._document,new rp(!1,!1),t.converter))}}function OA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VM(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function UM(){if(!function hv(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Bd=ds.SDK_VERSION,(0,ds._registerComponent)(new Vh.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Bn(o,new AD(t.getProvider("auth-internal")),new la(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ds.registerVersion)(Qw,"3.4.9",n),(0,ds.registerVersion)(Qw,"3.4.9","esm2017")}();class e0{constructor(e){this._delegate=e}static fromBase64String(e){return UM(),new e0(ul.fromBase64String(e))}static fromUint8Array(e){return VM(),new e0(ul.fromUint8Array(e))}toBase64(){return UM(),this._delegate.toBase64()}toUint8Array(){return VM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kA(n){return function XN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class eO{enableIndexedDbPersistence(e,t){return function oN(n,e){mM(n=Wt(n,Bn));const t=Nr(n),r=n._freezeSettings(),o=new mA;return gM(t,o,new Qx(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function aN(n){mM(n=Wt(n,Bn));const e=Nr(n),t=n._freezeSettings(),r=new mA;return gM(e,r,new $P(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uN(n){if(n._initialized&&!n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!nt.vt())return Promise.resolve();const o=r+"main";yield nt.delete(o)}),function(r){return t.apply(this,arguments)})(uT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class BM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&eu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function tN(n,e,t,r={}){var o;const u=(n=Wt(n,Kv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&eu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Zr.MOCK_USER;else{d=(0,wt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Me(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Zr(E)}n._authCredentials=new TD(new Xw(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function cN(n){return function ZP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield tM(n),t=yield nM(n);return e.setNetworkEnabled(!0),function(r){const o=Ze(r);return o.wu.delete(0),Zv(o)}(t)}))}(Nr(n=Wt(n,Bn)))}(this._delegate)}disableNetwork(){return function dN(n){return function WP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield tM(n),t=yield nM(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=Ze(o);u.wu.add(0),yield Fm(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Nr(n=Wt(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,oM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lN(n){return function(e){const t=new yr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function MP(n,e){return eA.apply(this,arguments)}(yield IA(e),t)})),t.promise}(Nr(n=Wt(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function HN(n,e){return function QP(n,e){const t=new Qb(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Hm(n),o=t,Ze(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Hm(n),o=t,void Ze(r).bu.delete(o);var r,o}))}}(Nr(n=Wt(n,Bn)),TA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qm(this,dM(this._delegate,e))}catch(t){throw _s(t,"collection()","Firestore.collection()")}}doc(e){try{return new pa(this,eI(this._delegate,e))}catch(t){throw _s(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vs(this,function nN(n,e){if(n=Wt(n,Kv),DA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(n,null,(t=e,new ha(Ht.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw _s(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function qN(n,e,t){n=Wt(n,Bn);const r=Object.assign(Object.assign({},NN),t);return function(o){if(o.maxAttempts<1)throw new Me(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function JP(n,e,t){const r=new yr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const o=yield(u=n,Jb(u).then(d=>d.datastore));var u;new qP(n.asyncQueue,o,t,e,r).run()})),r.promise}(Nr(n),o=>e(new GN(n,o)),r)}(this._delegate,t=>e(new jM(this,t)))}batch(){return Nr(this._delegate),new $M(new NM(this._delegate,e=>Gm(this._delegate,e)))}loadBundle(e){return function hN(n,e){const t=Nr(n=Wt(n,Bn)),r=new iN;return function XP(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return Jx(E,C);if(E instanceof ArrayBuffer)return Jx(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new HP(E,d);var E}(t,zv(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function jP(n,e,t){const r=Ze(n);var o;(o=(0,ye.Z)(function*(u,d,m){try{const E=yield d.getMetadata();if(yield function(V,K){const se=Ze(V),Pe=Pr(K.createTime);return se.persistence.runTransaction("hasNewerBundle","readonly",Ue=>se._s.getBundleMetadata(Ue,K.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(Pe)>=0)}(u.localStore,E))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=E).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(jx(E));const C=new EP(E,u.localStore,d.M);let x=yield d.ma();for(;x;){const V=yield C.Fu(x);V&&m._updateProgress(V),x=yield d.ma()}const R=yield C.complete();return yield Ic(u,R.Lu,void 0),yield function(V,K){const se=Ze(V);return se.persistence.runTransaction("Save bundle","readwrite",Pe=>se._s.saveBundleMetadata(Pe,K))}(u.localStore,E),m._completeWith(R.progress),Promise.resolve(R.Bu)}catch(E){return eu("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var V}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield IA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function fN(n,e){return function eN(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=Ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield bA(n),e)}))}(Nr(n=Wt(n,Bn)),e).then(t=>t?new Qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new vs(this,t):null)}}class uI extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new e0(new ul(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pa.forKey(t,this.firestore,null)}}class jM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uI(e)}get(e){const t=op(e);return this._delegate.get(t).then(r=>new t0(this._firestore,new Dc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=op(e);return r?(OA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=op(e);return this._delegate.delete(t),this}}class $M{constructor(e){this._delegate=e}set(e,t,r){const o=op(e);return r?(OA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Jv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new n0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new sp(e,new uI(e),t),o.set(t,u)),u}}sp.INSTANCES=new WeakMap;class pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pa(t,new On(t._delegate,r,new He(e)))}static forKey(e,t,r){return new pa(t,new On(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new qm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qm(this.firestore,dM(this._delegate,e))}catch(t){throw _s(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,wt.m9)(e))instanceof On&&hM(this._delegate,e)}set(e,t){t=OA("DocumentReference.set",t);try{return t?OM(this._delegate,e,t):OM(this._delegate,e)}catch(r){throw _s(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?kM(this._delegate,e):kM(this._delegate,e,t,...r)}catch(o){throw _s(o,"updateDoc()","DocumentReference.update()")}}delete(){return function jN(n){return Gm(Wt(n.firestore,Bn),[new Wd(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=HM(e),r=GM(e,o=>new t0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return FM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function FN(n){n=Wt(n,On);const e=Wt(n.firestore,Bn),t=Nr(e),r=new ip(e);return function KP(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield function(E,C){const x=Ze(E);return x.persistence.runTransaction("read document","readonly",R=>x.fi.Ls(R,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Me(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Um(m,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield bA(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Dc(e,r,n._key,o,new rp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function LN(n){n=Wt(n,On);const e=Wt(n.firestore,Bn);return rM(Nr(e),n._key,{source:"server"}).then(t=>NA(e,n,t))}(this._delegate):function kN(n){n=Wt(n,On);const e=Wt(n.firestore,Bn);return rM(Nr(e),n._key).then(t=>NA(e,n,t))}(this._delegate),t.then(r=>new t0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pa(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function _s(n,e,t){return n.message=n.message.replace(e,t),n}function HM(n){for(const e of n)if("object"==typeof e&&!kA(e))return e;return{}}function GM(n,e){var t,r;let o;return o=kA(n[0])?n[0]:kA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class t0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return CM(this._delegate,e._delegate)}}class n0 extends t0{data(e){const t=this._delegate.data(e);return function Jw(n,e){n||tt()}(void 0!==t),t}}class vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uI(e)}where(e,t,r){try{return new vs(this.firestore,ih(this._delegate,function CN(n,e,t){const r=e,o=oI("where",n);return new IN(o,r,t)}(e,t,r)))}catch(o){throw _s(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vs(this.firestore,ih(this._delegate,function TN(n,e="asc"){const t=e,r=oI("orderBy",n);return new DN(r,t)}(e,t)))}catch(r){throw _s(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vs(this.firestore,ih(this._delegate,function AN(n){return lM("limit",n),new TM("limit",n,"F")}(e)))}catch(t){throw _s(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vs(this.firestore,ih(this._delegate,function SN(n){return lM("limitToLast",n),new TM("limitToLast",n,"L")}(e)))}catch(t){throw _s(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vs(this.firestore,ih(this._delegate,function xN(...n){return new AM("startAt",n,!0)}(...e)))}catch(t){throw _s(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vs(this.firestore,ih(this._delegate,function MN(...n){return new AM("startAfter",n,!1)}(...e)))}catch(t){throw _s(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vs(this.firestore,ih(this._delegate,function RN(...n){return new SM("endBefore",n,!1)}(...e)))}catch(t){throw _s(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vs(this.firestore,ih(this._delegate,function PN(...n){return new SM("endAt",n,!0)}(...e)))}catch(t){throw _s(t,"endAt()","Query.endAt()")}}isEqual(e){return fM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function UN(n){n=Wt(n,Qi);const e=Wt(n.firestore,Bn),t=Nr(e),r=new ip(e);return function YP(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield qb(o,u,!0),E=new Gx(u,m._i),C=E.Wu(m.documents),x=E.applyChanges(C,!1);d.resolve(x.snapshot)}catch(m){const E=Um(m,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield bA(n),e,t);var r})),t.promise}(t,n._query).then(o=>new rh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function BN(n){n=Wt(n,Qi);const e=Wt(n.firestore,Bn),t=Nr(e),r=new ip(e);return iM(t,n._query,{source:"server"}).then(o=>new rh(e,r,n,o))}(this._delegate):function VN(n){n=Wt(n,Qi);const e=Wt(n.firestore,Bn),t=Nr(e),r=new ip(e);return DM(n._query),iM(t,n._query).then(o=>new rh(e,r,n,o))}(this._delegate),t.then(r=>new FA(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=HM(e),r=GM(e,o=>new FA(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return FM(this._delegate,t,r)}withConverter(e){return new vs(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}class nO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new n0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new n0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new n0(this._firestore,r))})}isEqual(e){return CM(this._delegate,e._delegate)}}class qm extends vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pa(this.firestore,e):null}doc(e){try{return new pa(this.firestore,void 0===e?eI(this._delegate):eI(this._delegate,e))}catch(t){throw _s(t,"doc()","CollectionReference.doc()")}}add(e){return function $N(n,e){const t=Wt(n.firestore,Bn),r=eI(n),o=aI(n.converter,e);return Gm(t,[rI(tp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new pa(this.firestore,t))}isEqual(e){return hM(this._delegate,e._delegate)}withConverter(e){return new qm(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function op(n){return Wt(n,On)}class LA{constructor(...e){this._delegate=new Cc(...e)}static documentId(){return new LA(_r.keyField().canonicalString())}isEqual(e){return(e=(0,wt.m9)(e))instanceof Cc&&this._delegate._internalPath.isEqual(e._internalPath)}}class ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ZN(){return new AA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ap(e)}static delete(){const e=function zN(){return new Yv("deleteField")}();return e._methodName="FieldValue.delete",new ap(e)}static arrayUnion(...e){const t=function WN(...n){return new yN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ap(t)}static arrayRemove(...e){const t=function KN(...n){return new _N("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ap(t)}static increment(e){const t=function YN(n){return new vN("increment",n)}(e);return t._methodName="FieldValue.increment",new ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rO={Firestore:BM,GeoPoint:tI,Timestamp:An,Blob:e0,Transaction:jM,WriteBatch:$M,DocumentReference:pa,DocumentSnapshot:t0,Query:vs,QueryDocumentSnapshot:n0,QuerySnapshot:FA,CollectionReference:qm,FieldPath:LA,FieldValue:ap,setLogLevel:function tO(n){!function CD(n){Xu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function qM(n,e){return function oO(n,e=HE.z){return new In.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function VA(n,e){return qM(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function lI(n,e){return VA(n,e).pipe(zi(void 0),Yh(),(0,At.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(x=>x.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function zM(n,e,t){return lI(n,t).pipe(Zi((r,o)=>function uO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return UA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return UA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function y_(n,e=Ai.y){return n=null!=n?n:GE,(0,qn.e)((t,r)=>{let o,u=!0;t.subscribe((0,gn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,At.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function UA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function ZM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function sO(n){(function iO(n,e){n.INTERNAL.registerComponent(new Vh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},rO)))})(n,(e,t)=>new BM(e,t,new eO)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(Ty.Z);class WM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(zi(void 0),Yh(),ii(([r,o])=>o.length>0||!r),(0,At.U)(([r,o])=>o),Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ZM(e);return zM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return VA(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Un.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(Un.iC)}add(e){return this.ref.add(e)}doc(e){return new KM(this.ref.doc(e),this.afs)}}class KM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=YM(r,t);return new WM(o,u,this.afs)}snapshotChanges(){return function aO(n,e){return qM(n,e).pipe(zi(void 0),Yh(),(0,At.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,tn.D)(this.ref.get(e)).pipe(Un.iC)}}class cO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lI(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ii(t=>t.length>0),Un.iC):lI(this.query,this.afs.schedulers.outsideAngular).pipe(Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ZM(e);return zM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return VA(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Un.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(Un.iC)}}const dO=new h.OlP("angularfire2.enableFirestorePersistence"),hO=new h.OlP("angularfire2.firestore.persistenceSettings"),fO=new h.OlP("angularfire2.firestore.settings"),pO=new h.OlP("angularfire2.firestore.use-emulator");function YM(n,e=(t=>t)){return{query:e(n),ref:n}}let gO=(()=>{class n{constructor(t,r,o,u,d,m,E,C,x,R,V,K,se,Pe,Ue,Dt,Tt){this.schedulers=E;const gt=(0,pi.on)(t,m,r),st=x;R&&g_(gt,m,V,se,Pe,Ue,K,Dt),[this.firestore,this.persistenceEnabled$]=(0,pi.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const Mt=m.runOutsideAngular(()=>gt.firestore());if(u&&Mt.settings(u),st&&Mt.useEmulator(...st),o&&!xo(d)){const jt=()=>{try{return(0,tn.D)(Mt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Or){return"undefined"!=typeof console&&console.warn(Or),Xe(!1)}};return[Mt,m.runOutsideAngular(jt)]}return[Mt,Xe(!1)]},[u,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=YM(o,r),m=this.schedulers.ngZone.run(()=>u);return new WM(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new cO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new KM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pi.Dh),h.LFG(pi.xv,8),h.LFG(dO,8),h.LFG(fO,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Un.HU),h.LFG(hO,8),h.LFG(pO,8),h.LFG(m_,8),h.LFG(Pg,8),h.LFG(h_,8),h.LFG($E,8),h.LFG(f_,8),h.LFG(p_,8),h.LFG(Ng,8),h.LFG(qu,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function QM(n){const e=function yO(n){return new In.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function mO(n,e=HE.z){return(0,qn.e)((t,r)=>{let o=null,u=null,d=null;const m=()=>{if(o){o.unsubscribe(),o=null;const C=u;u=null,r.next(C)}};function E(){const C=d+n,x=e.now();if(x<C)return o=this.schedule(void 0,C-x),void r.add(o);m()}t.subscribe((0,gn.x)(r,C=>{u=C,d=e.now(),o||(o=e.schedule(E,n),r.add(o))},()=>{m(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,At.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function cI(n){return{getDownloadURL:()=>Xe(void 0).pipe(Un.fc,mn(()=>n.getDownloadURL()),Un.iC),getMetadata:()=>Xe(void 0).pipe(Un.fc,mn(()=>n.getMetadata()),Un.iC),delete:()=>(0,tn.D)(n.delete()),child:e=>cI(n.child(e)),updateMetadata:e=>(0,tn.D)(n.updateMetadata(e)),put:(e,t)=>QM(n.put(e,t)),putString:(e,t,r)=>QM(n.putString(e,t,r)),list:e=>(0,tn.D)(n.list(e)),listAll:()=>(0,tn.D)(n.listAll())}}const _O=new h.OlP("angularfire2.storageBucket"),vO=new h.OlP("angularfire2.storage.maxUploadRetryTime"),EO=new h.OlP("angularfire2.storage.maxOperationRetryTime"),wO=new h.OlP("angularfire2.storage.use-emulator");let bO=(()=>{class n{constructor(t,r,o,u,d,m,E,C,x,R){const V=(0,pi.on)(t,d,r);this.storage=(0,pi.cc)(`${V.name}.storage.${o}`,"AngularFireStorage",V.name,()=>{const K=d.runOutsideAngular(()=>V.storage(o||void 0)),se=x;return se&&K.useEmulator(...se),E&&K.setMaxUploadRetryTime(E),C&&K.setMaxOperationRetryTime(C),K},[E,C])}ref(t){return cI(this.storage.ref(t))}refFromURL(t){return cI(this.storage.refFromURL(t))}upload(t,r,o){return cI(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pi.Dh),h.LFG(pi.xv,8),h.LFG(_O,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Un.HU),h.LFG(vO,8),h.LFG(EO,8),h.LFG(wO,8),h.LFG(qu,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dI=(()=>{class n{constructor(t,r,o,u){this.afauth=t,this.firestore=r,this.firestorage=o,this.router=u,this.storageRef=vE.Z.app().storage().ref(),this.especialistasRef=r.collection("especialistasColeccion")}logIn(t,r){var o=this;return(0,ye.Z)(function*(){return yield o.afauth.signInWithEmailAndPassword(t,r).catch(u=>{throw u})})()}register(t,r){var o=this;return(0,ye.Z)(function*(){return yield o.afauth.createUserWithEmailAndPassword(t,r).catch(u=>{throw u})})()}getCurrentUser(){return this.afauth.authState}logOut(){this.afauth.signOut()}crear(t,r){var o=this;return(0,ye.Z)(function*(){return yield o.firestore.collection(t).add(r)})()}getByEmail(t){this.firestore.collection("pacientesColeccion",r=>r.where("email","==",t).limit(1)).get().subscribe(r=>r)}crear2(t,r){let o={status:!0,error:""},u=this.firestore.collection(t);try{u.add(r).then(d=>{d||(o.status=!1,o.error="data vacia")})}catch(d){o.status=!1,o.error=`${d}`,console.log(d)}return o}obtenerTodos(t){return this.firestore.collection(t).valueChanges({idField:"id"})}obtenerTodos2(t){return this.firestore.collection(t).valueChanges()}subirImagenes(t,r,o){var u=this;return(0,ye.Z)(function*(){try{let d=yield u.storageRef.child(`${t}/${r}`).putString(o,"data_url");return console.log(d),yield d.ref.getDownloadURL()}catch(d){return console.log(d),null}})()}subirImagenV2(t,r){return(0,ye.Z)(function*(){let o=vE.Z.app().storage().ref();try{let u=yield o.child("users/"+t).putString(r,"data_url");return console.log(u),yield u.ref.getDownloadURL()}catch(u){return console.log(u),null}})()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(m_),h.LFG(gO),h.LFG(bO),h.LFG(rr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),up=(()=>{class n extends JM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ll=new h.OlP("NgValueAccessor"),DO={provide:ll,useExisting:(0,h.Gpc)(()=>r0),multi:!0},AO=new h.OlP("CompositionEventMode");let r0=(()=>{class n extends JM{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function TO(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(AO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([DO]),h.qOj]}),n})();function oh(n){return null==n||0===n.length}function eR(n){return null!=n&&"number"==typeof n.length}const Ji=new h.OlP("NgValidators"),ah=new h.OlP("NgAsyncValidators"),SO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class an{static min(e){return function tR(n){return e=>{if(oh(e.value)||oh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function nR(n){return e=>{if(oh(e.value)||oh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function rR(n){return oh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function iR(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function sR(n){return oh(n.value)||SO.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function oR(n){return e=>oh(e.value)||!eR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function aR(n){return e=>eR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function uR(n){if(!n)return hI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(oh(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return pR(e)}static composeAsync(e){return gR(e)}}function hI(n){return null}function lR(n){return null!=n}function cR(n){const e=(0,h.QGY)(n)?(0,tn.D)(n):n;return(0,h.CqO)(e),e}function dR(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function hR(n,e){return e.map(t=>t(n))}function fR(n){return n.map(e=>function xO(n){return!n.validate}(e)?e:t=>e.validate(t))}function pR(n){if(!n)return null;const e=n.filter(lR);return 0==e.length?null:function(t){return dR(hR(t,e))}}function BA(n){return null!=n?pR(fR(n)):null}function gR(n){if(!n)return null;const e=n.filter(lR);return 0==e.length?null:function(t){return function IO(...n){const e=(0,Oa.jO)(n),{args:t,keys:r}=nn(n),o=new In.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let E=d,C=d;for(let x=0;x<d;x++){let R=!1;(0,Ho.Xf)(t[x]).subscribe((0,gn.x)(u,V=>{R||(R=!0,C--),m[x]=V},()=>E--,void 0,()=>{(!E||!R)&&(C||u.next(r?Tl(r,m):m),u.complete())}))}});return e?o.pipe(Zc(e)):o}(hR(t,e).map(cR)).pipe((0,At.U)(dR))}}function jA(n){return null!=n?gR(fR(n)):null}function mR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yR(n){return n._rawValidators}function _R(n){return n._rawAsyncValidators}function $A(n){return n?Array.isArray(n)?n:[n]:[]}function fI(n,e){return Array.isArray(n)?n.includes(e):n===e}function vR(n,e){const t=$A(e);return $A(n).forEach(o=>{fI(t,o)||t.push(o)}),t}function ER(n,e){return $A(e).filter(t=>!fI(n,t))}class wR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class uh extends wR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Es extends wR{get formDirective(){return null}get path(){return null}}class bR{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let HA=(()=>{class n extends bR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(uh,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),pI=(()=>{class n extends bR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Es,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function s0(n,e){zA(n,e),e.valueAccessor.writeValue(n.value),function LO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&CR(n,e)})}(n,e),function UO(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function VO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&CR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function FO(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _I(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zA(n,e){const t=yR(n);null!==e.validator?n.setValidators(mR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=_R(n);null!==e.asyncValidator?n.setAsyncValidators(mR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();_I(e._rawValidators,o),_I(e._rawAsyncValidators,o)}function vI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=yR(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=_R(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return _I(e._rawValidators,r),_I(e._rawAsyncValidators,r),t}function CR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function DR(n,e){zA(n,e)}function AR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function KA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const o0="VALID",EI="INVALID",zm="PENDING",a0="DISABLED";function QA(n){return(wI(n)?n.validators:n)||null}function SR(n){return Array.isArray(n)?BA(n):n||null}function JA(n,e){return(wI(e)?e.asyncValidators:n)||null}function xR(n){return Array.isArray(n)?jA(n):n||null}function wI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const XA=n=>n instanceof tS,bI=n=>n instanceof II,MR=n=>n instanceof OR;function RR(n){return XA(n)?n.value:n.getRawValue()}function PR(n,e){const t=bI(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function NR(n,e){bI(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new h.vHH(1002,"")})}class eS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=SR(this._rawValidators),this._composedAsyncValidatorFn=xR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===o0}get invalid(){return this.status===EI}get pending(){return this.status==zm}get disabled(){return this.status===a0}get enabled(){return this.status!==a0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=SR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=xR(e)}addValidators(e){this.setValidators(vR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ER(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ER(e,this._rawAsyncValidators))}hasValidator(e){return fI(this._rawValidators,e)}hasAsyncValidator(e){return fI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=a0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=o0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===o0||this.status===zm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?a0:o0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zm,this._hasOwnPendingAsyncValidator=!0;const t=cR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function HO(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=bI(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:MR(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?a0:this.errors?EI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zm)?zm:this._anyControlsHaveStatus(EI)?EI:o0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class tS extends eS{constructor(e=null,t,r){super(QA(t),JA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class II extends eS{constructor(e,t,r){super(QA(t),JA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){NR(this,e),Object.keys(e).forEach(r=>{PR(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=RR(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class OR extends eS{constructor(e,t,r){super(QA(t),JA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){NR(this,e),e.forEach((r,o)=>{PR(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>RR(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const GO={provide:Es,useExisting:(0,h.Gpc)(()=>CI)},u0=(()=>Promise.resolve(null))();let CI=(()=>{class n extends Es{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new II({},BA(t),jA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){u0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),s0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){u0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){u0.then(()=>{const r=this._findContainer(t.path),o=new II({});DR(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){u0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){u0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,AR(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ji,10),h.Y36(ah,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([GO]),h.qOj]}),n})(),DI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),BR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const nS=new h.OlP("NgModelWithFormControlWarning"),JO={provide:Es,useExisting:(0,h.Gpc)(()=>l0)};let l0=(()=>{class n extends Es{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return s0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){yI(t.control||null,t,!1),KA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,AR(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(yI(r||null,t),XA(o)&&(s0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);DR(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function BO(n,e){return vI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zA(this.form,this),this._oldForm&&vI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ji,10),h.Y36(ah,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([JO]),h.qOj,h.TTD]}),n})();const tk={provide:uh,useExisting:(0,h.Gpc)(()=>TI)};let TI=(()=>{class n extends uh{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function WA(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===r0?t=u:function $O(n){return Object.getPrototypeOf(n.constructor)===up}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function ZA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function mI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Es,13),h.Y36(Ji,10),h.Y36(ah,10),h.Y36(ll,10),h.Y36(nS,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([tk]),h.qOj,h.TTD]}),n})();const nk={provide:ll,useExisting:(0,h.Gpc)(()=>AI),multi:!0};function qR(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let AI=(()=>{class n extends up{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=qR(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function rk(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([nk]),h.qOj]}),n})(),zR=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(qR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(AI,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const ik={provide:ll,useExisting:(0,h.Gpc)(()=>sS),multi:!0};function ZR(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let sS=(()=>{class n extends up{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(o.indexOf(d.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let m=0;m<d.length;m++){const C=this._getOptionValue(d[m].value);o.push(C)}}else{const d=r.options;for(let m=0;m<d.length;m++){const E=d[m];if(E.selected){const C=this._getOptionValue(E.value);o.push(C)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function sk(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([ik]),h.qOj]}),n})(),WR=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ZR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ZR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(sS,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),i1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[BR]]}),n})(),gk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[i1]}),n})(),s1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nS,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[i1]}),n})(),o1=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function mk(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new II(o,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,o){return new tS(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new OR(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return XA(t)||bI(t)||MR(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:s1}),n})(),yk=(()=>{class n{constructor(t){this.firebase=t,this.firebase.obtenerTodos2("pacientesColeccion").subscribe(r=>{this.listaPaciente=[],this.listaPaciente=r}),this.firebase.obtenerTodos("especialistasColeccion").subscribe(r=>{this.listaEspecialista=[],this.listaEspecialista=r})}ngOnInit(){}verificarLogin(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:0,consts:[[1,"form-signin","text-center","container","shadow",2,"margin-top","100px"],["src","../../../assets/imgRegistro/login.png","alt","","width","70","height","70",1,"mb-4"],[1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","email","id","floatingInput","placeholder","name@example.com",1,"form-control"],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password",1,"form-control"],["for","floatingPassword"],["type","submit",1,"buttonNormal"],["type","submit",1,"w-100","buttonLog",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"main",0)(1,"form"),h._UZ(2,"img",1),h.TgZ(3,"h1",2),h._uU(4,"Loguearse"),h.qZA(),h.TgZ(5,"div",3),h._UZ(6,"input",4),h.TgZ(7,"label",5),h._uU(8,"Email address"),h.qZA()(),h.TgZ(9,"div",3),h._UZ(10,"input",6),h.TgZ(11,"label",7),h._uU(12,"Password"),h.qZA()(),h.TgZ(13,"button",8),h._uU(14,"Acceso rapido"),h.qZA(),h.TgZ(15,"button",9),h.NdJ("click",function(){return r.verificarLogin()}),h._uU(16,"Entrar"),h.qZA()()())},directives:[DI,pI,CI],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}h1[_ngcontent-%COMP%]{line-height:1.2;letter-spacing:-1.2px;text-transform:capitalize;color:#223a66;font-weight:700;text-shadow:.5px .5px .5px grey;font-family:Exo,sans-serif}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}main[_ngcontent-%COMP%]{background-color:#f5f5f5}.buttonNormal[_ngcontent-%COMP%]{font-family:Exo,sans-serif;color:#fff;font-size:11px;background-color:#223a66;border:1px solid transparent;border-radius:5px;margin-bottom:5px}.buttonLog[_ngcontent-%COMP%]{border-radius:50px;background:#e12454;color:#fff;border-color:#e12454;display:inline-block;font-size:10px;font-size:.7rem;font-weight:700;letter-spacing:.5px;padding:.5rem 1rem;font-family:Exo,sans-serif;text-transform:uppercase;border:2px solid transparent;transition:all .35s ease;width:30%}button[_ngcontent-%COMP%]:hover{background:#223a66;color:#fff;border-color:#223a66}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]}),n})();class _k{constructor(e="",t="",r=0,o=0,u="",d="",m="",E=[],C=!1){this.nombre=e,this.apellido=t,this.edad=r,this.dni=o,this.obraSocial=u,this.email=d,this.password=m,this.imgsPerfil=E,this.verificadoEmail=C}}function vk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," El nombre es requerido "),h.qZA())}function Ek(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," El apellido es requerido "),h.qZA())}function wk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," El edad es requerido "),h.qZA())}function bk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," No puede menor a 18 "),h.qZA())}function Ik(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," No puede mayor a 99 "),h.qZA())}function Ck(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," Solo numeros "),h.qZA())}function Dk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," El dni es requerido "),h.qZA())}function Tk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," Solo numeros "),h.qZA())}function Ak(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," No puede ser menos de 8 caracteres "),h.qZA())}function Sk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," El obraSocial es requerido "),h.qZA())}function xk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," El email es requerido "),h.qZA())}function Mk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," Debe ser email valido "),h.qZA())}function Rk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," El password es requerido "),h.qZA())}function Pk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," No puede ser menos de 6 caracteres "),h.qZA())}function Nk(n,e){1&n&&(h.TgZ(0,"small",23),h._uU(1," El imagen es requerido "),h.qZA())}function Ok(n,e){1&n&&h._UZ(0,"img",24)}let kk=(()=>{class n{constructor(t,r,o){this.fb=t,this.firebase=r,this.router=o,this.mensaje="",this.agregarPac=!1,this.foto1Ok=!1,this.foto2Ok=!1,this.spinnerImgSubiendose=!1,this.formaPaciente=this.fb.group({nombre:["",[an.required]],apellido:["",an.required],edad:["",[an.required,an.min(18),an.max(99),an.pattern("^[0-9]*$")]],dnidoc:["",[an.required,an.minLength(8),an.pattern("^[0-9]*$")]],obraSocial:["",[an.required]],email:["",[an.required,an.email]],password:["",[an.required,an.minLength(6)]],imagen:["",[an.required]]}),this.miPaciente=new _k}ngOnInit(){}cargarImagen(t){this.fotosPaciente=t.target.files}obtenerDatosEnviarRegistroPaciente(){this.spinnerImgSubiendose=!0,this.miPaciente.nombre=this.formaPaciente.value.nombre,this.miPaciente.apellido=this.formaPaciente.value.apellido,this.miPaciente.edad=this.formaPaciente.value.edad,this.miPaciente.dni=this.formaPaciente.value.dnidoc,this.miPaciente.obraSocial=this.formaPaciente.value.obraSocial,this.miPaciente.email=this.formaPaciente.value.email,this.miPaciente.password=this.formaPaciente.value.password;for(let t=0;t<this.fotosPaciente.length;t++){let r=new FileReader;r.readAsDataURL(this.fotosPaciente[t]),r.onloadend=()=>{this.firebase.subirImagenes("imgPerfilPacientes",`${this.miPaciente.nombre}_${this.miPaciente.email}_img${t}`,r.result).then(o=>{if(null!=o&&(this.miPaciente.imgsPerfil.push(o),1==t)){let u=this.firebase.crear2("pacientesColeccion",JSON.parse(JSON.stringify(this.miPaciente)));u.status&&this.formaPaciente.reset(),u.status&&this.router.navigate(["login"])}}).catch(o=>{console.log(o,"no s epudo subir la foto")})}}}cargarImagen1(t){this.fotoPaciente1=t.target.files[0]}cargarImagen2(t){this.fotoPaciente2=t.target.files[0]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(o1),h.Y36(dI),h.Y36(rr))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-registro-paciente"]],decls:59,vars:18,consts:[[1,"container","contenedorRegistro","shadow",2,"border-radius","20px"],[1,"col-md-7","col-lg-8",2,"margin-top","15px"],[1,"divh5"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"row","g-4"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","placeholder","nombre","value","","formControlName","nombre",1,"form-control"],["class","invalid","style","color:red ;",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","placeholder","apellido","formControlName","apellido",1,"form-control"],["type","text","placeholder","edad","formControlName","edad",1,"form-control"],["type","text","placeholder","dni","formControlName","dnidoc",1,"form-control"],["type","text","placeholder","obraSocial","formControlName","obraSocial",1,"form-control"],["type","text","placeholder","email","formControlName","email",1,"form-control"],["type","password","placeholder","password","formControlName","password",1,"form-control"],["for","imagen",1,"form-label"],["type","file","accept",".png, .jpg, .jpeg","multiple","","id","imagen","formControlName","imagen",1,"form-control",3,"change"],[1,"d-flex","justify-content-center"],["src","../../../assets/imgRegistro/loading-icegif-1.gif","alt","imagenSubida","class","gifCargando","width","100px","height","100px",4,"ngIf"],[1,"d-flex","justify-content-center",2,"margin-top","10px","margin-bottom","10px"],["type","submit",1,"w-50","btn","btn-primary","btn-lg",3,"disabled"],[1,"invalid",2,"color","red"],["src","../../../assets/imgRegistro/loading-icegif-1.gif","alt","imagenSubida","width","100px","height","100px",1,"gifCargando"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),h._uU(4,"Registro Paciente"),h.qZA()(),h.TgZ(5,"form",4),h.NdJ("ngSubmit",function(){return r.obtenerDatosEnviarRegistroPaciente()}),h.TgZ(6,"div",5)(7,"div",6)(8,"label",7),h._uU(9,"Nombre"),h.qZA(),h._UZ(10,"input",8),h.YNc(11,vk,2,0,"small",9),h.qZA(),h.TgZ(12,"div",6)(13,"label",10),h._uU(14,"Apellido"),h.qZA(),h._UZ(15,"input",11),h.YNc(16,Ek,2,0,"small",9),h.qZA(),h.TgZ(17,"div",6)(18,"label",7),h._uU(19,"Edad"),h.qZA(),h._UZ(20,"input",12),h.YNc(21,wk,2,0,"small",9),h.YNc(22,bk,2,0,"small",9),h.YNc(23,Ik,2,0,"small",9),h.YNc(24,Ck,2,0,"small",9),h.qZA(),h.TgZ(25,"div",6)(26,"label",10),h._uU(27,"DNI"),h.qZA(),h._UZ(28,"input",13),h.YNc(29,Dk,2,0,"small",9),h.YNc(30,Tk,2,0,"small",9),h.YNc(31,Ak,2,0,"small",9),h.qZA(),h.TgZ(32,"div",6)(33,"label",10),h._uU(34,"Obre social"),h.qZA(),h._UZ(35,"input",14),h.YNc(36,Sk,2,0,"small",9),h.qZA(),h.TgZ(37,"div",6)(38,"label",10),h._uU(39,"Email"),h.qZA(),h._UZ(40,"input",15),h.YNc(41,xk,2,0,"small",9),h.YNc(42,Mk,2,0,"small",9),h.qZA(),h.TgZ(43,"div",6)(44,"label",7),h._uU(45,"Password"),h.qZA(),h._UZ(46,"input",16),h.YNc(47,Rk,2,0,"small",9),h.YNc(48,Pk,2,0,"small",9),h.qZA(),h.TgZ(49,"div",6)(50,"label",17),h._uU(51,"Ingrese 2 imagenes de perfil:"),h.qZA(),h.TgZ(52,"input",18),h.NdJ("change",function(u){return r.cargarImagen(u)}),h.qZA(),h.YNc(53,Nk,2,0,"small",9),h.qZA()(),h.TgZ(54,"div",19),h.YNc(55,Ok,1,0,"img",20),h.qZA(),h.TgZ(56,"div",21)(57,"button",22),h._uU(58,"Registrarse"),h.qZA()()()()()),2&t&&(h.xp6(5),h.Q6J("formGroup",r.formaPaciente),h.xp6(6),h.Q6J("ngIf",(null==r.formaPaciente.controls.nombre.errors?null:r.formaPaciente.controls.nombre.errors.required)&&r.formaPaciente.controls.nombre.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaPaciente.controls.apellido.errors?null:r.formaPaciente.controls.apellido.errors.required)&&r.formaPaciente.controls.apellido.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaPaciente.controls.edad.errors?null:r.formaPaciente.controls.edad.errors.required)&&r.formaPaciente.controls.edad.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaPaciente.controls.edad.errors?null:r.formaPaciente.controls.edad.errors.min)&&r.formaPaciente.controls.edad.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaPaciente.controls.edad.errors?null:r.formaPaciente.controls.edad.errors.max)&&r.formaPaciente.controls.edad.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaPaciente.controls.edad.errors?null:r.formaPaciente.controls.edad.errors.pattern)&&r.formaPaciente.controls.edad.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaPaciente.controls.dnidoc.errors?null:r.formaPaciente.controls.dnidoc.errors.required)&&r.formaPaciente.controls.dnidoc.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaPaciente.controls.dnidoc.errors?null:r.formaPaciente.controls.dnidoc.errors.pattern)&&r.formaPaciente.controls.dnidoc.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaPaciente.controls.dnidoc.errors?null:r.formaPaciente.controls.dnidoc.errors.minlength)&&r.formaPaciente.controls.dnidoc.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaPaciente.controls.obraSocial.errors?null:r.formaPaciente.controls.obraSocial.errors.required)&&r.formaPaciente.controls.obraSocial.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaPaciente.controls.email.errors?null:r.formaPaciente.controls.email.errors.required)&&r.formaPaciente.controls.email.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaPaciente.controls.email.errors?null:r.formaPaciente.controls.email.errors.email)&&r.formaPaciente.controls.email.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaPaciente.controls.password.errors?null:r.formaPaciente.controls.password.errors.required)&&r.formaPaciente.controls.password.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaPaciente.controls.password.errors?null:r.formaPaciente.controls.password.errors.minlength)&&r.formaPaciente.controls.password.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaPaciente.controls.imagen.errors?null:r.formaPaciente.controls.imagen.errors.required)&&r.formaPaciente.controls.imagen.touched),h.xp6(2),h.Q6J("ngIf",r.spinnerImgSubiendose),h.xp6(2),h.Q6J("disabled",r.formaPaciente.invalid))},directives:[DI,pI,l0,r0,HA,TI,Pn],styles:[".contenedorRegistro[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:45%;background-color:#fff}label[_ngcontent-%COMP%]{font-size:13px;font-style:bold;font-weight:700;color:#55595c}button[_ngcontent-%COMP%]{border-radius:50px;background:#e12454;color:#fff;border-color:#e12454;display:inline-block;font-size:10px;font-size:.7rem;font-weight:700;letter-spacing:.5px;padding:.5rem 1rem;font-family:Exo,sans-serif;text-transform:uppercase;border:2px solid transparent;transition:all .35s ease;width:30%}button[_ngcontent-%COMP%]:hover{background:#223a66;color:#fff;border-color:#223a66}.divh5[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:5px;background:#e12454;color:#fff;height:25px;padding-top:10px}.contenedorPregunta[_ngcontent-%COMP%]{border:1px solid red;display:flex;justify-content:center}.feature-item[_ngcontent-%COMP%]{flex-basis:35%;margin:0 10px;padding:40px 30px;background-color:#fff;border-radius:15px;box-shadow:0 0 30px #002a6a1a}.feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#223a66}.feature-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#223a66}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.feature-section.border-top[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.05)!important}.btnEspecialista[_ngcontent-%COMP%]{background:#223a66;color:#fff;border-color:#223a66;width:35%}.btnEspecialista[_ngcontent-%COMP%]:hover{background:#e12454;color:#fff;border-color:#e12454}"]}),n})();class Fk{constructor(e="",t="",r=0,o=0,u="",d="",m="",E="",C=!1,x=!1){this.nombre=e,this.apellido=t,this.edad=r,this.dni=o,this.email=d,this.password=m,this.imgPerfil=E,this.verificadoEmail=x,this.verificadoAdmin=C}}function Lk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," El nombre es requerido "),h.qZA())}function Vk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," El apellido es requerido "),h.qZA())}function Uk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," El edad es requerido "),h.qZA())}function Bk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," No puede menor a 18 "),h.qZA())}function jk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," No puede mayor a 99 "),h.qZA())}function $k(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," Solo numeros "),h.qZA())}function Hk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," El dni es requerido "),h.qZA())}function Gk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," Solo numeros "),h.qZA())}function qk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," No puede ser menos de 8 caracteres "),h.qZA())}function zk(n,e){if(1&n&&(h.TgZ(0,"option",27),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.s9C("value",t.id),h.xp6(1),h.hij(" ",t.especialidad," ")}}function Zk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," El especialidad es requerido "),h.qZA())}function Wk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," El email es requerido "),h.qZA())}function Kk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," Debe ser email valido "),h.qZA())}function Yk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," El password es requerido "),h.qZA())}function Qk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," No puede ser menos de 6 caracteres "),h.qZA())}function Jk(n,e){1&n&&(h.TgZ(0,"small",26),h._uU(1," El imagen es requerido "),h.qZA())}function Xk(n,e){1&n&&h._UZ(0,"img",28)}let eF=(()=>{class n{constructor(t,r,o){this.fb=t,this.firebase=r,this.router=o,this.mensaje="",this.agregarEsp=!1,this.spinnerImgSubiendose=!1,this.firebase.obtenerTodos("especialidades").subscribe(u=>{this.listadoEspecialidades=u}),this.formaEspecialista=this.fb.group({nombre:["",[an.required]],apellido:["",an.required],edad:["",[an.required,an.min(18),an.max(99),an.pattern("^[0-9]*$")]],dnidoc:["",[an.required,an.minLength(8),an.pattern("^[0-9]*$")]],especialidad:["",[an.required]],email:["",[an.required,an.email]],password:["",[an.required,an.minLength(6)]],imagen:["",[an.required]]}),this.miEspecialista=new Fk}ngOnInit(){}cargarImagen(t){this.fotoEspecialista=t.target.files[0]}subirImgEspecialista(t,r,o){}obtenerDatosEnviarRegistroEspecialista(){this.spinnerImgSubiendose=!0,this.miEspecialista.nombre=this.formaEspecialista.value.nombre,this.miEspecialista.apellido=this.formaEspecialista.value.apellido,this.miEspecialista.edad=this.formaEspecialista.value.edad,this.miEspecialista.dni=this.formaEspecialista.value.dnidoc,this.miEspecialista.especialidad=this.formaEspecialista.value.especialidad,this.miEspecialista.email=this.formaEspecialista.value.email,this.miEspecialista.password=this.formaEspecialista.value.password;let t=new FileReader;t.readAsDataURL(this.fotoEspecialista),t.onloadend=()=>{this.firebase.subirImagenes("imgperfilEspecialista",`${this.miEspecialista.email}_${this.miEspecialista.nombre}`,t.result).then(r=>{null!=r&&(this.miEspecialista.imgPerfil=r,console.log(this.miEspecialista),this.firebase.crear("especialistasColeccion",JSON.parse(JSON.stringify(this.miEspecialista))).then(o=>{console.log("Se creo y se subio especialista ?",o),this.mensaje="Se especialista registrado!",this.spinnerImgSubiendose=!1,this.formaEspecialista.reset(),this.router.navigate(["login"])}))}).catch(r=>(console.log(r),this.mensaje="Error. Se especialista NO registrado!",!1))}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(o1),h.Y36(dI),h.Y36(rr))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-registro-especialista"]],decls:62,vars:19,consts:[[1,"container","contenedorRegistro","shadow",2,"border-radius","20px"],[1,"col-md-7","col-lg-8",2,"margin-top","15px"],[1,"divh5"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"row","g-4"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","id","floatingInput","placeholder","nombre","value","","formControlName","nombre",1,"form-control"],["class","invalid","style","color:red ;",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","id","floatingInput","placeholder","apellido","formControlName","apellido",1,"form-control"],["type","text","id","floatingInput","placeholder","edad","formControlName","edad",1,"form-control"],["type","text","id","floatingInput","placeholder","dni","formControlName","dnidoc",1,"form-control"],["for","especialidad",1,"form-label"],["id","especialidad","formControlName","especialidad",1,"form-select"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["type","text","id","floatingInput","placeholder","email","formControlName","email",1,"form-control"],["type","password","id","floatingInput","placeholder","password","formControlName","password",1,"form-control"],["for","imagen",1,"form-label"],["type","file","accept",".png, .jpg, .jpeg","multiple","","id","imagen","formControlName","imagen",1,"form-control",3,"change"],[1,"d-flex","justify-content-center"],["src","../../../assets/imgRegistro/loading-icegif-1.gif","alt","imagenSubida","class","gifCargando","width","100px","height","100px",4,"ngIf"],[1,"d-flex","justify-content-center",2,"margin-top","10px","margin-bottom","10px"],["type","submit",1,"w-50","btn","btn-primary","btn-lg",3,"disabled"],[1,"invalid",2,"color","red"],[3,"value"],["src","../../../assets/imgRegistro/loading-icegif-1.gif","alt","imagenSubida","width","100px","height","100px",1,"gifCargando"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),h._uU(4,"Registro Especialista"),h.qZA()(),h.TgZ(5,"form",4),h.NdJ("ngSubmit",function(){return r.obtenerDatosEnviarRegistroEspecialista()}),h.TgZ(6,"div",5)(7,"div",6)(8,"label",7),h._uU(9,"Nombre"),h.qZA(),h._UZ(10,"input",8),h.YNc(11,Lk,2,0,"small",9),h.qZA(),h.TgZ(12,"div",6)(13,"label",10),h._uU(14,"Apellido"),h.qZA(),h._UZ(15,"input",11),h.YNc(16,Vk,2,0,"small",9),h.qZA(),h.TgZ(17,"div",6)(18,"label",7),h._uU(19,"Edad"),h.qZA(),h._UZ(20,"input",12),h.YNc(21,Uk,2,0,"small",9),h.YNc(22,Bk,2,0,"small",9),h.YNc(23,jk,2,0,"small",9),h.YNc(24,$k,2,0,"small",9),h.qZA(),h.TgZ(25,"div",6)(26,"label",10),h._uU(27,"DNI"),h.qZA(),h._UZ(28,"input",13),h.YNc(29,Hk,2,0,"small",9),h.YNc(30,Gk,2,0,"small",9),h.YNc(31,qk,2,0,"small",9),h.qZA(),h.TgZ(32,"div",6)(33,"label",14),h._uU(34,"Especialidad"),h.qZA(),h.TgZ(35,"select",15)(36,"option",16),h._uU(37,"Seleccione..."),h.qZA(),h.YNc(38,zk,2,2,"option",17),h.qZA(),h.YNc(39,Zk,2,0,"small",9),h.qZA(),h.TgZ(40,"div",6)(41,"label",10),h._uU(42,"Email"),h.qZA(),h._UZ(43,"input",18),h.YNc(44,Wk,2,0,"small",9),h.YNc(45,Kk,2,0,"small",9),h.qZA(),h.TgZ(46,"div",6)(47,"label",7),h._uU(48,"Password"),h.qZA(),h._UZ(49,"input",19),h.YNc(50,Yk,2,0,"small",9),h.YNc(51,Qk,2,0,"small",9),h.qZA(),h.TgZ(52,"div",6)(53,"label",20),h._uU(54,"Imagen de perfil"),h.qZA(),h.TgZ(55,"input",21),h.NdJ("change",function(u){return r.cargarImagen(u)}),h.qZA(),h.YNc(56,Jk,2,0,"small",9),h.qZA()(),h.TgZ(57,"div",22),h.YNc(58,Xk,1,0,"img",23),h.qZA(),h.TgZ(59,"div",24)(60,"button",25),h._uU(61,"Registrarse"),h.qZA()()()()()),2&t&&(h.xp6(5),h.Q6J("formGroup",r.formaEspecialista),h.xp6(6),h.Q6J("ngIf",(null==r.formaEspecialista.controls.nombre.errors?null:r.formaEspecialista.controls.nombre.errors.required)&&r.formaEspecialista.controls.nombre.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaEspecialista.controls.apellido.errors?null:r.formaEspecialista.controls.apellido.errors.required)&&r.formaEspecialista.controls.apellido.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaEspecialista.controls.edad.errors?null:r.formaEspecialista.controls.edad.errors.required)&&r.formaEspecialista.controls.edad.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaEspecialista.controls.edad.errors?null:r.formaEspecialista.controls.edad.errors.min)&&r.formaEspecialista.controls.edad.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaEspecialista.controls.edad.errors?null:r.formaEspecialista.controls.edad.errors.max)&&r.formaEspecialista.controls.edad.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaEspecialista.controls.edad.errors?null:r.formaEspecialista.controls.edad.errors.pattern)&&r.formaEspecialista.controls.edad.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaEspecialista.controls.dnidoc.errors?null:r.formaEspecialista.controls.dnidoc.errors.required)&&r.formaEspecialista.controls.dnidoc.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaEspecialista.controls.dnidoc.errors?null:r.formaEspecialista.controls.dnidoc.errors.pattern)&&r.formaEspecialista.controls.dnidoc.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaEspecialista.controls.dnidoc.errors?null:r.formaEspecialista.controls.dnidoc.errors.minlength)&&r.formaEspecialista.controls.dnidoc.touched),h.xp6(7),h.Q6J("ngForOf",r.listadoEspecialidades),h.xp6(1),h.Q6J("ngIf",(null==r.formaEspecialista.controls.especialidad.errors?null:r.formaEspecialista.controls.especialidad.errors.required)&&r.formaEspecialista.controls.especialidad.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaEspecialista.controls.email.errors?null:r.formaEspecialista.controls.email.errors.required)&&r.formaEspecialista.controls.email.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaEspecialista.controls.email.errors?null:r.formaEspecialista.controls.email.errors.email)&&r.formaEspecialista.controls.email.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaEspecialista.controls.password.errors?null:r.formaEspecialista.controls.password.errors.required)&&r.formaEspecialista.controls.password.touched),h.xp6(1),h.Q6J("ngIf",(null==r.formaEspecialista.controls.password.errors?null:r.formaEspecialista.controls.password.errors.minlength)&&r.formaEspecialista.controls.password.touched),h.xp6(5),h.Q6J("ngIf",(null==r.formaEspecialista.controls.imagen.errors?null:r.formaEspecialista.controls.imagen.errors.required)&&r.formaEspecialista.controls.imagen.touched),h.xp6(2),h.Q6J("ngIf",r.spinnerImgSubiendose),h.xp6(2),h.Q6J("disabled",r.formaEspecialista.invalid))},directives:[DI,pI,l0,r0,HA,TI,Pn,AI,zR,WR,$n],styles:[".contenedorRegistro[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:45%;background-color:#fff}label[_ngcontent-%COMP%]{font-size:13px;font-style:bold;font-weight:700;color:#55595c}button[_ngcontent-%COMP%]{border-radius:50px;background:#e12454;color:#fff;border-color:#e12454;display:inline-block;font-size:10px;font-size:.7rem;font-weight:700;letter-spacing:.5px;padding:.5rem 1rem;font-family:Exo,sans-serif;text-transform:uppercase;border:2px solid transparent;transition:all .35s ease;width:30%}button[_ngcontent-%COMP%]:hover{background:#223a66;color:#fff;border-color:#223a66}.divh5[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:5px;background:#e12454;color:#fff;height:25px;padding-top:10px}.contenedorPregunta[_ngcontent-%COMP%]{border:1px solid red;display:flex;justify-content:center}.feature-item[_ngcontent-%COMP%]{flex-basis:35%;margin:0 10px;padding:40px 30px;background-color:#fff;border-radius:15px;box-shadow:0 0 30px #002a6a1a}.feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#223a66}.feature-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#223a66}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.feature-section.border-top[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.05)!important}.btnEspecialista[_ngcontent-%COMP%]{background:#223a66;color:#fff;border-color:#223a66;width:35%}.btnEspecialista[_ngcontent-%COMP%]:hover{background:#e12454;color:#fff;border-color:#e12454}"]}),n})();function tF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),h._UZ(4,"div",7),h.TgZ(5,"span"),h._uU(6,"24 Hours Service"),h.qZA(),h.TgZ(7,"h4",8),h._uU(8,"Registro paciente"),h.qZA(),h._UZ(9,"img",9),h.TgZ(10,"ul",10)(11,"li",11),h._uU(12,"Sun - Wed : "),h.TgZ(13,"span"),h._uU(14,"8:00 - 17:00"),h.qZA()(),h.TgZ(15,"li",11),h._uU(16,"Thu - Fri : "),h.TgZ(17,"span"),h._uU(18,"9:00 - 17:00"),h.qZA()()(),h.TgZ(19,"button",12),h.NdJ("click",function(){return h.CHM(t),h.oxw().tipo="paciente"}),h._uU(20,"Registro paciente"),h.qZA()(),h.TgZ(21,"div",6),h._UZ(22,"div",7),h.TgZ(23,"span"),h._uU(24,"Timing schedule"),h.qZA(),h.TgZ(25,"h4",8),h._uU(26,"Registro especialista"),h.qZA(),h._UZ(27,"img",13),h.TgZ(28,"ul",10)(29,"li",11),h._uU(30,"Sun - Wed : "),h.TgZ(31,"span"),h._uU(32,"8:00 - 17:00"),h.qZA()(),h.TgZ(33,"li",11),h._uU(34,"Thu - Fri : "),h.TgZ(35,"span"),h._uU(36,"9:00 - 17:00"),h.qZA()()(),h.TgZ(37,"button",14),h.NdJ("click",function(){return h.CHM(t),h.oxw().tipo="especialista"}),h._uU(38,"Registro especialista"),h.qZA()()()()()}}function nF(n,e){1&n&&(h.TgZ(0,"div"),h._UZ(1,"app-registro-paciente"),h.qZA())}function rF(n,e){1&n&&(h.TgZ(0,"div"),h._UZ(1,"app-registro-especialista"),h.qZA())}const iF=[{path:"",redirectTo:"bienvenido",pathMatch:"full"},{path:"registro",component:(()=>{class n{constructor(){this.mensaje=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-registro"]],decls:4,vars:3,consts:[[1,"container","contenedorPagina",2,"margin-top","100px","height","400px"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-lg-12"],[1,"feature-block","contenedorPregunta"],[1,"feature-item","mb-5","mb-lg-0"],[1,"feature-icon","mb-4"],[1,"mb-3"],["src","../../../assets/imgRegistro/paciente1.png","alt","","width","70px","height","70px"],[1,"w-hours","list-unstyled"],[1,"d-flex","justify-content-between"],[1,"btnRegistro",3,"click"],["src","../../../assets/imgRegistro/especialista1.png","alt","","width","65px","height","64px"],[1,"btnEspecialista",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,tF,39,0,"div",1),h.YNc(2,nF,2,0,"div",2),h.YNc(3,rF,2,0,"div",2),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",!r.tipo),h.xp6(1),h.Q6J("ngIf","paciente"==r.tipo),h.xp6(1),h.Q6J("ngIf","especialista"==r.tipo))},directives:[Pn,kk,eF],styles:[".contenedorRegistro[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:45%;background-color:#fff}button[_ngcontent-%COMP%]{border-radius:50px;background:#e12454;color:#fff;border-color:#e12454;display:inline-block;font-size:10px;font-size:.7rem;font-weight:700;letter-spacing:.5px;padding:.5rem 1rem;font-family:Exo,sans-serif;text-transform:uppercase;border:2px solid transparent;transition:all .35s ease;width:30%}button[_ngcontent-%COMP%]:hover{background:#223a66;color:#fff;border-color:#223a66}.divh5[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:5px;background:#e12454;color:#fff;height:25px;padding-top:10px}.contenedorPregunta[_ngcontent-%COMP%]{display:flex;justify-content:center}.feature-item[_ngcontent-%COMP%]{flex-basis:35%;margin:0 10px;padding:40px 30px;background-color:#fff;border-radius:15px;box-shadow:0 0 30px #002a6a1a}.feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#223a66}.feature-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#223a66}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.feature-section.border-top[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.05)!important}.btnEspecialista[_ngcontent-%COMP%]{background:#223a66;color:#fff;border-color:#223a66;width:35%}.btnEspecialista[_ngcontent-%COMP%]:hover{background:#e12454;color:#fff;border-color:#e12454}"]}),n})()},{path:"bienvenido",component:PI},{path:"login",component:yk}];let sF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Lh.forRoot(iF)],Lh]}),n})();const a1=function(){return["/login"]};function oF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",11)(1,"button",12),h.NdJ("click",function(){return h.CHM(t),h.oxw().CerrarSesion()}),h._uU(2," Log Out"),h.qZA()()}2&n&&(h.xp6(1),h.Q6J("routerLink",h.DdM(1,a1)))}const aF=function(){return["/registro"]};function uF(n,e){1&n&&(h.TgZ(0,"div",11)(1,"button",13),h._uU(2,"Registro"),h.qZA(),h.TgZ(3,"button",14),h._uU(4,"LogIn"),h.qZA()()),2&n&&(h.xp6(1),h.Q6J("routerLink",h.DdM(2,aF)),h.xp6(2),h.Q6J("routerLink",h.DdM(3,a1)))}let lF=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.usuarioLogueado=this.authService.getCurrentUser(),this.estaLogueado=null,this.ObtenerUsuarioLogueado()}ngOnInit(){}ObtenerUsuarioLogueado(){this.authService.getCurrentUser().subscribe(t=>{console.log("obtener usuario log: "+(null==t?void 0:t.email)),this.estaLogueado=!!t})}CerrarSesion(){this.estaLogueado=!1,this.authService.logOut()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dI),h.Y36(rr))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-navbar"]],decls:25,vars:4,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top",2,"background","#223a66"],[1,"container-fluid"],["src","../../../assets/imgnavbar/clinicaLogo.png","alt","","width","50px",2,"border-radius","90px","margin-left","25px","margin-right","20px"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-md-0"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","#",1,"nav-link"],["class","text-end",4,"ngIf"],[1,"text-end"],["type","button",1,"btn","btn-outline-light","me-2",3,"routerLink","click"],["type","button",1,"btn","btn-outline-light","me-2",3,"routerLink"],["type","button",1,"btn",2,"background","#e12454","color","#fff","border-color","#e12454",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1),h._UZ(2,"img",2),h.TgZ(3,"button",3),h._UZ(4,"span",4),h.qZA(),h.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),h._uU(9,"Home"),h.qZA()(),h.TgZ(10,"li",7)(11,"a",9),h._uU(12,"Link"),h.qZA()(),h.TgZ(13,"li",7)(14,"a",9),h._uU(15,"Link"),h.qZA()(),h.TgZ(16,"li",7)(17,"a",9),h._uU(18,"Link"),h.qZA()(),h.TgZ(19,"li",7)(20,"a",9),h._uU(21,"Link"),h.qZA()()(),h.YNc(22,oF,3,2,"div",10),h.ALo(23,"async"),h.YNc(24,uF,5,4,"div",10),h.qZA()()()),2&t&&(h.xp6(22),h.Q6J("ngIf",h.lcZ(23,2,r.usuarioLogueado)),h.xp6(2),h.Q6J("ngIf",!r.estaLogueado))},directives:[Pn,Ul],pipes:[lh],styles:['@import"https://fonts.googleapis.com/css?family=Exo:500,600,700|Roboto&display=swap";nav[_ngcontent-%COMP%]{height:100px}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:600;padding:10px 15px;color:#fff;font-family:Exo,sans-serif;text-transform:capitalize;font-size:16px;transition:all .25s ease}']}),n})(),cF=(()=>{class n{constructor(){this.title="TP-ClinicaOnline-FlorenciaColodro"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"app-navbar")(1,"router-outlet")},directives:[lF,kl],styles:[""]}),n})();const u1_firebaseConfig={apiKey:"AIzaSyDf91SfZrf0ZDfxJ8LyDA_5E96or6f3YzA",authDomain:"tp-clinicaonline-fc.firebaseapp.com",projectId:"tp-clinicaonline-fc",storageBucket:"tp-clinicaonline-fc.appspot.com",messagingSenderId:"426651713655",appId:"1:426651713655:web:f457eb0da7012d31a68672"};let dF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[cF]}),n.\u0275inj=h.cJS({providers:[],imports:[[Ma,sF,gk,s1,pi.hO.initializeApp(u1_firebaseConfig)]]}),n})();(0,h.G48)(),vu().bootstrapModule(dF).catch(n=>console.error(n))},5867:(Je,we,N)=>{N.d(we,{Mq:()=>h.getApp,C6:()=>h.getApps});var h=N(9681);(0,h.registerVersion)("firebase","9.8.2","app")},127:(Je,we,N)=>{N.d(we,{Z:()=>h.Z});var h=N(3942);h.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Je,we,N)=>{N.r(we);var h=N(5861),X=N(3942),O=N(2090),ue=N(9681),re=N(655),pe=N(1877),le=N(4859);const Re=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new pe.Yd("@firebase/auth");function Ke(y,...f){qe.logLevel<=pe.in.ERROR&&qe.error(`Auth (${ue.SDK_VERSION}): ${y}`,...f)}function Te(y,...f){throw Be(y,...f)}function Ee(y,...f){return Be(y,...f)}function be(y,f,g){const v=Object.assign(Object.assign({},Ve()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function je(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Te(y,"argument-error"),be(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return he.create(y,...f)}function j(y,f,...g){if(!y)throw Be(f,...g)}function ve(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ke(f),new Error(f)}function W(y,f){y||ve(f)}const ie=new Map;function ee(y){W(y instanceof Function,"Expected a class definition");let f=ie.get(y);return f?(W(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ie.set(y,f),f)}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ot(){return"http:"===Vt()||"https:"===Vt()}function Vt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Kt{constructor(f,g){this.shortDelay=f,this.longDelay=g,W(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ot(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vn(y,f){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Jt{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wr=new Kt(3e4,6e4);function $t(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Nt(y,f,g,v){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,h.Z)(function*(y,f,g,v,T={}){return Kr(y,T,(0,h.Z)(function*(){let P={},Z={};v&&("GET"===f?Z=v:P={body:JSON.stringify(v)});const fe=(0,O.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Jt.fetch()(ws(y,y.config.apiHost,g,fe),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Kr(y,f,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},zt),f);try{const T=new Yr(y),P=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw bi(y,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const fe=P.ok?Z.errorMessage:Z.error.message,[Fe,We]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw bi(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Fe)throw bi(y,"email-already-in-use",Z);if("USER_DISABLED"===Fe)throw bi(y,"user-disabled",Z);const ht=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(We)throw be(y,ht,We);Te(y,ht)}}catch(T){if(T instanceof O.ZR)throw T;Te(y,"network-request-failed")}})).apply(this,arguments)}function br(y,f,g,v){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,h.Z)(function*(y,f,g,v,T={}){const P=yield Nt(y,f,g,v,T);return"mfaPendingCredential"in P&&Te(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function ws(y,f,g,v){const T=`${f}${g}?${v}`;return y.config.emulator?vn(y.config,T):`${y.config.apiScheme}://${T}`}class Yr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(Ee(this.auth,"network-request-failed")),wr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bi(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=Ee(y,f,v);return T.customData._tokenResponse=g,T}function Qr(){return(Qr=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function fn(y,f){return En.apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zs(y,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function jn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Co(){return(Co=(0,h.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),T=rt(v);j(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const P="object"==typeof T.firebase?T.firebase:void 0,Z=null==P?void 0:P.sign_in_provider;return{claims:T,token:v,authTime:jn(Ut(T.auth_time)),issuedAtTime:jn(Ut(T.iat)),expirationTime:jn(Ut(T.exp)),signInProvider:Z||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function Ut(y){return 1e3*Number(y)}function rt(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(g);return T?JSON.parse(T):(Ke("Failed to decode base64 JWT payload"),null)}catch(T){return Ke("Caught error parsing JWT payload as JSON",T),null}}function lr(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&kt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function kt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ws{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class cr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=jn(this.lastLoginAt),this.creationTime=jn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dr(y){return L.apply(this,arguments)}function L(){return(L=(0,h.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),T=yield lr(y,Zs(g,{idToken:v}));j(null==T?void 0:T.users.length,g,"internal-error");const P=T.users[0];y._notifyReloadListener(P);const Z=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?H(P.providerUserInfo):[],fe=Ie(y.providerData,Z),ht=!!y.isAnonymous&&!(y.email&&P.passwordHash||(null==fe?void 0:fe.length)),at={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:fe,metadata:new cr(P.createdAt,P.lastLoginAt),isAnonymous:ht};Object.assign(y,at)})).apply(this,arguments)}function q(){return(q=(0,h.Z)(function*(y){const f=(0,O.m9)(y);yield dr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ie(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function H(y){return y.map(f=>{var{providerId:g}=f,v=(0,re._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function xe(){return(xe=(0,h.Z)(function*(y,f){const g=yield Kr(y,{},(0,h.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:P}=y.config,Z=ws(y,T,"/v1/token",`key=${P}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",Jt.fetch()(Z,{method:"POST",headers:fe,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(void 0!==f.idToken,"internal-error"),j(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function pt(y){const f=rt(y);return j(f,"internal-error"),j(void 0!==f.exp,"internal-error"),j(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,h.Z)(function*(){return j(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:P,expiresIn:Z}=yield function J(y,f){return xe.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(T,P,Number(Z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:T,expirationTime:P}=g,Z=new Qe;return v&&(j("string"==typeof v,"internal-error",{appName:f}),Z.refreshToken=v),T&&(j("string"==typeof T,"internal-error",{appName:f}),Z.accessToken=T),P&&(j("number"==typeof P,"internal-error",{appName:f}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return ve("not implemented")}}function lt(y,f){j("string"==typeof y||void 0===y,"internal-error",{appName:f})}class _t{constructor(f){var{uid:g,auth:v,stsTokenManager:T}=f,P=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ws(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new cr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const v=yield lr(g,g.stsTokenManager.getToken(g.auth,f));return j(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function Ii(y){return Co.apply(this,arguments)}(this,f)}reload(){return function G(y){return q.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new _t(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield dr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield lr(f,function dt(y,f){return Qr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,T,P,Z,fe,Fe,We,ht;const at=null!==(v=g.displayName)&&void 0!==v?v:void 0,_n=null!==(T=g.email)&&void 0!==T?T:void 0,fi=null!==(P=g.phoneNumber)&&void 0!==P?P:void 0,Vl=null!==(Z=g.photoURL)&&void 0!==Z?Z:void 0,my=null!==(fe=g.tenantId)&&void 0!==fe?fe:void 0,ea=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,cd=null!==(We=g.createdAt)&&void 0!==We?We:void 0,dd=null!==(ht=g.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:Oh,emailVerified:hd,isAnonymous:rr,providerData:kh,stsTokenManager:Fh}=g;j(Oh&&Fh,f,"internal-error");const Ul=Qe.fromJSON(this.name,Fh);j("string"==typeof Oh,f,"internal-error"),lt(at,f.name),lt(_n,f.name),j("boolean"==typeof hd,f,"internal-error"),j("boolean"==typeof rr,f,"internal-error"),lt(fi,f.name),lt(Vl,f.name),lt(my,f.name),lt(ea,f.name),lt(cd,f.name),lt(dd,f.name);const Bl=new _t({uid:Oh,auth:f,email:_n,emailVerified:hd,displayName:at,isAnonymous:rr,photoURL:Vl,phoneNumber:fi,tenantId:my,stsTokenManager:Ul,createdAt:cd,lastLoginAt:dd});return kh&&Array.isArray(kh)&&(Bl.providerData=kh.map(ju=>Object.assign({},ju))),ea&&(Bl._redirectEventId=ea),Bl}static _fromIdTokenResponse(f,g,v=!1){return(0,h.Z)(function*(){const T=new Qe;T.updateFromServerResponse(g);const P=new _t({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield dr(P),P})()}}const mt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,h.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,h.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,h.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function kn(y,f,g){return`firebase:${y}:${f}:${g}`}class Ir{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:T,name:P}=this.auth;this.fullUserKey=kn(this.userKey,T.apiKey,P),this.fullPersistenceKey=kn("persistence",T.apiKey,P),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?_t._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,h.Z)(function*(){if(!g.length)return new Ir(ee(mt),f,v);const T=(yield Promise.all(g.map(function(){var We=(0,h.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return We.apply(this,arguments)}}()))).filter(We=>We);let P=T[0]||ee(mt);const Z=kn(v,f.config.apiKey,f.name);let fe=null;for(const We of g)try{const ht=yield We._get(Z);if(ht){const at=_t._fromJSON(f,ht);We!==P&&(fe=at),P=We;break}}catch(ht){}const Fe=T.filter(We=>We._shouldAllowMigration);return P._shouldAllowMigration&&Fe.length?(P=Fe[0],fe&&(yield P._set(Z,fe.toJSON())),yield Promise.all(g.map(function(){var We=(0,h.Z)(function*(ht){if(ht!==P)try{yield ht._remove(Z)}catch(at){}});return function(ht){return We.apply(this,arguments)}}())),new Ir(P,f,v)):new Ir(P,f,v)})()}}function au(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Fn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ga(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(es(f))return"Blackberry";if(Ln(f))return"Webos";if(uu(f))return"Safari";if((f.includes("chrome/")||ma(f))&&!f.includes("edge/"))return"Chrome";if(Cr(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ga(y=(0,O.z$)()){return/firefox\//i.test(y)}function uu(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ma(y=(0,O.z$)()){return/crios\//i.test(y)}function Fn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Cr(y=(0,O.z$)()){return/android/i.test(y)}function es(y=(0,O.z$)()){return/blackberry/i.test(y)}function Ln(y=(0,O.z$)()){return/webos/i.test(y)}function kr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function bs(y=(0,O.z$)()){return kr(y)||Cr(y)||Ln(y)||es(y)||/windows phone/i.test(y)||Fn(y)}function Do(y,f=[]){let g;switch(y){case"Browser":g=au((0,O.z$)());break;case"Worker":g=`${au((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ue.SDK_VERSION}/${v}`}class Fr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=P=>new Promise((Z,fe)=>{try{Z(f(P))}catch(Fe){fe(Fe)}});v.onAbort=g,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const v=[];try{for(const T of g.queue)yield T(f),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const P of v)try{P()}catch(Z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class ze{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yt(this),this.idTokenSubscription=new Yt(this),this.beforeStateQueue=new Fr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=ee(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,P;if(!v._deleted&&(v.persistenceManager=yield Ir.create(v,f),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(Z){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(P=v.currentUser)||void 0===P?void 0:P.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var v;const T=yield g.assertedPersistence.getCurrentUser();let P=T,Z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const fe=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=null==P?void 0:P._redirectEventId,We=yield g.tryRedirectSignIn(f);(!fe||fe===Fe)&&(null==We?void 0:We.user)&&(P=We.user,Z=!0)}if(!P)return g.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield g.beforeStateQueue.runMiddleware(P)}catch(fe){P=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(fe))}return P?g.reloadAndSetCurrentUserOrClear(P):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===P._redirectEventId?g.directlySetCurrentUser(P):g.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield dr(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ye(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&j(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,h.Z)(function*(){if(!v._deleted)return f&&j(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,h.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(ee(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,h.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&ee(f)||g._popupRedirectResolver;j(v,g,"argument-error"),g.redirectPersistenceManager=yield Ir.create(g,[ee(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,T){if(this._deleted)return()=>{};const P="function"==typeof g?g:g.next.bind(g),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof g?f.addObserver(g,v,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Do(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function it(y){return(0,O.m9)(y)}class Yt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function ki(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Ci{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ve("not implemented")}_getIdTokenResponse(f){return ve("not implemented")}_linkToIdToken(f,g){return ve("not implemented")}_getReauthenticationResolver(f){return ve("not implemented")}}function wn(y,f){return It.apply(this,arguments)}function It(){return(It=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:resetPassword",$t(y,f))})).apply(this,arguments)}function _a(y,f){return Is.apply(this,arguments)}function Is(){return(Is=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function lu(y,f){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:update",$t(y,f))})).apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(y,f){return br(y,"POST","/v1/accounts:signInWithPassword",$t(y,f))})).apply(this,arguments)}function Ds(y,f){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:sendOobCode",$t(y,f))})).apply(this,arguments)}function Xt(y,f){return cu.apply(this,arguments)}function cu(){return(cu=(0,h.Z)(function*(y,f){return Ds(y,f)})).apply(this,arguments)}function va(y,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(y,f){return Ds(y,f)})).apply(this,arguments)}function Fi(y,f){return du.apply(this,arguments)}function du(){return(du=(0,h.Z)(function*(y,f){return Ds(y,f)})).apply(this,arguments)}function Ac(y,f){return Li.apply(this,arguments)}function Li(){return(Li=(0,h.Z)(function*(y,f){return Ds(y,f)})).apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(y,f){return br(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,f))})).apply(this,arguments)}function Sc(){return(Sc=(0,h.Z)(function*(y,f){return br(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,f))})).apply(this,arguments)}class hr extends Ci{constructor(f,g,v,T=null){super("password",v),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new hr(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new hr(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function $n(y,f){return Ys.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Vi(y,f){return cl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,h.Z)(function*(){switch(v.signInMethod){case"password":return _a(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function cp(y,f){return Sc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ts(y,f){return xc.apply(this,arguments)}function xc(){return(xc=(0,h.Z)(function*(y,f){return br(y,"POST","/v1/accounts:signInWithIdp",$t(y,f))})).apply(this,arguments)}class ts extends Ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ts(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=g,P=(0,re._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const Z=new ts(v,T);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(f){return Ts(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Ts(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ts(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function lh(y,f){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:sendVerificationCode",$t(y,f))})).apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(y,f){return br(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,f))})).apply(this,arguments)}function Rc(){return(Rc=(0,h.Z)(function*(y,f){const g=yield br(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,f));if(g.temporaryProof)throw bi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const fp={USER_NOT_FOUND:"user-not-found"};function Pc(){return(Pc=(0,h.Z)(function*(y,f){return br(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),fp)})).apply(this,arguments)}class To extends Ci{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new To({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new To({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function dl(y,f){return As.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function hp(y,f){return Rc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function pp(y,f){return Pc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:P}=f;return v||g||T||P?new To({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:P}):null}}class hu{constructor(f){var g,v,T,P,Z,fe;const Fe=(0,O.zd)((0,O.pd)(f)),We=null!==(g=Fe.apiKey)&&void 0!==g?g:null,ht=null!==(v=Fe.oobCode)&&void 0!==v?v:null,at=function ch(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);j(We&&ht&&at,"argument-error"),this.apiKey=We,this.operation=at,this.code=ht,this.continueUrl=null!==(P=Fe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Fe.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(fe=Fe.tenantId)&&void 0!==fe?fe:null}static parseLink(f){const g=function Ea(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new hu(g)}catch(v){return null}}}let Oc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return hr._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=hu.parseLink(v);return j(T,"argument-error"),hr._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class fr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Qs extends fr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ui extends Qs{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return j("providerId"in g&&"signInMethod"in g,"argument-error"),ts._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ui.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ui.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:P,nonce:Z,providerId:fe}=f;if(!v&&!T&&!g&&!P||!fe)return null;try{return new Ui(fe)._credential({idToken:g,accessToken:v,nonce:Z,pendingToken:P})}catch(Fe){return null}}}let Ao=(()=>{class y extends Qs{constructor(){super("facebook.com")}static credential(g){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),kc=(()=>{class y extends Qs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(P){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),dh=(()=>{class y extends Qs{constructor(){super("github.com")}static credential(g){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Js extends Ci{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Ts(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Ts(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ts(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:P}=g;return v&&T&&P&&v===T?new Js(v,P):null}static _create(f,g){return new Js(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dr extends fr{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Dr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Dr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Js.fromJSON(f);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Js._create(v,g)}catch(T){return null}}}let Lc=(()=>{class y extends Qs{constructor(){super("twitter.com")}static credential(g,v){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(P){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Tr(y,f){return xo.apply(this,arguments)}function xo(){return(xo=(0,h.Z)(function*(y,f){return br(y,"POST","/v1/accounts:signUp",$t(y,f))})).apply(this,arguments)}class ei{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,T=!1){return(0,h.Z)(function*(){const P=yield _t._fromIdTokenResponse(f,v,T),Z=hl(v);return new ei({user:P,providerId:Z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=hl(v);return new ei({user:f,providerId:T,_tokenResponse:v,operationType:g})})()}}function hl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function fl(){return(fl=(0,h.Z)(function*(y){var f;const g=it(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ei({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Tr(g,{returnSecureToken:!0}),T=yield ei._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Mo extends O.ZR{constructor(f,g,v,T){var P;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Mo.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,T){return new Mo(f,g,v,T)}}function pl(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Mo._fromErrorAndOperation(y,P,f,v):P})}function Bi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function en(){return(en=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y);yield Zt(!0,g,f);const{providerUserInfo:v}=yield fn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Bi(v||[]);return g.providerData=g.providerData.filter(P=>T.has(P.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function wa(y,f){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(y,f,g=!1){const v=yield lr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ei._forOperation(y,"link",v)})).apply(this,arguments)}function Zt(y,f,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(y,f,g){yield dr(f);const T=!1===y?"provider-already-linked":"no-such-provider";j(Bi(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function fu(y,f){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,h.Z)(function*(y,f,g=!1){const{auth:v}=y,T="reauthenticate";try{const P=yield lr(y,pl(v,T,f,y),g);j(P.idToken,v,"internal-error");const Z=rt(P.idToken);j(Z,v,"internal-error");const{sub:fe}=Z;return j(y.uid===fe,v,"user-mismatch"),ei._forOperation(y,T,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Te(v,"user-mismatch"),P}})).apply(this,arguments)}function Xn(y,f){return gl.apply(this,arguments)}function gl(){return(gl=(0,h.Z)(function*(y,f,g=!1){const v="signIn",T=yield pl(y,v,f),P=yield ei._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function dn(y,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,h.Z)(function*(y,f){return Xn(it(y),f)})).apply(this,arguments)}function er(y,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y);return yield Zt(!1,g,f.providerId),wa(g,f)})).apply(this,arguments)}function ns(y,f){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(y,f){return fu((0,O.m9)(y),f)})).apply(this,arguments)}function Di(y,f){return $i.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(y,f){return br(y,"POST","/v1/accounts:signInWithCustomToken",$t(y,f))})).apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(y,f){const g=it(y),v=yield Di(g,{token:f,returnSecureToken:!0}),T=yield ei._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Po{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?pu._fromServerResponse(f,g):Te(f,"internal-error")}}class pu extends Po{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new pu(g)}}function Ca(y,f,g){var v;j((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),j(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Da(){return(Da=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&Ca(v,T,g),yield va(v,T)})).apply(this,arguments)}function _l(){return(_l=(0,h.Z)(function*(y,f,g){yield wn((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Rt(){return(Rt=(0,h.Z)(function*(y,f){yield lu((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function gu(y,f){return un.apply(this,arguments)}function un(){return(un=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield wn(g,{oobCode:f}),T=v.requestType;switch(j(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(v.mfaInfo,g,"internal-error");default:j(v.email,g,"internal-error")}let P=null;return v.mfaInfo&&(P=Po._fromServerResponse(it(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:P},operation:T}})).apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(y,f){const{data:g}=yield gu((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(y,f,g){const v=it(y),T=yield Tr(v,{returnSecureToken:!0,email:f,password:g}),P=yield ei._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(P.user),P})).apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};j(g.handleCodeInApp,v,"argument-error"),g&&Ca(v,T,g),yield Fi(v,T)})).apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=Oc.credentialWithLink(f,g||Ne());return j(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),dn(v,T)})).apply(this,arguments)}function rs(y,f){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:createAuthUri",$t(y,f))})).apply(this,arguments)}function Ti(){return(Ti=(0,h.Z)(function*(y,f){const v={identifier:f,continueUri:ot()?Ne():"http://localhost"},{signinMethods:T}=yield rs((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function _u(){return(_u=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ca(g.auth,T,f);const{email:P}=yield Xt(g.auth,T);P!==y.email&&(yield y.reload())})).apply(this,arguments)}function vu(){return(vu=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ca(v.auth,P,g);const{email:Z}=yield Ac(v.auth,P);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function xa(y,f){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(y,f){return Nt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ra(){return(Ra=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),P={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Z=yield lr(v,xa(v.auth,P));v.displayName=Z.displayName||null,v.photoURL=Z.photoUrl||null;const fe=v.providerData.find(({providerId:Fe})=>"password"===Fe);fe&&(fe.displayName=v.displayName,fe.photoURL=v.photoURL),yield v._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Oo(y,f,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(y,f,g){const{auth:v}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(P.email=f),g&&(P.password=g);const Z=yield lr(y,_a(v,P));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class ko{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class Bc extends ko{constructor(f,g,v,T){super(f,g,v),this.username=T}}class Fo extends ko{constructor(f,g){super(f,"facebook.com",g)}}class Hi extends Bc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class fh extends ko{constructor(f,g){super(f,"google.com",g)}}class Hn extends Bc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function Gi(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Uc(y){var f,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const Z=null===(g=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Z)return new ko(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!v)return null;switch(v){case"facebook.com":return new Fo(P,T);case"github.com":return new Hi(P,T);case"google.com":return new fh(P,T);case"twitter.com":return new Hn(P,T,y.screenName||null);case"custom":case"anonymous":return new ko(P,null);default:return new ko(P,v,T)}}(g)}class is{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new is("enroll",f)}static _fromMfaPendingCredential(f){return new is("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return is._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return is._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Lo{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=it(f),T=g.customData._serverResponse,P=(T.mfaInfo||[]).map(fe=>Po._fromServerResponse(v,fe));j(T.mfaPendingCredential,v,"internal-error");const Z=is._fromMfaPendingCredential(T.mfaPendingCredential);return new Lo(Z,P,function(){var fe=(0,h.Z)(function*(Fe){const We=yield Fe._process(v,Z);delete T.mfaInfo,delete T.mfaPendingCredential;const ht=Object.assign(Object.assign({},T),{idToken:We.idToken,refreshToken:We.refreshToken});switch(g.operationType){case"signIn":const at=yield ei._fromIdTokenResponse(v,g.operationType,ht);return yield v._updateCurrentUser(at.user),at;case"reauthenticate":return j(g.user,v,"internal-error"),ei._forOperation(g.user,g.operationType,ht);default:Te(v,"internal-error")}});return function(Fe){return fe.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function gh(y,f){return Nt(y,"POST","/v2/accounts/mfaEnrollment:start",$t(y,f))}class Hc{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>Po._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Hc(f)}getSession(){var f=this;return(0,h.Z)(function*(){return is._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,h.Z)(function*(){const T=f,P=yield v.getSession(),Z=yield lr(v.user,T._process(v.user.auth,P,g));return yield v.user._updateTokensIfNecessary(Z),v.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),P=yield lr(g.user,function Eu(y,f){return Nt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(y,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Z})=>Z!==v),yield g.user._updateTokensIfNecessary(P);try{yield g.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const wu=new WeakMap,ro="__sak";class Gc{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ro,"1"),this.storage.removeItem(ro),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ni=(()=>{class y extends Gc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _p(){const y=(0,O.z$)();return uu(y)||kr(y)}()&&function Jn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=bs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),P=this.localCache[v];T!==P&&g(v,P,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((fe,Fe,We)=>{this.notifyListeners(fe,We)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(T);if(g.newValue!==fe)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const P=()=>{const fe=this.storage.getItem(T);!v&&this.localCache[T]===fe||this.notifyListeners(T,fe)},Z=this.storage.getItem(T);!function ya(){return(0,O.w1)()&&10===document.documentMode}()||Z===g.newValue||g.newValue===g.oldValue?P():setTimeout(P,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const P of Array.from(T))P(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,P=this;return(0,h.Z)(function*(){yield T().call(P,g,v),P.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,h.Z)(function*(){const P=yield v().call(T,g);return T.localCache[g]=JSON.stringify(P),P})()}_remove(g){var v=()=>super._remove,T=this;return(0,h.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),In=(()=>{class y extends Gc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let qc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(P=>P.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,h.Z)(function*(){const T=g,{eventId:P,eventType:Z,data:fe}=T.data,Fe=v.handlersMap[Z];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const We=Array.from(Fe).map(function(){var at=(0,h.Z)(function*(_n){return _n(T.origin,fe)});return function(_n){return at.apply(this,arguments)}}()),ht=yield function Cl(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(We);T.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:ht})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function qi(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Dl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var T=this;return(0,h.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,fe;return new Promise((Fe,We)=>{const ht=qi("",20);P.port1.start();const at=setTimeout(()=>{We(new Error("unsupported_event"))},v);fe={messageChannel:P,onMessage(_n){const fi=_n;if(fi.data.eventId===ht)switch(fi.data.status){case"ack":clearTimeout(at),Z=setTimeout(()=>{We(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Fe(fi.data.response);break;default:clearTimeout(at),clearTimeout(Z),We(new Error("invalid_response"))}}},T.handlers.add(fe),P.port1.addEventListener("message",fe.onMessage),T.target.postMessage({eventType:f,eventId:ht,data:g},[P.port2])}).finally(()=>{fe&&T.removeMessageHandler(fe)})})()}}function nn(){return window}function Ai(){return void 0!==nn().WorkerGlobalScope&&"function"==typeof nn().importScripts}function Iu(){return(Iu=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Tl="firebaseLocalStorageDb",Vo="firebaseLocalStorage",Uo="fbase_key";class Ms{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function tr(y,f){return y.transaction([Vo],f?"readwrite":"readonly").objectStore(Vo)}function Rs(){const y=indexedDB.open(Tl,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Vo,{keyPath:Uo})}catch(T){g(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Vo)?f(v):(v.close(),yield function Cu(){const y=indexedDB.deleteDatabase(Tl);return new Ms(y).toPromise()}(),f(yield Rs()))}))})}function Bo(y,f,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,h.Z)(function*(y,f,g){const v=tr(y,!0).put({[Uo]:f,value:g});return new Ms(v).toPromise()})).apply(this,arguments)}function io(){return(io=(0,h.Z)(function*(y,f){const g=tr(y,!1).get(f),v=yield new Ms(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function $o(y,f){const g=tr(y,!0).delete(f);return new Ms(g).toPromise()}const Ns=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield Rs()),g.db})()}_withRetries(g){var v=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const P=yield v._openDb();return yield g(P)}catch(P){if(T++>3)throw P;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Ai()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=qc._getInstance(function Zc(){return Ai()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,h.Z)(function*(T,P){return{keyProcessed:(yield g._poll()).includes(P.key)}});return function(T,P){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,h.Z)(function*(T,P){return["keyChanged"]});return function(T,P){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function At(){return Iu.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Dl(g.activeServiceWorker);const P=yield g.sender._send("ping",{},800);!P||(null===(v=P[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=P[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,h.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function zc(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Rs();return yield Bo(g,ro,"1"),yield $o(g,ro),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,h.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(P=>Bo(P,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,h.Z)(function*(){const T=yield v._withRetries(P=>function jo(y,f){return io.apply(this,arguments)}(P,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,h.Z)(function*(){return v._withPendingWrite((0,h.Z)(function*(){return yield v._withRetries(T=>$o(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const v=yield g._withRetries(Z=>{const fe=tr(Z,!1).getAll();return new Ms(fe).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],P=new Set;for(const{fbase_key:Z,value:fe}of v)P.add(Z),JSON.stringify(g.localCache[Z])!==JSON.stringify(fe)&&(g.notifyListeners(Z,fe),T.push(Z));for(const Z of Object.keys(g.localCache))g.localCache[Z]&&!P.has(Z)&&(g.notifyListeners(Z,null),T.push(Z));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const P of Array.from(T))P(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function qn(y,f){return Nt(y,"POST","/v2/accounts/mfaSignIn:start",$t(y,f))}function mn(){return(mn=(0,h.Z)(function*(y){return(yield Nt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zi(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const P=Ee("internal-error");P.customData=T,g(P)},v.type="text/javascript",v.charset="UTF-8",function oo(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function ss(y){return`__${y}${Math.floor(1e6*Math.random())}`}const si=1e12;class yn{constructor(f){this.auth=f,this.counter=si,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new Tu(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||si;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||si))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var v;return null===(v=g._widgets.get(f||si))||void 0===v||v.execute(),""})()}}class Tu{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;j(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function La(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ln=ss("rcb"),vp=new Kt(3e4,6e4);class Wm{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!nn().grecaptcha}load(f,g=""){return j(function qo(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(nn().grecaptcha):new Promise((v,T)=>{const P=nn().setTimeout(()=>{T(Ee(f,"network-request-failed"))},vp.get());nn()[ln]=()=>{nn().clearTimeout(P),delete nn()[ln];const fe=nn().grecaptcha;if(!fe)return void T(Ee(f,"internal-error"));const Fe=fe.render;fe.render=(We,ht)=>{const at=Fe(We,ht);return this.counter++,at},this.hostLanguage=g,v(fe)},zi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ln,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(P),T(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!nn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ur{load(f){return(0,h.Z)(function*(){return new yn(f)})()}clearedOneInstance(){}}const Wc="recaptcha",Os={theme:"light",type:"image"};class ao{constructor(f,g=Object.assign({},Os),v){this.parameters=g,this.type=Wc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=it(v),this.isInvisible="invisible"===this.parameters.size,j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;j(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ur:new Wm,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(P=>{const Z=fe=>{!fe||(f.tokenChangeListeners.delete(Z),P(fe))};f.tokenChangeListeners.add(Z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=nn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){j(ot()&&!Ai(),f.auth,"internal-error"),yield function Au(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Du(y){return mn.apply(this,arguments)}(f.auth);j(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hn{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=To._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function uo(){return(uo=(0,h.Z)(function*(y,f,g){const v=it(y),T=yield zo(v,f,(0,O.m9)(g));return new hn(T,P=>dn(v,P))})).apply(this,arguments)}function Sl(){return(Sl=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield Zt(!1,v,"phone");const T=yield zo(v.auth,f,(0,O.m9)(g));return new hn(T,P=>er(v,P))})).apply(this,arguments)}function Br(){return(Br=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=yield zo(v.auth,f,(0,O.m9)(g));return new hn(T,P=>ns(v,P))})).apply(this,arguments)}function zo(y,f,g){return lo.apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(y,f,g){var v;const T=yield g.verify();try{let P;if(j("string"==typeof T,y,"argument-error"),j(g.type===Wc,y,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const Z=P.session;if("phoneNumber"in P)return j("enroll"===Z.type,y,"internal-error"),(yield gh(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{j("signin"===Z.type,y,"internal-error");const fe=(null===(v=P.multiFactorHint)||void 0===v?void 0:v.uid)||P.multiFactorUid;return j(fe,y,"missing-multi-factor-info"),(yield qn(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield lh(y,{phoneNumber:P.phoneNumber,recaptchaToken:T});return Z}}finally{g._reset()}})).apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(y,f){yield wa((0,O.m9)(y),f)})).apply(this,arguments)}let ho=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=it(g)}verifyPhoneNumber(g,v){return zo(this.auth,g,(0,O.m9)(v))}static credential(g,v){return To._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?To._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function os(y,f){return f?ee(f):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Va extends Ci{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ts(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Ts(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Ts(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function xt(y){return Xn(y.auth,new Va(y),y.bypassAuthState)}function Su(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),fu(g,new Va(y),y.bypassAuthState)}function zn(y){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),wa(g,new Va(y),y.bypassAuthState)})).apply(this,arguments)}class ks{constructor(f,g,v,T,P=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:P,tenantId:Z,error:fe,type:Fe}=f;if(fe)return void g.reject(fe);const We={auth:g.auth,requestUri:v,sessionId:T,tenantId:Z||void 0,postBody:P||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(We))}catch(ht){g.reject(ht)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return xt;case"linkViaPopup":case"linkViaRedirect":return zn;case"reauthViaPopup":case"reauthViaRedirect":return Su;default:Te(this.auth,"internal-error")}}resolve(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wp=new Kt(2e3,1e4);function Fs(){return(Fs=(0,h.Z)(function*(y,f,g){const v=it(y);je(y,f,fr);const T=os(v,g);return new xl(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function xu(){return(xu=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);je(v.auth,f,fr);const T=os(v.auth,g);return new xl(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);je(v.auth,f,fr);const T=os(v.auth,g);return new xl(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let xl=(()=>{class y extends ks{constructor(g,v,T,P,Z){super(g,v,P,Z),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const v=yield g.execute();return j(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,h.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const v=qi();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,wp.get())};g()}}return y.currentPopupAction=null,y})();const Zn=new Map;class Ym extends ks{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let v=Zn.get(g.auth._key());if(!v){try{const P=(yield function Wo(y,f){return Ko.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(P)}catch(T){v=()=>Promise.reject(T)}Zn.set(g.auth._key(),v)}return g.bypassAuthState||Zn.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Ko(){return(Ko=(0,h.Z)(function*(y,f){const g=F(f),v=M(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function fo(y,f){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,h.Z)(function*(y,f){return M(y)._set(F(f),"true")})).apply(this,arguments)}function D(y,f){Zn.set(y._key(),f)}function M(y){return ee(y._redirectPersistence)}function F(y){return kn("pendingRedirect",y.config.apiKey,y.name)}function ge(){return(ge=(0,h.Z)(function*(y,f,g){const v=it(y);je(y,f,fr);const T=os(v,g);return yield fo(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);je(v.auth,f,fr);const T=os(v.auth,g);yield fo(T,v.auth);const P=yield ui(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function pr(){return(pr=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);je(v.auth,f,fr);const T=os(v.auth,g);yield Zt(!1,v,f.providerId),yield fo(T,v.auth);const P=yield ui(v);return T._openRedirect(v.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function as(){return(as=(0,h.Z)(function*(y,f){return yield it(y)._initializationPromise,jr(y,f,!1)})).apply(this,arguments)}function jr(y,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(y,f,g=!1){const v=it(y),T=os(v,f),Z=yield new Ym(v,T,g).execute();return Z&&!g&&(delete Z.user._redirectEventId,yield v._persistUserIfCurrent(Z.user),yield v._setRedirectUser(null,f)),Z})).apply(this,arguments)}function ui(y){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(y){const f=qi(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Ru{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function bp(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pu(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!Pu(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(Ee(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ml(f))}saveEventToCache(f){this.cachedEventUids.add(Ml(f)),this.lastProcessedEventTime=Date.now()}}function Ml(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Pu({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ip(y){return mh.apply(this,arguments)}function mh(){return(mh=(0,h.Z)(function*(y,f={}){return Nt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const po=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rl=/^https?/;function Cp(){return(Cp=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ip(y);for(const g of f)try{if(Dp(g))return}catch(v){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function Dp(y){const f=Ne(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Z.hostname===v}if(!Rl.test(g))return!1;if(po.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Jm=new Kt(3e4,6e4);function Tp(){const y=nn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Nu=null;function go(y){return Nu=Nu||function yh(y){return new Promise((f,g)=>{var v,T,P;function Z(){Tp(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Tp(),g(Ee(y,"network-request-failed"))},timeout:Jm.get()})}if(null===(T=null===(v=nn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=nn().gapi)||void 0===P?void 0:P.load)){const fe=ss("iframefcb");return nn()[fe]=()=>{gapi.load?Z():g(Ee(y,"network-request-failed"))},zi(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Fe=>g(Fe))}Z()}}).catch(f=>{throw Nu=null,f})}(y),Nu}const mo=new Kt(5e3,15e3),Xm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ou=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ey(y){const f=y.config;j(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?vn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:ue.SDK_VERSION},T=Ou.get(y.config.apiHost);T&&(v.eid=T);const P=y._getFrameworks();return P.length&&(v.fw=P.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function Yo(){return Yo=(0,h.Z)(function*(y){const f=yield go(y),g=nn().gapi;return j(g,y,"internal-error"),f.open({where:document.body,url:ey(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xm,dontclear:!0},v=>new Promise(function(){var T=(0,h.Z)(function*(P,Z){yield v.restyle({setHideOnLeave:!1});const fe=Ee(y,"network-request-failed"),Fe=nn().setTimeout(()=>{Z(fe)},mo.get());function We(){nn().clearTimeout(Fe),P(v)}v.ping(We).then(We,()=>{Z(fe)})});return function(P,Z){return T.apply(this,arguments)}}()))}),Yo.apply(this,arguments)}const _h={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ap{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ls(y,f,g,v,T,P){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:ue.SDK_VERSION,eventId:T};if(f instanceof fr){f.setDefaultLanguage(y.languageCode),Z.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,We]of Object.entries(P||{}))Z[Fe]=We}if(f instanceof Qs){const Fe=f.getScopes().filter(We=>""!==We);Fe.length>0&&(Z.scopes=Fe.join(","))}y.tenantId&&(Z.tid=y.tenantId);const fe=Z;for(const Fe of Object.keys(fe))void 0===fe[Fe]&&delete fe[Fe];return`${function Nl({config:y}){return y.emulator?vn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(fe).slice(1)}`}const nd="webStorageSupport";class rd extends class h0{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new rd(f)}_finalizeEnroll(f,g,v){return function no(y,f){return Nt(y,"POST","/v2/accounts/mfaEnrollment:finalize",$t(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function so(y,f){return Nt(y,"POST","/v2/accounts/mfaSignIn:finalize",$t(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xp=(()=>{class y{constructor(){}static assertion(g){return rd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Mp="@firebase/auth";class Pp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var T;f((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vs(){return window}function ja(){return(ja=(0,h.Z)(function*(y,f,g){var v;const{BuildInfo:T}=Vs();W(f.sessionId,"AuthEvent did not contain a session ID");const P=yield bh(f.sessionId),Z={};return kr()?Z.ibi=T.packageName:Cr()?Z.apn=T.packageName:Te(y,"operation-not-supported-in-this-environment"),T.displayName&&(Z.appDisplayName=T.displayName),Z.sessionId=P,Ls(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,Z)})).apply(this,arguments)}function sd(){return(sd=(0,h.Z)(function*(y){const{BuildInfo:f}=Vs(),g={};kr()?g.iosBundleId=f.packageName:Cr()?g.androidPackageName=f.packageName:Te(y,"operation-not-supported-in-this-environment"),yield Ip(y,g)})).apply(this,arguments)}function kp(){return(kp=(0,h.Z)(function*(y,f,g){const{cordova:v}=Vs();let T=()=>{};try{yield new Promise((P,Z)=>{let fe=null;function Fe(){var at;P();const _n=null===(at=v.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof _n&&_n(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function We(){fe||(fe=window.setTimeout(()=>{Z(Ee(y,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===(null==document?void 0:document.visibilityState)&&We()}f.addPassiveListener(Fe),document.addEventListener("resume",We,!1),Cr()&&document.addEventListener("visibilitychange",ht,!1),T=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",We,!1),document.removeEventListener("visibilitychange",ht,!1),fe&&window.clearTimeout(fe)}})}finally{T()}})).apply(this,arguments)}function bh(y){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,h.Z)(function*(y){const f=Ih(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ih(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function f0(y){(0,ue._registerComponent)(new le.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:P,authDomain:Z}=v.options;return((fe,Fe)=>{j(P&&!P.includes(":"),"invalid-api-key",{appName:fe.name}),j(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:fe.name});const We={apiKey:P,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Do(y)},ht=new ze(fe,Fe,We);return function ae(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(ee);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(ht,g),ht})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new le.wA("auth-internal",f=>{const g=it(f.getProvider("auth").getImmediate());return new Pp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Mp,"0.20.2",function id(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(Mp,"0.20.2","esm2017")}("Browser");class ad extends Ru{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Lu(y){return kl.apply(this,arguments)}function kl(){return(kl=(0,h.Z)(function*(y){const f=yield Ha()._get(Dh(y));return f&&(yield Ha()._remove(Dh(y))),f})).apply(this,arguments)}function Ch(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function Ha(){return ee(ni)}function Dh(y){return kn("authEvent",y.config.apiKey,y.name)}function Bt(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Uu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Jo(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Vp(y=(0,O.z$)()){return!("file:"!==Jo()&&"ionic:"!==Jo()&&"capacitor:"!==Jo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function xh(){try{const y=self.localStorage,f=qi();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Sh(y=(0,O.z$)()){return function Ar(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ga(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return nr()&&(0,O.hl)()}return!1}function nr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function qa(){return(function cy(){return"http:"===Jo()||"https:"===Jo()}()||(0,O.ru)()||Vp())&&!function Xo(){return(0,O.b$)()||(0,O.UG)()}()&&xh()&&!nr()}function ud(){return Vp()&&"undefined"!=typeof document}function Fl(){return(Fl=(0,h.Z)(function*(){return!!ud()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const ci={LOCAL:"local",NONE:"none",SESSION:"session"},yo=j,Bp="persistence";function Bu(y){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,h.Z)(function*(y){yield y._initializationPromise;const f=$p(),g=kn(Bp,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function $p(){var y;try{return(null===(y=function Up(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const hy=j;class di{constructor(){this.browserResolver=ee(class ry{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=In,this._completeRedirectFn=jr,this._overrideRedirectResult=D}_openPopup(f,g,v,T){var P=this;return(0,h.Z)(function*(){var Z;W(null===(Z=P.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const fe=Ls(f,g,v,Ne(),T);return function Pl(y,f,g,v=500,T=600){const P=Math.max((window.screen.availHeight-T)/2,0).toString(),Z=Math.max((window.screen.availWidth-v)/2,0).toString();let fe="";const Fe=Object.assign(Object.assign({},_h),{width:v.toString(),height:T.toString(),top:P,left:Z}),We=(0,O.z$)().toLowerCase();g&&(fe=ma(We)?"_blank":g),ga(We)&&(f=f||"http://localhost",Fe.scrollbars="yes");const ht=Object.entries(Fe).reduce((_n,[fi,Vl])=>`${_n}${fi}=${Vl},`,"");if(function Ks(y=(0,O.z$)()){var f;return kr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(We)&&"_self"!==fe)return function ty(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",fe),new Ap(null);const at=window.open(f||"",fe,ht);j(at,y,"popup-blocked");try{at.focus()}catch(_n){}return new Ap(at)}(f,fe,qi())})()}_openRedirect(f,g,v,T){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(f),function ka(y){nn().location.href=y}(Ls(f,g,v,Ne(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:P}=this.eventManagers[g];return T?Promise.resolve(T):(W(P,"If manager is not set, promise should be"),P)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const v=yield function Xc(y){return Yo.apply(this,arguments)}(f),T=new Ru(f);return v.register("authEvent",P=>(j(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:T.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(nd,{type:nd},T=>{var P;const Z=null===(P=null==T?void 0:T[0])||void 0===P?void 0:P[nd];void 0!==Z&&g(!!Z),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Qm(y){return Cp.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return bs()||uu()||kr()}}),this.cordovaResolver=ee(class Lp{constructor(){this._redirectPersistence=In,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jr,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,h.Z)(function*(){const v=f._key();let T=g.eventManagers.get(v);return T||(T=new ad(f),g.eventManagers.set(v,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,T){var P=this;return(0,h.Z)(function*(){!function ku(y){var f,g,v,T,P,Z,fe,Fe,We,ht;const at=Vs();j("function"==typeof(null===(f=null==at?void 0:at.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(void 0!==(null===(g=null==at?void 0:at.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(P=null===(T=null===(v=null==at?void 0:at.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Fe=null===(fe=null===(Z=null==at?void 0:at.cordova)||void 0===Z?void 0:Z.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(ht=null===(We=null==at?void 0:at.cordova)||void 0===We?void 0:We.InAppBrowser)||void 0===ht?void 0:ht.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield P._initialize(f);yield Z.initialized(),Z.resetRedirect(),function I(){Zn.clear()}(),yield P._originValidation(f);const fe=function Fu(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Ch(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(f,v,T);yield function iy(y,f){return Ha()._set(Dh(y),f)}(f,fe);const Fe=yield function us(y,f,g){return ja.apply(this,arguments)}(f,fe,g),We=yield function od(y){const{cordova:f}=Vs();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function Tc(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Fe);return function $a(y,f,g){return kp.apply(this,arguments)}(f,Z,We)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Op(y){return sd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:P}=Vs(),Z=setTimeout((0,h.Z)(function*(){yield Lu(f),g.onEvent(Uu())}),500),fe=function(){var ht=(0,h.Z)(function*(at){clearTimeout(Z);const _n=yield Lu(f);let fi=null;_n&&(null==at?void 0:at.url)&&(fi=function sy(y,f){var g,v;const T=function Ah(y){const f=Bt(y),g=f.link?decodeURIComponent(f.link):void 0,v=Bt(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Bt(T).link||T||v||g||y}(f);if(T.includes("/__/auth/callback")){const P=Bt(T),Z=P.firebaseError?function Th(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(P.firebaseError)):null,fe=null===(v=null===(g=null==Z?void 0:Z.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Fe=fe?Ee(fe):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(_n,at.url)),g.onEvent(fi||Uu())});return function(_n){return ht.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,fe);const Fe=T,We=`${P.packageName.toLowerCase()}://`;Vs().handleOpenURL=function(){var ht=(0,h.Z)(function*(at){if(at.toLowerCase().startsWith(We)&&fe({url:at}),"function"==typeof Fe)try{Fe(at)}catch(_n){console.error(_n)}});return function(at){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=In,this._completeRedirectFn=jr,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,T){var P=this;return(0,h.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,g,v,T)})()}_openRedirect(f,g,v,T){var P=this;return(0,h.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,g,v,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return ud()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function dy(){return Fl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Hp(y){return y.unwrap()}function ld(y){return Gp(y)}function Gp(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ho.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=kc;break;case"facebook.com":v=Ao;break;case"github.com":v=dh;break;case"twitter.com":v=Lc;break;default:const{oauthIdToken:T,oauthAccessToken:P,oauthTokenSecret:Z,pendingToken:fe,nonce:Fe}=f;return P||Z||T||fe?fe?g.startsWith("saml.")?Js._create(g,fe):ts._fromParams({providerId:g,signInMethod:g,pendingToken:fe,idToken:T,accessToken:P}):new Ui(g).credential({idToken:T,accessToken:P,rawNonce:Fe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function hi(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function py(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new qp(y,function Gn(y,f){var g;const v=(0,O.m9)(y),T=f;return j(f.customData.operationType,v,"argument-error"),j(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Lo._fromError(v,T)}(y,f));else if(v){const T=Gp(f),P=f;T&&(P.credential=T,P.tenantId=v.tenantId||void 0,P.email=v.email||void 0,P.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:ld(g),additionalUserInfo:Gi(g),user:Us.getOrCreate(T)}})}function Rh(y,f){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>hi(y,g.confirm(v))}})).apply(this,arguments)}class qp{constructor(f,g){this.resolver=g,this.auth=function fy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return hi(Hp(this.auth),this.resolver.resolveSignIn(f))}}class Us{constructor(f){this._delegate=f,this.multiFactor=function bu(y){const f=(0,O.m9)(y);return wu.has(f)||wu.set(f,Hc._fromUser(f)),wu.get(f)}(f)}static getOrCreate(f){return Us.USER_MAP.has(f)||Us.USER_MAP.set(f,new Us(f)),Us.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return hi(g.auth,er(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,h.Z)(function*(){return Rh(v.auth,function Km(y,f,g){return Sl.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return hi(g.auth,function Yc(y,f,g){return Wi.apply(this,arguments)}(g._delegate,f,di))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Bu(it(g.auth)),function Ft(y,f,g){return function yt(y,f,g){return pr.apply(this,arguments)}(y,f,g)}(g._delegate,f,di)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return hi(g.auth,ns(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Rh(this.auth,function oi(y,f,g){return Br.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return hi(this.auth,function Si(y,f,g){return xu.apply(this,arguments)}(this._delegate,f,di))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Bu(it(g.auth)),function Le(y,f,g){return function vt(y,f,g){return ut.apply(this,arguments)}(y,f,g)}(g._delegate,f,di)})()}sendEmailVerification(f){return function El(y,f){return _u.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function hh(y,f){return en.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function mp(y,f){return Oo((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Il(y,f){return Oo((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function co(y,f){return Zo.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function bl(y,f){return Ra.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function wl(y,f,g){return vu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Us.USER_MAP=new WeakMap;const Ll=j;let zp=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Ll(T,"invalid-api-key",{appName:g.name}),Ll(T,"invalid-api-key",{appName:g.name});const P="undefined"!=typeof window?di:void 0;this._delegate=v.initialize({options:{persistence:gy(T,g.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Lr(y,f,g){const v=it(y);j(v._canInitEmulator,v,"emulator-config-failed"),j(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),P=Oi(f),{host:Z,port:fe}=function Rn(y){const f=Oi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const P=T[1];return{host:P,port:ki(v.substr(P.length+1))}}{const[P,Z]=v.split(":");return{host:P,port:ki(Z)}}}(f);v.config.emulator={url:`${P}//${Z}${null===fe?"":`:${fe}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:Z,port:fe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function on(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function Ae(y,f){return Rt.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return gu(this._delegate,g)}confirmPasswordReset(g,v){return function yl(y,f,g){return _l.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,h.Z)(function*(){return hi(T._delegate,function ti(y,f,g){return Ta.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function xs(y,f){return Ti.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Aa(y,f){const g=hu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){Ll(qa(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Wn(y,f){return as.apply(this,arguments)}(g._delegate,di);return v?hi(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function oy(y,f){it(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:P,error:Z,complete:fe}=Zp(g,v,T);return this._delegate.onAuthStateChanged(P,Z,fe)}onIdTokenChanged(g,v,T){const{next:P,error:Z,complete:fe}=Zp(g,v,T);return this._delegate.onIdTokenChanged(P,Z,fe)}sendSignInLinkToEmail(g,v){return function gp(y,f,g){return mu.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function ml(y,f,g){return Da.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,h.Z)(function*(){let T;switch(function jp(y,f){yo(Object.values(ci).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?yo(f!==ci.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?yo(f===ci.NONE,y,"unsupported-persistence-type"):nr()?yo(f===ci.NONE||f===ci.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):yo(f===ci.NONE||xh(),y,"unsupported-persistence-type")}(v._delegate,g),g){case ci.SESSION:T=In;break;case ci.LOCAL:T=(yield ee(Ns)._isAvailable())?Ns:ni;break;case ci.NONE:T=mt;break;default:return Te("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return hi(this._delegate,function Vc(y){return fl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return hi(this._delegate,dn(this._delegate,g))}signInWithCustomToken(g){return hi(this._delegate,function Ro(y,f){return ct.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return hi(this._delegate,function vl(y,f,g){return dn((0,O.m9)(y),Oc.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return hi(this._delegate,function yu(y,f,g){return bn.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Rh(this._delegate,function Al(y,f,g){return uo.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,h.Z)(function*(){return Ll(qa(),v._delegate,"operation-not-supported-in-this-environment"),hi(v._delegate,function Kc(y,f,g){return Fs.apply(this,arguments)}(v._delegate,g,di))})()}signInWithRedirect(g){var v=this;return(0,h.Z)(function*(){return Ll(qa(),v._delegate,"operation-not-supported-in-this-environment"),yield Bu(v._delegate),function Y(y,f,g){return function ne(y,f,g){return ge.apply(this,arguments)}(y,f,g)}(v._delegate,g,di)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function No(y,f){return to.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ci,y})();function Zp(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const T=v;return{next:Z=>T(Z&&Us.getOrCreate(Z)),error:f,complete:g}}function gy(y,f){const g=function za(y,f){const g=$p();if(!g)return[];const v=kn(Bp,y,f);switch(g.getItem(v)){case ci.NONE:return[mt];case ci.LOCAL:return[Ns,In];case ci.SESSION:return[In];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Ns)&&g.push(Ns),"undefined"!=typeof window)for(const v of[ni,In])g.includes(v)||g.push(v);return g.includes(mt)||g.push(mt),g}class Nh{constructor(){this.providerId="phone",this._delegate=new ho(Hp(X.Z.auth()))}static credential(f,g){return ho.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Nh.PHONE_SIGN_IN_METHOD=ho.PHONE_SIGN_IN_METHOD,Nh.PROVIDER_ID=ho.PROVIDER_ID;const Wp=j;class g0{constructor(f,g,v=X.Z.app()){var T;Wp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new ao(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ls(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new zp(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Oc,FacebookAuthProvider:Ao,GithubAuthProvider:dh,GoogleAuthProvider:kc,OAuthProvider:Ui,SAMLAuthProvider:Dr,PhoneAuthProvider:Nh,PhoneMultiFactorGenerator:xp,RecaptchaVerifier:g0,TwitterAuthProvider:Lc,Auth:zp,AuthCredential:Ci,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(X.Z)},8306:(Je,we,N)=>{N.d(we,{y:()=>$});var h=N(2961),X=N(727),O=N(8822),ue=N(4671);var le=N(2416),oe=N(576),de=N(2806);let $=(()=>{class Se{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const he=new Se;return he.source=this,he.operator=Ve,he}subscribe(Ve,he,Ce){const qe=function Ge(Se){return Se&&Se instanceof h.Lv||function te(Se){return Se&&(0,oe.m)(Se.next)&&(0,oe.m)(Se.error)&&(0,oe.m)(Se.complete)}(Se)&&(0,X.Nn)(Se)}(Ve)?Ve:new h.Hp(Ve,he,Ce);return(0,de.x)(()=>{const{operator:Ke,source:Te}=this;qe.add(Ke?Ke.call(qe,Te):Te?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(he){Ve.error(he)}}forEach(Ve,he){return new(he=B(he))((Ce,qe)=>{const Ke=new h.Hp({next:Te=>{try{Ve(Te)}catch(Ee){qe(Ee),Ke.unsubscribe()}},error:qe,complete:Ce});this.subscribe(Ke)})}_subscribe(Ve){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Ve)}[O.L](){return this}pipe(...Ve){return function pe(Se){return 0===Se.length?ue.y:1===Se.length?Se[0]:function(Ve){return Se.reduce((he,Ce)=>Ce(he),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=B(Ve))((he,Ce)=>{let qe;this.subscribe(Ke=>qe=Ke,Ke=>Ce(Ke),()=>he(qe))})}}return Se.create=Re=>new Se(Re),Se})();function B(Se){var Re;return null!==(Re=null!=Se?Se:le.v.Promise)&&void 0!==Re?Re:Promise}},7579:(Je,we,N)=>{N.d(we,{x:()=>le});var h=N(8306),X=N(727);const ue=(0,N(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=N(8737),pe=N(2806);let le=(()=>{class de extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const te=new oe(this,this);return te.operator=B,te}_throwIfClosed(){if(this.closed)throw new ue}next(B){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(B)}})}error(B){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:te}=this;for(;te.length;)te.shift().error(B)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:te,isStopped:Ge,observers:Se}=this;return te||Ge?X.Lc:(this.currentObservers=null,Se.push(B),new X.w0(()=>{this.currentObservers=null,(0,re.P)(Se,B)}))}_checkFinalizedStatuses(B){const{hasError:te,thrownError:Ge,isStopped:Se}=this;te?B.error(Ge):Se&&B.complete()}asObservable(){const B=new h.y;return B.source=this,B}}return de.create=($,B)=>new oe($,B),de})();class oe extends le{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,te;null===(te=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===te||te.call(B,$)}error($){var B,te;null===(te=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===te||te.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,te;return null!==(te=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==te?te:X.Lc}}},2961:(Je,we,N)=>{N.d(we,{Hp:()=>Ve,Lv:()=>te});var h=N(576),X=N(727),O=N(2416),ue=N(7849);function re(){}const pe=de("C",void 0,void 0);function de(Te,Ee,be){return{kind:Te,value:Ee,error:be}}var $=N(3410),B=N(2806);class te extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=Ke}static create(Ee,be,je){return new Ve(Ee,be,je)}next(Ee){this.isStopped?qe(function oe(Te){return de("N",Te,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?qe(function le(Te){return de("E",void 0,Te)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?qe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Se(Te,Ee){return Ge.call(Te,Ee)}class Re{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:be}=this;if(be.next)try{be.next(Ee)}catch(je){he(je)}}error(Ee){const{partialObserver:be}=this;if(be.error)try{be.error(Ee)}catch(je){he(je)}else he(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(be){he(be)}}}class Ve extends te{constructor(Ee,be,je){let Be;if(super(),(0,h.m)(Ee)||!Ee)Be={next:null!=Ee?Ee:void 0,error:null!=be?be:void 0,complete:null!=je?je:void 0};else{let j;this&&O.v.useDeprecatedNextContext?(j=Object.create(Ee),j.unsubscribe=()=>this.unsubscribe(),Be={next:Ee.next&&Se(Ee.next,j),error:Ee.error&&Se(Ee.error,j),complete:Ee.complete&&Se(Ee.complete,j)}):Be=Ee}this.destination=new Re(Be)}}function he(Te){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Te):(0,ue.h)(Te)}function qe(Te,Ee){const{onStoppedNotification:be}=O.v;be&&$.z.setTimeout(()=>be(Te,Ee))}const Ke={closed:!0,next:re,error:function Ce(Te){throw Te},complete:re}},727:(Je,we,N)=>{N.d(we,{Lc:()=>pe,w0:()=>re,Nn:()=>le});var h=N(576);const O=(0,N(3888).d)(de=>function(B){de(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((te,Ge)=>`${Ge+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ue=N(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Se of B)Se.remove(this);else B.remove(this);const{initialTeardown:te}=this;if((0,h.m)(te))try{te()}catch(Se){$=Se instanceof O?Se.errors:[Se]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Se of Ge)try{oe(Se)}catch(Re){$=null!=$?$:[],Re instanceof O?$=[...$,...Re.errors]:$.push(Re)}}if($)throw new O($)}}add($){var B;if($&&$!==this)if(this.closed)oe($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ue.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ue.P)(B,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const de=new re;return de.closed=!0,de})();const pe=re.EMPTY;function le(de){return de instanceof re||de&&"closed"in de&&(0,h.m)(de.remove)&&(0,h.m)(de.add)&&(0,h.m)(de.unsubscribe)}function oe(de){(0,h.m)(de)?de():de.unsubscribe()}},2416:(Je,we,N)=>{N.d(we,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,we,N)=>{N.d(we,{E:()=>X});const X=new(N(8306).y)(re=>re.complete())},8996:(Je,we,N)=>{N.d(we,{D:()=>Ee});var h=N(8421),X=N(5363),O=N(9468),pe=N(8306),oe=N(2202),de=N(576),$=N(9672);function te(be,je){if(!be)throw new Error("Iterable cannot be null");return new pe.y(Be=>{(0,$.f)(Be,je,()=>{const j=be[Symbol.asyncIterator]();(0,$.f)(Be,je,()=>{j.next().then(ve=>{ve.done?Be.complete():Be.next(ve.value)})},0,!0)})})}var Ge=N(3670),Se=N(8239),Re=N(1144),Ve=N(6495),he=N(2206),Ce=N(4532),qe=N(3260);function Ee(be,je){return je?function Te(be,je){if(null!=be){if((0,Ge.c)(be))return function ue(be,je){return(0,h.Xf)(be).pipe((0,O.R)(je),(0,X.Q)(je))}(be,je);if((0,Re.z)(be))return function le(be,je){return new pe.y(Be=>{let j=0;return je.schedule(function(){j===be.length?Be.complete():(Be.next(be[j++]),Be.closed||this.schedule())})})}(be,je);if((0,Se.t)(be))return function re(be,je){return(0,h.Xf)(be).pipe((0,O.R)(je),(0,X.Q)(je))}(be,je);if((0,he.D)(be))return te(be,je);if((0,Ve.T)(be))return function B(be,je){return new pe.y(Be=>{let j;return(0,$.f)(Be,je,()=>{j=be[oe.h](),(0,$.f)(Be,je,()=>{let ve,W;try{({value:ve,done:W}=j.next())}catch(ie){return void Be.error(ie)}W?Be.complete():Be.next(ve)},0,!0)}),()=>(0,de.m)(null==j?void 0:j.return)&&j.return()})}(be,je);if((0,qe.L)(be))return function Ke(be,je){return te((0,qe.Q)(be),je)}(be,je)}throw(0,Ce.z)(be)}(be,je):(0,h.Xf)(be)}},8421:(Je,we,N)=>{N.d(we,{Xf:()=>Ge});var h=N(655),X=N(1144),O=N(8239),ue=N(8306),re=N(3670),pe=N(2206),le=N(4532),oe=N(6495),de=N(3260),$=N(576),B=N(7849),te=N(8822);function Ge(Te){if(Te instanceof ue.y)return Te;if(null!=Te){if((0,re.c)(Te))return function Se(Te){return new ue.y(Ee=>{const be=Te[te.L]();if((0,$.m)(be.subscribe))return be.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,X.z)(Te))return function Re(Te){return new ue.y(Ee=>{for(let be=0;be<Te.length&&!Ee.closed;be++)Ee.next(Te[be]);Ee.complete()})}(Te);if((0,O.t)(Te))return function Ve(Te){return new ue.y(Ee=>{Te.then(be=>{Ee.closed||(Ee.next(be),Ee.complete())},be=>Ee.error(be)).then(null,B.h)})}(Te);if((0,pe.D)(Te))return Ce(Te);if((0,oe.T)(Te))return function he(Te){return new ue.y(Ee=>{for(const be of Te)if(Ee.next(be),Ee.closed)return;Ee.complete()})}(Te);if((0,de.L)(Te))return function qe(Te){return Ce((0,de.Q)(Te))}(Te)}throw(0,le.z)(Te)}function Ce(Te){return new ue.y(Ee=>{(function Ke(Te,Ee){var be,je,Be,j;return(0,h.mG)(this,void 0,void 0,function*(){try{for(be=(0,h.KL)(Te);!(je=yield be.next()).done;)if(Ee.next(je.value),Ee.closed)return}catch(ve){Be={error:ve}}finally{try{je&&!je.done&&(j=be.return)&&(yield j.call(be))}finally{if(Be)throw Be.error}}Ee.complete()})})(Te,Ee).catch(be=>Ee.error(be))})}},6451:(Je,we,N)=>{N.d(we,{T:()=>pe});var h=N(8189),X=N(8421),O=N(515),ue=N(7669),re=N(8996);function pe(...le){const oe=(0,ue.yG)(le),de=(0,ue._6)(le,1/0),$=le;return $.length?1===$.length?(0,X.Xf)($[0]):(0,h.J)(de)((0,re.D)($,oe)):O.E}},5403:(Je,we,N)=>{N.d(we,{x:()=>X});var h=N(2961);function X(ue,re,pe,le,oe){return new O(ue,re,pe,le,oe)}class O extends h.Lv{constructor(re,pe,le,oe,de,$){super(re),this.onFinalize=de,this.shouldUnsubscribe=$,this._next=pe?function(B){try{pe(B)}catch(te){re.error(te)}}:super._next,this._error=oe?function(B){try{oe(B)}catch(te){re.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Je,we,N)=>{N.d(we,{U:()=>O});var h=N(4482),X=N(5403);function O(ue,re){return(0,h.e)((pe,le)=>{let oe=0;pe.subscribe((0,X.x)(le,de=>{le.next(ue.call(re,de,oe++))}))})}},8189:(Je,we,N)=>{N.d(we,{J:()=>O});var h=N(5577),X=N(4671);function O(ue=1/0){return(0,h.z)(X.y,ue)}},5577:(Je,we,N)=>{N.d(we,{z:()=>oe});var h=N(4004),X=N(8421),O=N(4482),ue=N(9672),re=N(5403),le=N(576);function oe(de,$,B=1/0){return(0,le.m)($)?oe((te,Ge)=>(0,h.U)((Se,Re)=>$(te,Se,Ge,Re))((0,X.Xf)(de(te,Ge))),B):("number"==typeof $&&(B=$),(0,O.e)((te,Ge)=>function pe(de,$,B,te,Ge,Se,Re,Ve){const he=[];let Ce=0,qe=0,Ke=!1;const Te=()=>{Ke&&!he.length&&!Ce&&$.complete()},Ee=je=>Ce<te?be(je):he.push(je),be=je=>{Se&&$.next(je),Ce++;let Be=!1;(0,X.Xf)(B(je,qe++)).subscribe((0,re.x)($,j=>{null==Ge||Ge(j),Se?Ee(j):$.next(j)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ce--;he.length&&Ce<te;){const j=he.shift();Re?(0,ue.f)($,Re,()=>be(j)):be(j)}Te()}catch(j){$.error(j)}}))};return de.subscribe((0,re.x)($,Ee,()=>{Ke=!0,Te()})),()=>{null==Ve||Ve()}}(te,Ge,de,B)))}},5363:(Je,we,N)=>{N.d(we,{Q:()=>ue});var h=N(9672),X=N(4482),O=N(5403);function ue(re,pe=0){return(0,X.e)((le,oe)=>{le.subscribe((0,O.x)(oe,de=>(0,h.f)(oe,re,()=>oe.next(de),pe),()=>(0,h.f)(oe,re,()=>oe.complete(),pe),de=>(0,h.f)(oe,re,()=>oe.error(de),pe)))})}},3099:(Je,we,N)=>{N.d(we,{B:()=>pe});var h=N(8996),X=N(5698),O=N(7579),ue=N(2961),re=N(4482);function pe(oe={}){const{connector:de=(()=>new O.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:te=!0}=oe;return Ge=>{let Se=null,Re=null,Ve=null,he=0,Ce=!1,qe=!1;const Ke=()=>{null==Re||Re.unsubscribe(),Re=null},Te=()=>{Ke(),Se=Ve=null,Ce=qe=!1},Ee=()=>{const be=Se;Te(),null==be||be.unsubscribe()};return(0,re.e)((be,je)=>{he++,!qe&&!Ce&&Ke();const Be=Ve=null!=Ve?Ve:de();je.add(()=>{he--,0===he&&!qe&&!Ce&&(Re=le(Ee,te))}),Be.subscribe(je),Se||(Se=new ue.Hp({next:j=>Be.next(j),error:j=>{qe=!0,Ke(),Re=le(Te,$,j),Be.error(j)},complete:()=>{Ce=!0,Ke(),Re=le(Te,B),Be.complete()}}),(0,h.D)(be).subscribe(Se))})(Ge)}}function le(oe,de,...$){return!0===de?(oe(),null):!1===de?null:de(...$).pipe((0,X.q)(1)).subscribe(()=>oe())}},9468:(Je,we,N)=>{N.d(we,{R:()=>X});var h=N(4482);function X(O,ue=0){return(0,h.e)((re,pe)=>{pe.add(O.schedule(()=>re.subscribe(pe),ue))})}},5698:(Je,we,N)=>{N.d(we,{q:()=>ue});var h=N(515),X=N(4482),O=N(5403);function ue(re){return re<=0?()=>h.E:(0,X.e)((pe,le)=>{let oe=0;pe.subscribe((0,O.x)(le,de=>{++oe<=re&&(le.next(de),re<=oe&&le.complete())}))})}},8505:(Je,we,N)=>{N.d(we,{b:()=>re});var h=N(576),X=N(4482),O=N(5403),ue=N(4671);function re(pe,le,oe){const de=(0,h.m)(pe)||le||oe?{next:pe,error:le,complete:oe}:pe;return de?(0,X.e)(($,B)=>{var te;null===(te=de.subscribe)||void 0===te||te.call(de);let Ge=!0;$.subscribe((0,O.x)(B,Se=>{var Re;null===(Re=de.next)||void 0===Re||Re.call(de,Se),B.next(Se)},()=>{var Se;Ge=!1,null===(Se=de.complete)||void 0===Se||Se.call(de),B.complete()},Se=>{var Re;Ge=!1,null===(Re=de.error)||void 0===Re||Re.call(de,Se),B.error(Se)},()=>{var Se,Re;Ge&&(null===(Se=de.unsubscribe)||void 0===Se||Se.call(de)),null===(Re=de.finalize)||void 0===Re||Re.call(de)}))}):ue.y}},4408:(Je,we,N)=>{N.d(we,{o:()=>re});var h=N(727);class X extends h.w0{constructor(le,oe){super()}schedule(le,oe=0){return this}}const O={setInterval(pe,le,...oe){const{delegate:de}=O;return(null==de?void 0:de.setInterval)?de.setInterval(pe,le,...oe):setInterval(pe,le,...oe)},clearInterval(pe){const{delegate:le}=O;return((null==le?void 0:le.clearInterval)||clearInterval)(pe)},delegate:void 0};var ue=N(8737);class re extends X{constructor(le,oe){super(le,oe),this.scheduler=le,this.work=oe,this.pending=!1}schedule(le,oe=0){if(this.closed)return this;this.state=le;const de=this.id,$=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId($,de,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId($,this.id,oe),this}requestAsyncId(le,oe,de=0){return O.setInterval(le.flush.bind(le,this),de)}recycleAsyncId(le,oe,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return oe;O.clearInterval(oe)}execute(le,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(le,oe);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,oe){let $,de=!1;try{this.work(le)}catch(B){de=!0,$=B||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:le,scheduler:oe}=this,{actions:de}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(de,this),null!=le&&(this.id=this.recycleAsyncId(oe,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,we,N)=>{N.d(we,{v:()=>O});var h=N(6063);class X{constructor(re,pe=X.now){this.schedulerActionCtor=re,this.now=pe}schedule(re,pe=0,le){return new this.schedulerActionCtor(this,re).schedule(le,pe)}}X.now=h.l.now;class O extends X{constructor(re,pe=X.now){super(re,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:pe}=this;if(this._active)return void pe.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=pe.shift());if(this._active=!1,le){for(;re=pe.shift();)re.unsubscribe();throw le}}}},4986:(Je,we,N)=>{N.d(we,{z:()=>O});var h=N(4408);const O=new(N(7565).v)(h.o)},6063:(Je,we,N)=>{N.d(we,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Je,we,N)=>{N.d(we,{z:()=>h});const h={setTimeout(X,O,...ue){const{delegate:re}=h;return(null==re?void 0:re.setTimeout)?re.setTimeout(X,O,...ue):setTimeout(X,O,...ue)},clearTimeout(X){const{delegate:O}=h;return((null==O?void 0:O.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(Je,we,N)=>{N.d(we,{h:()=>X});const X=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,we,N)=>{N.d(we,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,we,N)=>{N.d(we,{_6:()=>pe,jO:()=>ue,yG:()=>re});var h=N(576);function O(le){return le[le.length-1]}function ue(le){return(0,h.m)(O(le))?le.pop():void 0}function re(le){return function X(le){return le&&(0,h.m)(le.schedule)}(O(le))?le.pop():void 0}function pe(le,oe){return"number"==typeof O(le)?le.pop():oe}},8737:(Je,we,N)=>{function h(X,O){if(X){const ue=X.indexOf(O);0<=ue&&X.splice(ue,1)}}N.d(we,{P:()=>h})},3888:(Je,we,N)=>{function h(X){const ue=X(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}N.d(we,{d:()=>h})},2806:(Je,we,N)=>{N.d(we,{x:()=>O,O:()=>ue});var h=N(2416);let X=null;function O(re){if(h.v.useDeprecatedSynchronousErrorHandling){const pe=!X;if(pe&&(X={errorThrown:!1,error:null}),re(),pe){const{errorThrown:le,error:oe}=X;if(X=null,le)throw oe}}else re()}function ue(re){h.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},9672:(Je,we,N)=>{function h(X,O,ue,re=0,pe=!1){const le=O.schedule(function(){ue(),pe?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(le),!pe)return le}N.d(we,{f:()=>h})},4671:(Je,we,N)=>{function h(X){return X}N.d(we,{y:()=>h})},1144:(Je,we,N)=>{N.d(we,{z:()=>h});const h=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(Je,we,N)=>{N.d(we,{D:()=>X});var h=N(576);function X(O){return Symbol.asyncIterator&&(0,h.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(Je,we,N)=>{function h(X){return"function"==typeof X}N.d(we,{m:()=>h})},3670:(Je,we,N)=>{N.d(we,{c:()=>O});var h=N(8822),X=N(576);function O(ue){return(0,X.m)(ue[h.L])}},6495:(Je,we,N)=>{N.d(we,{T:()=>O});var h=N(2202),X=N(576);function O(ue){return(0,X.m)(null==ue?void 0:ue[h.h])}},8239:(Je,we,N)=>{N.d(we,{t:()=>X});var h=N(576);function X(O){return(0,h.m)(null==O?void 0:O.then)}},3260:(Je,we,N)=>{N.d(we,{Q:()=>O,L:()=>ue});var h=N(655),X=N(576);function O(re){return(0,h.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:oe,done:de}=yield(0,h.qq)(le.read());if(de)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(oe)}}finally{le.releaseLock()}})}function ue(re){return(0,X.m)(null==re?void 0:re.getReader)}},4482:(Je,we,N)=>{N.d(we,{A:()=>X,e:()=>O});var h=N(576);function X(ue){return(0,h.m)(null==ue?void 0:ue.lift)}function O(ue){return re=>{if(X(re))return re.lift(function(pe){try{return ue(pe,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,we,N)=>{N.d(we,{h:()=>O});var h=N(2416),X=N(3410);function O(ue){X.z.setTimeout(()=>{const{onUnhandledError:re}=h.v;if(!re)throw ue;re(ue)})}},4532:(Je,we,N)=>{function h(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(we,{z:()=>h})},655:(Je,we,N)=>{function ue(W,ie){var ee={};for(var me in W)Object.prototype.hasOwnProperty.call(W,me)&&ie.indexOf(me)<0&&(ee[me]=W[me]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(me=Object.getOwnPropertySymbols(W);ae<me.length;ae++)ie.indexOf(me[ae])<0&&Object.prototype.propertyIsEnumerable.call(W,me[ae])&&(ee[me[ae]]=W[me[ae]])}return ee}function oe(W,ie,ee,me){return new(ee||(ee=Promise))(function(Ne,ot){function Vt(Kt){try{Ye(me.next(Kt))}catch(vn){ot(vn)}}function Ot(Kt){try{Ye(me.throw(Kt))}catch(vn){ot(vn)}}function Ye(Kt){Kt.done?Ne(Kt.value):function ae(Ne){return Ne instanceof ee?Ne:new ee(function(ot){ot(Ne)})}(Kt.value).then(Vt,Ot)}Ye((me=me.apply(W,ie||[])).next())})}function he(W){return this instanceof he?(this.v=W,this):new he(W)}function Ce(W,ie,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,me=ee.apply(W,ie||[]),Ne=[];return ae={},ot("next"),ot("throw"),ot("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ot(Jt){me[Jt]&&(ae[Jt]=function(zt){return new Promise(function(wr,$t){Ne.push([Jt,zt,wr,$t])>1||Vt(Jt,zt)})})}function Vt(Jt,zt){try{!function Ot(Jt){Jt.value instanceof he?Promise.resolve(Jt.value.v).then(Ye,Kt):vn(Ne[0][2],Jt)}(me[Jt](zt))}catch(wr){vn(Ne[0][3],wr)}}function Ye(Jt){Vt("next",Jt)}function Kt(Jt){Vt("throw",Jt)}function vn(Jt,zt){Jt(zt),Ne.shift(),Ne.length&&Vt(Ne[0][0],Ne[0][1])}}function Ke(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ie=W[Symbol.asyncIterator];return ie?ie.call(W):(W=function te(W){var ie="function"==typeof Symbol&&Symbol.iterator,ee=ie&&W[ie],me=0;if(ee)return ee.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&me>=W.length&&(W=void 0),{value:W&&W[me++],done:!W}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),ee={},me("next"),me("throw"),me("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function me(Ne){ee[Ne]=W[Ne]&&function(ot){return new Promise(function(Vt,Ot){!function ae(Ne,ot,Vt,Ot){Promise.resolve(Ot).then(function(Ye){Ne({value:Ye,done:Vt})},ot)}(Vt,Ot,(ot=W[Ne](ot)).done,ot.value)})}}}N.d(we,{_T:()=>ue,mG:()=>oe,qq:()=>he,FC:()=>Ce,KL:()=>Ke})},5e3:(Je,we,N)=>{N.d(we,{deG:()=>vp,tb:()=>ms,AFp:()=>mc,ip1:()=>ha,CZH:()=>mm,hGG:()=>Pi,z2F:()=>wm,sBO:()=>$D,Sil:()=>_b,_Vd:()=>sm,EJc:()=>Iv,SBq:()=>Ld,qLn:()=>ld,vpe:()=>la,tBr:()=>jr,XFs:()=>dt,OlP:()=>ln,zs3:()=>$s,ZZ4:()=>Fv,aQg:()=>Lv,soG:()=>kf,YKP:()=>av,h0i:()=>Mr,PXZ:()=>Lf,R0b:()=>Ei,FiY:()=>ai,Lbi:()=>yc,g9A:()=>ym,Qsj:()=>iv,FYo:()=>rv,JOm:()=>T,tp0:()=>li,Rgc:()=>bf,dDg:()=>bb,q4F:()=>sv,GfV:()=>Vd,s_b:()=>An,ifc:()=>Ut,eFA:()=>Mv,G48:()=>Vf,Gpc:()=>B,X6Q:()=>Rv,_c5:()=>Fb,VLi:()=>vm,c2e:()=>zd,zSh:()=>gE,wAp:()=>ft,vHH:()=>Re,cg1:()=>Kg,kL8:()=>Md,dqk:()=>kt,sIi:()=>Kl,CqO:()=>jE,QGY:()=>BE,F4k:()=>zC,RDi:()=>pl,AaK:()=>oe,qOj:()=>Wy,TTD:()=>Ui,_Bn:()=>Q_,xp6:()=>xy,uIk:()=>Eg,ekj:()=>ef,Suo:()=>pv,Xpm:()=>lt,lG2:()=>uu,Yz7:()=>zt,cJS:()=>$t,oAB:()=>Ir,Yjl:()=>ma,Y36:()=>qu,_UZ:()=>c_,qZA:()=>Rg,TgZ:()=>l_,EpF:()=>qC,n5z:()=>Du,LFG:()=>Le,$8M:()=>oo,$Z:()=>$C,NdJ:()=>Pg,CRH:()=>He,oxw:()=>g_,ALo:()=>ce,lcZ:()=>yr,Q6J:()=>Kh,s9C:()=>Yh,DdM:()=>Ef,iGM:()=>$d,CHM:()=>gu,LSH:()=>Vu,YNc:()=>Cg,_uU:()=>jg,hij:()=>$g});var h=N(7579),X=N(727),O=N(8306),ue=N(6451),re=N(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function oe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(oe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function de(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=pe({__forward_ref__:pe});function B(i){return i.__forward_ref__=B,i.toString=function(){return oe(this())},i}function te(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}class Re extends Error{constructor(s,a){super(function Ve(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Ce(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function Ee(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${Ce(i)} found${a}`)}function Ot(i,s){null==i&&function Ye(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function $t(i){return{providers:i.providers||[],imports:i.imports||[]}}function Nt(i){return Xi(i,Ni)||Xi(i,Yr)}function Xi(i,s){return i.hasOwnProperty(s)?i[s]:null}function br(i){return i&&(i.hasOwnProperty(ws)||i.hasOwnProperty(bi))?i[ws]:null}const Ni=pe({\u0275prov:pe}),ws=pe({\u0275inj:pe}),Yr=pe({ngInjectableDef:pe}),bi=pe({ngInjectorDef:pe});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Qr;function En(i){const s=Qr;return Qr=i,s}function Zs(i,s,a){const l=Nt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&dt.Optional?null:void 0!==s?s:void Ee(oe(i),"Injector")}function jn(i){return{toString:i}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),Ut=(()=>{return(i=Ut||(Ut={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ut;var i})();const rt="undefined"!=typeof globalThis&&globalThis,pt="undefined"!=typeof window&&window,lr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt=rt||"undefined"!=typeof global&&global||pt||lr,dr={},L=[],G=pe({\u0275cmp:pe}),q=pe({\u0275dir:pe}),Ie=pe({\u0275pipe:pe}),H=pe({\u0275mod:pe}),J=pe({\u0275fac:pe}),xe=pe({__NG_ELEMENT_ID__:pe});let Qe=0;function lt(i){return jn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ut.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Qe++,l.inputs=ga(i.inputs,a),l.outputs=ga(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(sn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(mt):null,l})}function sn(i){return Fn(i)||function Cr(i){return i[q]||null}(i)}function mt(i){return function es(i){return i[Ie]||null}(i)}const kn={};function Ir(i){return jn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(kn[i.id]=i.type),s})}function ga(i,s){if(null==i)return dr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const uu=lt;function ma(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Fn(i){return i[G]||null}function Ln(i,s){const a=i[H]||null;if(!a&&!0===s)throw new Error(`Type ${oe(i)} does not have '\u0275mod' property.`);return a}function Vr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Fi(i){return Array.isArray(i)&&!0===i[1]}function du(i){return 0!=(8&i.flags)}function Ac(i){return 2==(2&i.flags)}function Li(i){return 1==(1&i.flags)}function Vi(i){return null!==i.template}function cl(i){return 0!=(512&i[2])}function fr(i,s){return i.hasOwnProperty(J)?i[J]:null}class Qs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ui(){return Ao}function Ao(i){return i.type.prototype.ngOnChanges&&(i.setInput=dh),kc}function kc(){const i=Js(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===dr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function dh(i,s,a,l){const c=Js(i)||function So(i,s){return i[Fc]=s}(i,{previous:dr,current:null}),p=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],b=_[w];p[w]=new Qs(b&&b.currentValue,s,_===dr),i[l]=s}Ui.ngInherit=!0;const Fc="__ngSimpleChanges__";function Js(i){return i[Fc]||null}let Mo;function pl(i){Mo=i}function en(i){return!!i.listen}const wa={createRenderer:(i,s)=>function Bi(){return void 0!==Mo?Mo:"undefined"!=typeof document?document:void 0}()};function Zt(i){for(;Array.isArray(i);)i=i[0];return i}function Ss(i,s){return Zt(s[i])}function Xn(i,s){return Zt(s[i.index])}function dn(i,s){return i.data[s]}function er(i,s){const a=s[i];return Vr(a)?a:a[0]}function eo(i){return 4==(4&i[2])}function ns(i){return 128==(128&i[2])}function Di(i,s){return null==s?null:i[s]}function $i(i){i[18]=0}function Ro(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ct={lFrame:Uc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Da(){return ct.bindingsEnabled}function Ae(){return ct.lFrame.lView}function Rt(){return ct.lFrame.tView}function gu(i){return ct.lFrame.contextLView=i,i[8]}function un(){let i=No();for(;null!==i&&64===i.type;)i=i.parent;return i}function No(){return ct.lFrame.currentTNode}function ti(i,s){const a=ct.lFrame;a.currentTNode=i,a.isParent=s}function Ta(){return ct.lFrame.isParent}function Aa(){return ct.isInCheckNoChangesMode}function yu(i){ct.isInCheckNoChangesMode=i}function bn(){const i=ct.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function xs(){return ct.lFrame.bindingIndex++}function wl(i,s){const a=ct.lFrame;a.bindingIndex=a.bindingRootIndex=i,xa(s)}function xa(i){ct.lFrame.currentDirectiveIndex=i}function bl(){return ct.lFrame.currentQueryIndex}function Ra(i){ct.lFrame.currentQueryIndex=i}function mp(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Il(i,s,a){if(a&dt.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&dt.Host||(c=mp(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=ct.lFrame=Pa();return l.currentTNode=s,l.lView=i,!0}function Oo(i){const s=Pa(),a=i[1];ct.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Pa(){const i=ct.lFrame,s=null===i?null:i.child;return null===s?Uc(i):s}function Uc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function ko(){const i=ct.lFrame;return ct.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Bc=ko;function Fo(){const i=ko();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Hn(){return ct.lFrame.selectedIndex}function Gi(i){ct.lFrame.selectedIndex=i}function pn(){const i=ct.lFrame;return dn(i.tView,i.selectedIndex)}function $c(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Na(i,s,a){Gn(i,s,3,a)}function is(i,s,a,l){(3&i[2])===a&&Gn(i,s,a,l)}function Lo(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Gn(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(w=s[b],null!=l&&w>=l)break}else s[b]<0&&(i[18]+=65536),(w<p||-1==p)&&(gh(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function gh(i,s,a,l){const c=a[l]<0,p=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Eu{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Xe(i,s,a){const l=en(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],w=a[c++],b=a[c++];l?i.setAttribute(s,w,b,_):s.setAttributeNS(_,w,b)}else{const _=p,w=a[++c];ri(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function ni(i){return 3===i||4===i||6===i}function ri(i){return 64===i.charCodeAt(0)}function In(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Cl(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Cl(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function qc(i){return-1!==i}function qi(i){return 32767&i}function nn(i,s){let a=function Dl(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let ka=!0;function Ai(i){const s=ka;return ka=i,s}let Zc=0;function gn(i,s){const a=Uo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Vo(l.data,i),Vo(s,null),Vo(l.blueprint,null));const c=Ms(i,s),p=i.injectorIndex;if(qc(c)){const _=qi(c),w=nn(c,s),b=w[1].data;for(let A=0;A<8;A++)s[p+A]=w[_+A]|b[_+A]}return s[p+8]=c,p}function Vo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Uo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ms(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function tr(i,s,a){!function Tl(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(xe)&&(l=a[xe]),null==l&&(l=a[xe]=Zc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Rs(i,s,a){if(a&dt.Optional)return i;Ee(s,"NodeInjector")}function Bo(i,s,a,l){if(a&dt.Optional&&void 0===l&&(l=null),0==(a&(dt.Self|dt.Host))){const c=i[9],p=En(void 0);try{return c?c.get(s,l,a&dt.Optional):Zs(s,l,a&dt.Optional)}finally{En(p)}}return Rs(l,s,a)}function Ps(i,s,a,l=dt.Default,c){if(null!==i){const p=function Fa(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(xe)?i[xe]:void 0;return"number"==typeof s?s>=0?255&s:io:s}(a);if("function"==typeof p){if(!Il(s,i,l))return l&dt.Host?Rs(c,a,l):Bo(s,a,l,c);try{const _=p(l);if(null!=_||l&dt.Optional)return _;Ee(a)}finally{Bc()}}else if("number"==typeof p){let _=null,w=Uo(i,s),b=-1,A=l&dt.Host?s[16][6]:null;for((-1===w||l&dt.SkipSelf)&&(b=-1===w?Ms(i,s):s[w+8],-1!==b&&qn(l,!1)?(_=s[1],w=qi(b),s=nn(b,s)):w=-1);-1!==w;){const S=s[1];if(Ns(p,w,S.data)){const k=$o(w,s,a,_,l,A);if(k!==jo)return k}b=s[w+8],-1!==b&&qn(l,s[1].data[w+8]===A)&&Ns(p,w,s)?(_=S,w=qi(b),s=nn(b,s)):w=-1}}}return Bo(s,a,l,c)}const jo={};function io(){return new so(un(),Ae())}function $o(i,s,a,l,c,p){const _=s[1],w=_.data[i+8],S=Ho(w,_,a,null==l?Ac(w)&&ka:l!=_&&0!=(3&w.type),c&dt.Host&&p===w);return null!==S?Go(s,_,S,w):jo}function Ho(i,s,a,l,c){const p=i.providerIndexes,_=s.data,w=1048575&p,b=i.directiveStart,S=p>>20,U=c?w+S:i.directiveEnd;for(let Q=l?w:w+S;Q<U;Q++){const _e=_[Q];if(Q<b&&a===_e||Q>=b&&_e.type===a)return Q}if(c){const Q=_[b];if(Q&&Vi(Q)&&Q.type===a)return b}return null}function Go(i,s,a,l){let c=i[a];const p=s.data;if(function Hc(i){return i instanceof Eu}(c)){const _=c;_.resolving&&function qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ce(p[a]));const w=Ai(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?En(_.injectImpl):null;Il(i,l,dt.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function yp(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=Ao(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==b&&En(b),Ai(w),_.resolving=!1,Bc()}}return c}function Ns(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function qn(i,s){return!(i&dt.Self||i&dt.Host&&s)}class so{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ps(this._tNode,this._lView,s,l,a)}}function Du(i){return jn(()=>{const s=i.prototype.constructor,a=s[J]||mn(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[J]||mn(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function mn(i){return Ge(i)?()=>{const s=mn(te(i));return s&&s()}:fr(i)}function oo(i){return function Cu(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(ni(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(un(),i)}const ss="__parameters__";function yn(i,s,a){return jn(()=>{const l=function si(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return w.annotation=_,w;function w(b,A,S){const k=b.hasOwnProperty(ss)?b[ss]:Object.defineProperty(b,ss,{value:[]})[ss];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),b}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class ln{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const vp=new ln("AnalyzeForEntryComponents");function oi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),oi(l,s)):s!==i&&s.push(l)}return s}function Br(i,s){i.forEach(a=>Array.isArray(a)?Br(a,s):s(a))}function zo(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function lo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function zn(i,s,a){let l=ks(i,s);return l>=0?i[1|l]=a:(l=~l,function os(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Ua(i,s){const a=ks(i,s);if(a>=0)return i[1|a]}function ks(i,s){return function Kc(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const Wo={},Ko="__NG_DI_FLAG__",fo="ngTempTokenPath",I=/\n/gm,M="__source",F=pe({provide:String,useValue:pe});let Y;function ne(i){const s=Y;return Y=i,s}function ge(i,s=dt.Default){if(void 0===Y)throw new Re(203,"");return null===Y?Zs(i,void 0,s):Y.get(i,s&dt.Optional?null:void 0,s)}function Le(i,s=dt.Default){return(function fn(){return Qr}()||ge)(te(i),s)}const ut=Le;function Ft(i){const s=[];for(let a=0;a<i.length;a++){const l=te(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,p=dt.Default;for(let _=0;_<l.length;_++){const w=l[_],b=pr(w);"number"==typeof b?-1===b?c=w.token:p|=b:c=w}s.push(Le(c,p))}else s.push(Le(l))}return s}function yt(i,s){return i[Ko]=s,i.prototype[Ko]=s,i}function pr(i){return i[Ko]}const jr=yt(yn("Inject",i=>({token:i})),-1),ai=yt(yn("Optional"),8),li=yt(yn("SkipSelf"),4);class td{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Qo(i){return i instanceof td?i.changingThisBreaksApplicationSecurity:i}const id=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Np=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Bt=(()=>((Bt=Bt||{})[Bt.NONE=0]="NONE",Bt[Bt.HTML=1]="HTML",Bt[Bt.STYLE=2]="STYLE",Bt[Bt.SCRIPT=3]="SCRIPT",Bt[Bt.URL=4]="URL",Bt[Bt.RESOURCE_URL=5]="RESOURCE_URL",Bt))();function Vu(i){const s=function Xo(){const i=Ae();return i&&i[12]}();return s?s.sanitize(Bt.URL,i)||"":function Ls(i,s){const a=function Nl(i){return i instanceof td&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Qo(i):function Vs(i){return(i=String(i)).match(id)||i.match(Np)?i:"unsafe:"+i}(he(i))}const xh="__ngContext__";function nr(i,s){i[xh]=s}function ud(i){const s=function qa(i){return i[xh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function di(i){return i.ngOriginalError}function fy(i,...s){i.error(...s)}class ld{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Hp(i){return i&&i.ngErrorLogger||fy}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&di(s);for(;a&&di(a);)a=di(a);return a||null}}const gy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function ls(i){return i instanceof Function?i():i}var T=(()=>((T=T||{})[T.Important=1]="Important",T[T.DashCase=2]="DashCase",T))();function Z(i,s){return undefined(i,s)}function We(i){const s=i[3];return Fi(s)?s[3]:s}function _n(i){return Vl(i[13])}function fi(i){return Vl(i[4])}function Vl(i){for(;null!==i&&!Fi(i);)i=i[4];return i}function ea(i,s,a,l,c){if(null!=l){let p,_=!1;Fi(l)?p=l:Vr(l)&&(_=!0,l=l[0]);const w=Zt(l);0===i&&null!==a?null==c?Ey(s,a,w):cs(s,a,w,c||null,!0):1===i&&null!==a?cs(s,a,w,c||null,!0):2===i?function Cy(i,s,a){const l=Lh(i,s);l&&function xI(i,s,a,l){en(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=p&&function PI(i,s,a,l,c){const p=a[7];p!==Zt(a)&&ea(s,i,l,p,c);for(let w=10;w<a.length;w++){const b=a[w];Qp(b[1],b,i,s,l,p)}}(s,i,p,a,c)}}function hd(i,s,a){if(en(i))return i.createElement(s,a);{const l=null!==a?function fl(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function m0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Ro(c,-1)),a.splice(l,1)}function yy(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&m0(c,l),s>0&&(i[a-1][4]=l[4]);const p=lo(i,10+s);!function rr(i,s){Qp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function _y(i,s){if(!(256&s[2])){const a=s[11];en(a)&&a.destroyNode&&Qp(i,s,a,3,null,null),function Ul(i){let s=i[13];if(!s)return vy(i[1],i);for(;s;){let a=null;if(Vr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Vr(s)&&vy(s[1],s),s=s[3];null===s&&(s=i),Vr(s)&&vy(s[1],s),a=s&&s[4]}s=a}}(s)}}function vy(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function _0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Eu)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=c[p[_]],b=p[_+1];try{b.call(w)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function y0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(s):Zt(s[_]),b=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?w.removeEventListener(a[p],b,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&en(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Fi(s[3])){a!==s[3]&&m0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Kp(i,s,a){return function SI(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Ut.None||c===Ut.Emulated)return null}return Xn(l,a)}(i,s.parent,a)}function cs(i,s,a,l,c){en(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function Ey(i,s,a){en(i)?i.appendChild(s,a):s.appendChild(a)}function v0(i,s,a,l,c){null!==l?cs(i,s,a,l,c):Ey(i,s,a)}function Lh(i,s){return en(i)?i.parentNode(s):s.parentNode}let wy=function w0(i,s,a){return 40&i.type?Xn(i,a):null};function Yp(i,s,a,l){const c=Kp(i,l,s),p=s[11],w=function E0(i,s,a){return wy(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let b=0;b<a.length;b++)v0(p,c,a[b],w,!1);else v0(p,c,a,w,!1)}function fd(i,s){if(null!==s){const a=s.type;if(3&a)return Xn(s,i);if(4&a)return Iy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return fd(i,l);{const c=i[s.index];return Fi(c)?Iy(-1,c):Zt(c)}}if(32&a)return Z(s,i)()||Zt(i[s.index]);{const l=I0(i,s);return null!==l?Array.isArray(l)?l[0]:fd(We(i[16]),l):fd(i,s.next)}}return null}function I0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Iy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return fd(l,c)}return s[7]}function Dy(i,s,a,l,c,p,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===s&&(w&&nr(Zt(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)Dy(i,s,a.child,l,c,p,!1),ea(s,i,c,w,p);else if(32&b){const A=Z(a,l);let S;for(;S=A();)ea(s,i,c,S,p);ea(s,i,c,w,p)}else 16&b?C0(i,s,l,a,c,p):ea(s,i,c,w,p);a=_?a.projectionNext:a.next}}function Qp(i,s,a,l,c,p){Dy(a,l,i.firstChild,s,c,p,!1)}function C0(i,s,a,l,c,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)ea(s,i,c,b[A],p);else Dy(i,s,b,_[3],c,p,!0)}function Ty(i,s,a){en(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function ds(i,s,a){en(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function wt(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const Ay="ng-template";function D0(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==wt(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function T0(i){return 4===i.type&&i.value!==Ay}function NI(i,s,a){return s===(4!==i.type||a?i.value:Ay)}function Vn(i,s,a){let l=4;const c=i.attrs||[],p=function kI(i){for(let s=0;s<i.length;s++)if(ni(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const b=s[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!NI(i,b,a)||""===b&&1===s.length){if(hs(l))return!1;_=!0}}else{const A=8&l?b:s[++w];if(8&l&&null!==i.attrs){if(!D0(i.attrs,A,a)){if(hs(l))return!1;_=!0}continue}const k=Sy(8&l?"class":b,c,T0(i),a);if(-1===k){if(hs(l))return!1;_=!0;continue}if(""!==A){let U;U=k>p?"":c[k+1].toLowerCase();const Q=8&l?U:null;if(Q&&-1!==wt(Q,A,0)||2&l&&A!==U){if(hs(l))return!1;_=!0}}}}else{if(!_&&!hs(l)&&!hs(b))return!1;if(_&&hs(b))continue;_=!1,l=b|1&l}}return hs(l)||_}function hs(i){return 0==(1&i)}function Sy(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function FI(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function A0(i,s,a=!1){for(let l=0;l<s.length;l++)if(Vn(i,s[l],a))return!0;return!1}function S0(i,s){return i?":not("+s.trim()+")":s}function x0(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!hs(_)&&(s+=S0(p,c),c=""),l=_,p=p||!hs(l);a++}return""!==c&&(s+=S0(p,c)),s}const St={};function xy(i){M0(Rt(),Ae(),Hn()+i,Aa())}function M0(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Na(s,p,a)}else{const p=i.preOrderHooks;null!==p&&is(s,p,0,a)}Gi(a)}function Wa(i,s){return i<<17|s<<2}function Bs(i){return i>>17&32767}function jl(i){return 2|i}function Cn(i){return(131068&i)>>2}function Ry(i,s){return-131069&i|s<<2}function Py(i){return 1|i}function $0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Ra(c),_.contentQueries(2,s[p],p)}}}function gd(i,s,a,l,c,p,_,w,b,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,$i(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=w||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function md(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Fy(i,s,a,l,c){const p=No(),_=Ta(),b=i.data[s]=function W0(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,s,a,l,c),function El(){return ct.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function to(){const i=ct.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ti(p,!0),p}function xi(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Ki(i,s,a){Oo(s);try{const l=i.viewQuery;null!==l&&ug(1,l,a);const c=i.template;null!==c&&G0(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&$0(i,s),i.staticViewQueries&&ug(2,i.viewQuery,a);const p=i.components;null!==p&&function H0(i,s){for(let a=0;a<s.length;a++)sE(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Fo()}}function Ka(i,s,a,l){const c=s[2];if(256==(256&c))return;Oo(s);const p=Aa();try{$i(s),function Sa(i){return ct.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&G0(i,s,a,2,l);const _=3==(3&c);if(!p)if(_){const A=i.preOrderCheckHooks;null!==A&&Na(s,A,null)}else{const A=i.preOrderHooks;null!==A&&is(s,A,0,null),Lo(s,0)}if(function sC(i){for(let s=_n(i);null!==s;s=fi(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Ro(p,1),c[2]|=1024}}}(s),function iC(i){for(let s=_n(i);null!==s;s=fi(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];ns(l)&&Ka(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&$0(i,s),!p)if(_){const A=i.contentCheckHooks;null!==A&&Na(s,A)}else{const A=i.contentHooks;null!==A&&is(s,A,1),Lo(s,1)}!function j0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Gi(~c);else{const p=c,_=a[++l],w=a[++l];wl(_,p),w(2,s[p])}}}finally{Gi(-1)}}(i,s);const w=i.components;null!==w&&function ky(i,s){for(let a=0;a<s.length;a++)oC(i,s[a])}(s,w);const b=i.viewQuery;if(null!==b&&ug(2,b,l),!p)if(_){const A=i.viewCheckHooks;null!==A&&Na(s,A)}else{const A=i.viewHooks;null!==A&&is(s,A,2),Lo(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ro(s[3],-1))}finally{Fo()}}function YI(i,s,a,l){const c=s[10],p=!Aa(),_=eo(s);try{p&&!_&&c.begin&&c.begin(),_&&Ki(i,s,l),Ka(i,s,a,l)}finally{p&&!_&&c.end&&c.end()}}function G0(i,s,a,l,c){const p=Hn(),_=2&l;try{Gi(-1),_&&s.length>20&&M0(i,s,20,Aa()),a(l,c)}finally{Gi(p)}}function Gl(i,s,a){!Da()||(function vo(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||gn(a,s),nr(l,s);const _=a.initialInputs;for(let w=c;w<p;w++){const b=i.data[w],A=Vi(b);A&&nE(s,a,b);const S=Go(s,i,w,a);nr(S,s),null!==_&&rC(0,w-c,S,b,0,_),A&&(er(a.index,s)[8]=S)}}(i,s,a,Xn(a,s)),128==(128&a.flags)&&function tC(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function vu(){return ct.lFrame.currentDirectiveIndex}();try{Gi(_);for(let b=l;b<c;b++){const A=i.data[b],S=s[b];xa(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Q0(A,S)}}finally{Gi(-1),xa(w)}}(i,s,a))}function tg(i,s,a=Xn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function q0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Gh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Gh(i,s,a,l,c,p,_,w,b,A){const S=20+l,k=S+c,U=function QI(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:St);return a}(S,k),Q="function"==typeof A?A():A;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function Ly(i,s,a,l){const c=lC(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&uE(i).push(l,c.length-1))}function qh(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function fs(i,s,a,l,c,p,_,w){const b=Xn(s,a);let S,A=s.inputs;!w&&null!=A&&(S=A[l])?(dE(i,a,S,l,c),Ac(s)&&function K0(i,s){const a=er(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function JI(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,en(p)?p.setProperty(b,l,c):ri(l)||(b.setProperty?b.setProperty(l,c):b[l]=c))}function rg(i,s,a,l){let c=!1;if(Da()){const p=function nC(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];A0(a,_.selectors,!1)&&(c||(c=[]),tr(gn(a,s),i,_.type),Vi(_)?(J0(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,eE(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const k=p[S];k.providersResolver&&k.providersResolver(k)}let w=!1,b=!1,A=xi(i,s,p.length,null);for(let S=0;S<p.length;S++){const k=p[S];a.mergedAttrs=In(a.mergedAttrs,k.hostAttrs),tE(i,a,s,A,k),ql(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function Vy(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let w=null,b=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,U=null===p||T0(s)?null:rE(k,p);_.push(U),w=qh(k,A,w),b=qh(S.outputs,A,b)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=b}(i,a)}_&&function X0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Re(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=In(a.mergedAttrs,a.attrs),c}function Y0(i,s,a,l,c,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~s.index;(function eC(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,c,_)}}function Q0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function J0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function ql(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Vi(s)&&(a[""]=i)}}function eE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function tE(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=fr(c.type)),_=new Eu(p,Vi(c),null);i.blueprint[l]=_,a[l]=_,Y0(i,s,0,l,xi(i,a,c.hostVars,St),c)}function nE(i,s,a){const l=Xn(s,i),c=q0(a),p=i[10],_=ig(i,gd(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function ta(i,s,a,l,c,p){const _=Xn(i,s);!function Uy(i,s,a,l,c,p,_){if(null==p)en(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?he(p):_(p,l||"",c);en(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,p,i.value,a,l,c)}function rC(i,s,a,l,c,p){const _=p[s];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const A=_[b++],S=_[b++],k=_[b++];null!==w?l.setInput(a,k,A,S):a[S]=k}}}function rE(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function By(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function oC(i,s){const a=er(s,i);if(ns(a)){const l=a[1];80&a[2]?Ka(l,a,l.template,a[8]):a[5]>0&&jy(a)}}function jy(i){for(let l=_n(i);null!==l;l=fi(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Ka(_,p,_.template,p[8])}else p[5]>0&&jy(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=er(a[l],i);ns(c)&&c[5]>0&&jy(c)}}function sE(i,s){const a=er(s,i),l=a[1];(function aC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Ki(l,a,a[8])}function ig(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function sg(i){for(;i;){i[2]|=64;const s=We(i);if(cl(i)&&!s)return i;i=s}return null}function $y(i,s,a){const l=s[10];l.begin&&l.begin();try{Ka(i,s,i.template,a)}catch(c){throw cE(s,c),c}finally{l.end&&l.end()}}function ag(i){!function og(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=ud(a),c=l[1];YI(c,l,c.template,a)}}(i[8])}function ug(i,s,a){Ra(0),s(i,a)}const vS=(()=>Promise.resolve(null))();function lC(i){return i[7]||(i[7]=[])}function uE(i){return i.cleanup||(i.cleanup=[])}function cE(i,s){const a=i[9],l=a?a.get(ld,null):null;l&&l.handleError(s)}function dE(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,c,l,w):b[w]=c}}function Ya(i,s,a){const l=Ss(s,i);!function dd(i,s,a){en(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function lg(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?p=w:1==p?c=de(c,w):2==p&&(l=de(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const fE=new ln("INJECTOR",-1);class pE{get(s,a=Wo){if(a===Wo){const l=new Error(`NullInjectorError: No provider for ${oe(s)}!`);throw l.name="NullInjectorError",l}return a}}const gE=new ln("Set Injector scope."),cg={},dC={};let Hy;function zh(){return void 0===Hy&&(Hy=new pE),Hy}function Gy(i,s=null,a=null,l){const c=qy(i,s,a,l);return c._resolveInjectorDefTypes(),c}function qy(i,s=null,a=null,l){return new Qa(i,a,s||zh(),l)}class Qa{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Br(a,w=>this.processProvider(w,s,a)),Br([s],w=>this.processInjectorType(w,[],p)),this.records.set(fE,_d(void 0,this));const _=this.records.get(gE);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:oe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Wo,l=dt.Default){this.assertNotDestroyed();const c=ne(this),p=En(void 0);try{if(!(l&dt.SkipSelf)){let w=this.records.get(s);if(void 0===w){const b=function mC(i){return"function"==typeof i||"object"==typeof i&&i instanceof ln}(s)&&Nt(s);w=b&&this.injectableDefInScope(b)?_d(dg(s),cg):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&dt.Self?zh():this.parent).get(s,a=l&dt.Optional&&a===Wo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[fo]=_[fo]||[]).unshift(oe(s)),c)throw _;return function Wn(i,s,a,l){const c=i[fo];throw s[M]&&c.unshift(s[M]),i.message=function as(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=oe(s);if(Array.isArray(s))c=s.map(oe).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):oe(w)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(I,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[fo]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{En(p),ne(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(oe(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=te(s)))return!1;let c=br(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,w=-1!==l.indexOf(_);if(void 0!==p&&(c=br(p)),null==c)return!1;if(null!=c.imports&&!w){let S;l.push(_);try{Br(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:U,providers:Q}=S[k];Br(Q,_e=>this.processProvider(_e,U,Q||L))}}this.injectorDefTypes.add(_);const b=fr(_)||(()=>new _);this.records.set(_,_d(b,cg));const A=c.providers;if(null!=A&&!w){const S=s;Br(A,k=>this.processProvider(k,S,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=vd(s=te(s))?s:te(s&&s.provide);const p=function hC(i,s,a){return _E(i)?_d(void 0,i.useValue):_d(yE(i),cg)}(s);if(vd(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=_d(void 0,cg,!0),_.factory=()=>Ft(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===cg&&(a.value=dC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function gC(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=te(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function dg(i){const s=Nt(i),a=null!==s?s.factory:fr(i);if(null!==a)return a;if(i instanceof ln)throw new Re(204,!1);if(i instanceof Function)return function mE(i){const s=i.length;if(s>0)throw function co(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function Kr(i){const s=i&&(i[Ni]||i[Yr]);if(s){const a=function ur(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function yE(i,s,a){let l;if(vd(i)){const c=te(i);return fr(c)||dg(c)}if(_E(i))l=()=>te(i.useValue);else if(function vE(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Ft(i.deps||[]));else if(function fC(i){return!(!i||!i.useExisting)}(i))l=()=>Le(te(i.useExisting));else{const c=te(i&&(i.useClass||i.provide));if(!function pC(i){return!!i.deps}(i))return fr(c)||dg(c);l=()=>new c(...Ft(i.deps))}return l}function _d(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function _E(i){return null!==i&&"object"==typeof i&&F in i}function vd(i){return"function"==typeof i}let $s=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Gy({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return Gy({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Wo,i.NULL=new pE,i.\u0275prov=zt({token:i,providedIn:"any",factory:()=>Le(fE)}),i.__NG_ELEMENT_ID__=-1,i})();function Eo(i,s){$c(ud(i)[1],un())}function Wy(i){let s=function yg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Vi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Ky(i.inputs),_.declaredInputs=Ky(i.declaredInputs),_.outputs=Ky(i.outputs);const w=c.hostBindings;w&&AC(i,w);const b=c.viewQuery,A=c.contentQueries;if(b&&IE(i,b),A&&TC(i,A),le(i.inputs,c.inputs),le(i.declaredInputs,c.declaredInputs),le(i.outputs,c.outputs),Vi(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===Wy&&(a=!1)}}s=Object.getPrototypeOf(s)}!function DC(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=In(c.hostAttrs,a=In(a,c.hostAttrs))}}(l)}function Ky(i){return i===dr?{}:i===L?[]:i}function IE(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function TC(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function AC(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Zl=null;function Wl(){if(!Zl){const i=kt.Symbol;if(i&&i.iterator)Zl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Zl=l)}}}return Zl}function Kl(i){return!!Zh(i)&&(Array.isArray(i)||!(i instanceof Map)&&Wl()in i)}function Zh(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ra(i,s,a){return i[s]=a}function gi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Eg(i,s,a,l){const c=Ae();return gi(c,xs(),s)&&(Rt(),ta(pn(),c,i,s,a,l)),Eg}function Ql(i,s,a,l){return gi(i,xs(),a)?s+he(a)+l:St}function Cg(i,s,a,l,c,p,_,w){const b=Ae(),A=Rt(),S=i+20,k=A.firstCreatePass?function TE(i,s,a,l,c,p,_,w,b){const A=s.consts,S=md(s,i,4,_||null,Di(A,w));rg(s,a,S,Di(A,b)),$c(s,S);const k=S.tViews=Gh(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,b,s,a,l,c,p,_):A.data[S];ti(k,!1);const U=b[11].createComment("");Yp(A,b,U,k),nr(U,b),ig(b,b[S]=By(U,b,U,k)),Li(k)&&Gl(A,b,k),null!=_&&tg(b,k,w)}function qu(i,s=dt.Default){const a=Ae();return null===a?Le(i,s):Ps(un(),a,te(i),s)}function $C(){throw new Error("invalid")}function Kh(i,s,a){const l=Ae();return gi(l,xs(),s)&&fs(Rt(),pn(),l,i,s,l[11],a,!1),Kh}function VE(i,s,a,l,c){const _=c?"class":"style";dE(i,a,s.inputs[_],_,l)}function l_(i,s,a,l){const c=Ae(),p=Rt(),_=20+i,w=c[11],b=c[_]=hd(w,s,function jc(){return ct.lFrame.currentNamespace}()),A=p.firstCreatePass?function HC(i,s,a,l,c,p,_){const w=s.consts,A=md(s,i,2,c,Di(w,p));return rg(s,a,A,Di(w,_)),null!==A.attrs&&lg(A,A.attrs,!1),null!==A.mergedAttrs&&lg(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];ti(A,!0);const S=A.mergedAttrs;null!==S&&Xe(w,b,S);const k=A.classes;null!==k&&ds(w,b,k);const U=A.styles;return null!==U&&Ty(w,b,U),64!=(64&A.flags)&&Yp(p,c,b,A),0===function pu(){return ct.lFrame.elementDepthCount}()&&nr(b,c),function Ca(){ct.lFrame.elementDepthCount++}(),Li(A)&&(Gl(p,c,A),function Hl(i,s,a){if(du(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,A,c)),null!==l&&tg(c,A),l_}function Rg(){let i=un();Ta()?function vl(){ct.lFrame.isParent=!1}():(i=i.parent,ti(i,!1));const s=i;!function ml(){ct.lFrame.elementDepthCount--}();const a=Rt();return a.firstCreatePass&&($c(a,i),du(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Gc(i){return 0!=(16&i.flags)}(s)&&VE(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function _p(i){return 0!=(32&i.flags)}(s)&&VE(a,s,Ae(),s.stylesWithoutHost,!1),Rg}function c_(i,s,a,l){return l_(i,s,a,l),Rg(),c_}function qC(){return Ae()}function BE(i){return!!i&&"function"==typeof i.then}function zC(i){return!!i&&"function"==typeof i.subscribe}const jE=zC;function Pg(i,s,a,l){const c=Ae(),p=Rt(),_=un();return function f_(i,s,a,l,c,p,_,w){const b=Li(l),S=i.firstCreatePass&&uE(i),k=s[8],U=lC(s);let Q=!0;if(3&l.type||w){const $e=Xn(l,s),z=w?w($e):$e,De=U.length,nt=w?Lt=>w(Zt(Lt[l.index])):l.index;if(en(a)){let Lt=null;if(!w&&b&&(Lt=function $E(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const w=s[7],b=c[p+2];return w.length>b?w[b]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Lt)(Lt.__ngLastListenerFn__||Lt).__ngNextListenerFn__=p,Lt.__ngLastListenerFn__=p,Q=!1;else{p=Ng(l,s,k,p,!1);const qt=a.listen(z,c,p);U.push(p,qt),S&&S.push(c,nt,De,De+1)}}else p=Ng(l,s,k,p,!0),z.addEventListener(c,p,_),U.push(p),S&&S.push(c,nt,De,_)}else p=Ng(l,s,k,p,!1);const _e=l.outputs;let ke;if(Q&&null!==_e&&(ke=_e[c])){const $e=ke.length;if($e)for(let z=0;z<$e;z+=2){const Er=s[ke[z]][ke[z+1]].subscribe(p),bc=U.length;U.push(p,Er),S&&S.push(c,l.index,bc,-(bc+1))}}}(p,c,c[11],_,i,s,!!a,l),Pg}function p_(i,s,a,l){try{return!1!==a(l)}catch(c){return cE(i,c),!1}}function Ng(i,s,a,l,c){return function p(_){if(_===Function)return l;const w=2&i.flags?er(i.index,s):s;0==(32&s[2])&&sg(w);let b=p_(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)b=p_(s,0,A,_)&&b,A=A.__ngNextListenerFn__;return c&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function g_(i=1){return function Hi(i){return(ct.lFrame.contextLView=function fh(i,s){for(;i>0;)s=s[15],i--;return s}(i,ct.lFrame.contextLView))[8]}(i)}function Yh(i,s,a){return y_(i,"",s,"",a),Yh}function y_(i,s,a,l,c){const p=Ae(),_=Ql(p,s,a,l);return _!==St&&fs(Rt(),pn(),p,i,_,p[11],c,!1),y_}function kg(i,s,a,l,c){const p=i[a+1],_=null===s;let w=l?Bs(p):Cn(p),b=!1;for(;0!==w&&(!1===b||_);){const S=i[w+1];KC(i[w],s)&&(b=!0,i[w+1]=l?Py(S):jl(S)),w=l?Bs(S):Cn(S)}b&&(i[a+1]=l?jl(p):Py(p))}function KC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ks(i,s)>=0}function ef(i,s){return function Gs(i,s,a,l){const c=Ae(),p=Rt(),_=function Ti(i){const s=ct.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function Lg(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Hn()],_=function E_(i,s){return s>=i.expandoStartIndex}(i,a);(function ew(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function JC(i,s,a,l){const c=function Ma(i){const s=ct.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Td(a=tf(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=tf(c,i,s,a,l),null===p){let b=function XC(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Cn(l))return i[Bs(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=tf(null,i,s,b[1],l),b=Td(b,s.attrs,l),function Dd(i,s,a,l){i[Bs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else p=function XE(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=Td(l,i[p].hostAttrs,a);return Td(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function Jh(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,w=Bs(_),b=Cn(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||ks(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==b){const U=Bs(i[w+1]);i[l+1]=Wa(U,w),0!==U&&(i[U+1]=Ry(i[U+1],l)),i[w+1]=function Uh(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Wa(w,0),0!==w&&(i[w+1]=Ry(i[w+1],l)),w=l;else i[l+1]=Wa(b,0),0===w?w=l:i[b+1]=Ry(i[b+1],l),b=l;A&&(i[l+1]=jl(i[l+1])),kg(i,S,l,!0),kg(i,S,l,!1),function WC(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&ks(p,s)>=0&&(a[l+1]=Py(a[l+1]))}(s,S,i,l,p),_=Wa(w,b),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==St&&gi(c,_,s)&&function Ug(i,s,a,l,c,p,_,w){if(!(3&s.type))return;const b=i.data,A=b[w+1];Ad(function P0(i){return 1==(1&i)}(A)?Bg(b,s,a,c,Cn(A),_):void 0)||(Ad(p)||function My(i){return 2==(2&i)}(A)&&(p=Bg(b,null,a,c,w,_)),function ye(i,s,a,l,c){const p=en(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:T.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=T.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,Ss(Hn(),a),c,p))}(p,p.data[Hn()],c,c[11],i,c[_+1]=function tD(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=oe(Qo(i)))),i}(s,a),l,_)}(i,s,null,!0),ef}function tf(i,s,a,l,c){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=s[w],l=Td(l,p.hostAttrs,c),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Td(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),zn(i,_,!!a||s[++p]))}return void 0===i?null:i}function Bg(i,s,a,l,c,p){const _=null===s;let w;for(;c>0;){const b=i[c],A=Array.isArray(b),S=A?b[1]:b,k=null===S;let U=a[c+1];U===St&&(U=k?L:void 0);let Q=k?Ua(U,l):S===l?U:void 0;if(A&&!Ad(Q)&&(Q=Ua(b,l)),Ad(Q)&&(w=Q,_))return w;const _e=i[c+1];c=_?Bs(_e):Cn(_e)}if(null!==s){let b=p?s.residualClasses:s.residualStyles;null!=b&&(w=Ua(b,l))}return w}function Ad(i){return void 0!==i}function jg(i,s=""){const a=Ae(),l=Rt(),c=i+20,p=l.firstCreatePass?md(l,c,1,s,null):l.data[c],_=a[c]=function cd(i,s){return en(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Yp(l,a,_,p),ti(p,!1)}function $g(i,s,a){const l=Ae(),c=Ql(l,i,s,a);return c!==St&&Ya(l,Hn(),c),$g}const Zu=void 0;var Wg=["en",[["a","p"],["AM","PM"],Zu],[["AM","PM"],Zu,Zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zu,"{1} 'at' {0}",Zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function iD(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Wu={};function Kg(i){const s=function Yg(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=P_(s);if(a)return a;const l=s.split("-")[0];if(a=P_(l),a)return a;if("en"===l)return Wg;throw new Error(`Missing locale data for the locale "${i}".`)}function Md(i){return Kg(i)[ft.PluralCase]}function P_(i){return i in Wu||(Wu[i]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[i]),Wu[i]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const Xa="en-US";let O_=Xa;function sc(i,s,a,l,c){if(i=te(i),Array.isArray(i))for(let p=0;p<i.length;p++)sc(i[p],s,a,l,c);else{const p=Rt(),_=Ae();let w=vd(i)?i:te(i.provide),b=yE(i);const A=un(),S=1048575&A.providerIndexes,k=A.directiveStart,U=A.providerIndexes>>20;if(vd(i)||!i.multi){const Q=new Eu(b,c,qu),_e=rm(w,s,c?S:S+U,k);-1===_e?(tr(gn(A,_),p,w),K_(p,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Q),_.push(Q)):(a[_e]=Q,_[_e]=Q)}else{const Q=rm(w,s,S+U,k),_e=rm(w,s,S,S+U),ke=Q>=0&&a[Q],$e=_e>=0&&a[_e];if(c&&!$e||!c&&!ke){tr(gn(A,_),p,w);const z=function vD(i,s,a,l,c){const p=new Eu(i,a,qu);return p.multi=[],p.index=s,p.componentProviders=0,Kn(p,c,l&&!a),p}(c?_D:yD,a.length,c,l,b);!c&&$e&&(a[_e].providerFactory=z),K_(p,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(z),_.push(z)}else K_(p,i,Q>-1?Q:_e,Kn(a[c?_e:Q],b,!c&&l));!c&&l&&$e&&a[_e].componentProviders++}}}function K_(i,s,a,l){const c=vd(s),p=function hg(i){return!!i.useClass}(s);if(c||p){const b=(p?te(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,b]):A[S+1].push(l,b)}else A.push(a,b)}}}function Kn(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function rm(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function yD(i,s,a,l){return Y_(this.multi,[])}function _D(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Go(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),Y_(c,p);for(let b=_;b<w.length;b++)p.push(w[b])}else p=[],Y_(c,p);return p}function Y_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Q_(i,s=[]){return a=>{a.providersResolver=(l,c)=>function yf(i,s,a){const l=Rt();if(l.firstCreatePass){const c=Vi(i);sc(a,l.data,l.blueprint,c,!0),sc(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class J_{}class $w{resolveComponentFactory(s){throw function im(i){const s=Error(`No component factory found for ${oe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let sm=(()=>{class i{}return i.NULL=new $w,i})();function ev(){return ua(un(),Ae())}function ua(i,s){return new Ld(Xn(i,s))}let Ld=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=ev,i})();function tv(i){return i instanceof Ld?i.nativeElement:i}class rv{}let iv=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ED(){const i=Ae(),a=er(un().index,i);return function om(i){return i[11]}(Vr(a)?a:i)}(),i})(),Hw=(()=>{class i{}return i.\u0275prov=zt({token:i,providedIn:"root",factory:()=>null}),i})();class Vd{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const sv=new Vd("13.2.7"),am={};function Ud(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(Zt(p)),Fi(p))for(let w=10;w<p.length;w++){const b=p[w],A=b[1].firstChild;null!==A&&Ud(b[1],b,A,l)}const _=a.type;if(8&_)Ud(i,s,a.child,l);else if(32&_){const w=Z(a,s);let b;for(;b=w();)l.push(b)}else if(16&_){const w=I0(s,a);if(Array.isArray(w))l.push(...w);else{const b=We(s[16]);Ud(b[1],b,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class oc{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Ud(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Fi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(yy(s,l),lo(a,l))}this._attachedToViewContainer=!1}_y(this._lView[1],this._lView)}onDestroy(s){Ly(this._lView[1],this._lView,null,s)}markForCheck(){sg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$y(this._lView[1],this._lView,this.context)}checkNoChanges(){!function oE(i,s,a){yu(!0);try{$y(i,s,a)}finally{yu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fh(i,s){Qp(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class Gw extends oc{constructor(s){super(s),this._view=s}detectChanges(){ag(this._view)}checkNoChanges(){!function aE(i){yu(!0);try{ag(i)}finally{yu(!1)}}(this._view)}get context(){return null}}class _f extends sm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Fn(s);return new um(a,this.ngModule)}}function ov(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class um extends J_{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function VI(i){return i.map(x0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ov(this.componentDef.inputs)}get outputs(){return ov(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function ac(i,s){return{get:(a,l,c)=>{const p=i.get(a,am,c);return p!==am||l===am?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(rv,wa),w=p.get(Hw,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function Z0(i,s,a){if(en(i))return i.selectRootElement(s,a===Ut.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):hd(_.createRenderer(null,this.componentDef),A,function qw(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,U=function gr(i,s){return{components:[],scheduler:i||gy,clean:vS,playerHandler:s||null,flags:0}}(),Q=Gh(0,null,null,1,0,null,null,null,null,null),_e=gd(null,Q,U,k,null,null,_,b,w,p);let ke,$e;Oo(_e);try{const z=function wE(i,s,a,l,c,p){const _=a[1];a[20]=i;const b=md(_,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(lg(b,A,!0),null!==i&&(Xe(c,i,A),null!==b.classes&&ds(c,i,b.classes),null!==b.styles&&Ty(c,i,b.styles)));const S=l.createRenderer(i,s),k=gd(a,q0(s),null,s.onPush?64:16,a[20],b,l,S,p||null,null);return _.firstCreatePass&&(tr(gn(b,a),_,s.type),J0(_,b),eE(b,a.length,1)),ig(a,k),a[20]=k}(S,this.componentDef,_e,_,b);if(S)if(l)Xe(b,S,["ng-version",sv.full]);else{const{attrs:De,classes:nt}=function UI(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!hs(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);De&&Xe(b,S,De),nt&&nt.length>0&&ds(b,S,nt.join(" "))}if($e=dn(Q,20),void 0!==a){const De=$e.projection=[];for(let nt=0;nt<this.ngContentSelectors.length;nt++){const Lt=a[nt];De.push(null!=Lt?Array.from(Lt):null)}}ke=function bE(i,s,a,l,c){const p=a[1],_=function yd(i,s,a){const l=un();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),tE(i,l,s,xi(i,s,1,null),a));const c=Go(s,i,l.directiveStart,l);nr(c,s);const p=Xn(l,s);return p&&nr(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(b=>b(_,s)),s.contentQueries){const b=un();s.contentQueries(1,_,b.directiveStart)}const w=un();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Gi(w.index),Y0(a[1],w,0,w.directiveStart,w.directiveEnd,s),Q0(s,_)),_}(z,this.componentDef,_e,U,[Eo]),Ki(Q,_e,null)}finally{Fo()}return new Zw(this.componentType,ke,ua($e,_e),_e,$e)}}class Zw extends class jw{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Gw(c),this.componentType=s}get injector(){return new so(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Mr{}class av{}const uc=new Map;class uv extends Mr{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _f(this);const l=Ln(s);this._bootstrapComponents=ls(l.bootstrap),this._r3Injector=qy(s,a,[{provide:Mr,useValue:this},{provide:sm,useValue:this.componentFactoryResolver}],oe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=$s.THROW_IF_NOT_FOUND,l=dt.Default){return s===$s||s===Mr||s===fE?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class lv extends av{constructor(s){super(),this.moduleType=s,null!==Ln(s)&&function bD(i){const s=new Set;!function a(l){const c=Ln(l,!0),p=c.id;null!==p&&(function Ww(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${oe(s)} vs ${oe(s.name)}`)}(p,uc.get(p),l),uc.set(p,l));const _=ls(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new uv(this.moduleType,s)}}function Ef(i,s,a){const l=bn()+i,c=Ae();return c[l]===St?ra(c,l,a?s.call(a):s()):function Wh(i,s){return i[s]}(c,l)}function cm(i,s,a,l,c,p){const _=s+a;return gi(i,_,c)?ra(i,_+1,p?l.call(p,c):l(c)):function eu(i,s){const a=i[s];return a===St?void 0:a}(i,_+1)}function ce(i,s){const a=Rt();let l;const c=i+20;a.firstCreatePass?(l=function Me(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const p=l.factory||(l.factory=fr(l.type)),_=En(qu);try{const w=Ai(!1),b=p();return Ai(w),function RC(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Ae(),c,b),b}finally{En(_)}}function yr(i,s,a){const l=i+20,c=Ae(),p=function ji(i,s){return i[s]}(c,l);return function wf(i,s){return i[1].data[s].pure}(c,l)?cm(c,bn(),s,p.transform,a,p):p.transform(a)}function dm(i){return s=>{setTimeout(i,void 0,s)}}const la=class SD extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let w=s,b=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;w=null===(c=k.next)||void 0===c?void 0:c.bind(k),b=null===(p=k.error)||void 0===p?void 0:p.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(b=dm(b),w&&(w=dm(w)),A&&(A=dm(A)));const S=super.subscribe({next:w,error:b,complete:A});return s instanceof X.w0&&s.add(S),S}};function OS(){return this._results[Wl()]()}class Ri{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Wl(),l=Ri.prototype;l[a]||(l[a]=OS)}get changes(){return this._changes||(this._changes=new la)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=oi(s);(this._changesDetected=!function Sl(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let bf=(()=>{class i{}return i.__NG_ELEMENT_ID__=jd,i})();const eb=bf,Pt=class extends eb{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=gd(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Ki(a,l,s),new oc(l)}};function jd(){return If(un(),Ae())}function If(i,s){return 4&i.type?new Pt(s,i,ua(i,s)):null}let An=(()=>{class i{}return i.__NG_ELEMENT_ID__=Et,i})();function Et(){return Ht(un(),Ae())}const tb=An,el=class extends tb{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return ua(this._hostTNode,this._hostLView)}get injector(){return new so(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ms(this._hostTNode,this._hostLView);if(qc(s)){const a=nn(s,this._hostLView),l=qi(s);return new so(a[1].data[l+8],a)}return new so(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=dv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function uo(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const k=a||{};w=k.index,l=k.injector,c=k.projectableNodes,p=k.ngModuleRef}const b=_?s:new um(Fn(s)),A=l||this.parentInjector;if(!p&&null==b.ngModule){const U=(_?A:this.parentInjector).get(Mr,null);U&&(p=U)}const S=b.create(A,c,void 0,p);return this.insert(S.hostView,w),S}insert(s,a){const l=s._lView,c=l[1];if(function Ia(i){return Fi(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],U=new el(k,k[6],k[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function Bl(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],zo(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function ju(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,p);const w=Iy(p,_),b=l[11],A=Lh(b,_[7]);return null!==A&&function kh(i,s,a,l,c,p){l[0]=c,l[6]=s,Qp(i,l,a,1,c,p)}(c,_[6],b,l,A,w),s.attachToViewContainerRef(),zo(lc(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=dv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=yy(this._lContainer,a);l&&(lo(lc(this._lContainer),a),_y(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=yy(this._lContainer,a);return l&&null!=lo(lc(this._lContainer),a)?new oc(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function dv(i){return i[8]}function lc(i){return i[8]||(i[8]=[])}function Ht(i,s){let a;const l=s[i.index];if(Fi(l))a=l;else{let c;if(8&i.type)c=Zt(l);else{const p=s[11];c=p.createComment("");const _=Xn(i,s);cs(p,Lh(p,_),c,function MI(i,s){return en(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=By(l,s,c,i),ig(s,a)}return new el(a,i,s)}class hv{constructor(s){this.queryList=s,this.matches=null}clone(){return new hv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yn{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new Yn(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Hd(s,a).matches&&this.queries[a].setDirty()}}class nb{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class ca{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new ca(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Sn{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Sn(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,cc(a,p)),this.matchTNodeWithReadOption(s,a,Ho(a,s,p,!1,!1))}else l===bf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ho(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Ld||c===An||c===bf&&4&a.type)this.addMatch(a.index,-2);else{const p=Ho(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function cc(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function rb(i,s,a,l){return-1===a?function fv(i,s){return 11&i.type?ua(i,s):4&i.type?If(i,s):null}(s,i):-2===a?function Df(i,s,a){return a===Ld?ua(s,i):a===bf?If(s,i):a===An?Ht(s,i):void 0}(i,s,l):Go(i,i[1],a,s)}function ib(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const A=_[b];w.push(A<0?null:rb(s,p[A],_[b+1],a.metadata.read))}c.matches=w}return c.matches}function wo(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=ib(i,s,c,a);for(let w=0;w<p.length;w+=2){const b=p[w];if(b>0)l.push(_[w/2]);else{const A=p[w+1],S=s[-b];for(let k=10;k<S.length;k++){const U=S[k];U[17]===U[3]&&wo(U[1],U,A,l)}if(null!==S[9]){const k=S[9];for(let U=0;U<k.length;U++){const Q=k[U];wo(Q[1],Q,A,l)}}}}}return l}function $d(i){const s=Ae(),a=Rt(),l=bl();Ra(l+1);const c=Hd(a,l);if(i.dirty&&eo(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?wo(a,s,l,[]):ib(a,s,c,l);i.reset(p,tv),i.notifyOnChanges()}return!0}return!1}function pv(i,s,a,l){const c=Rt();if(c.firstCreatePass){const p=un();(function nl(i,s,a){null===i.queries&&(i.queries=new ca),i.queries.track(new Sn(s,a))})(c,new nb(s,a,l),p.index),function da(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Af(i,s,a){const l=new Ri(4==(4&a));Ly(i,s,l,l.destroy),null===s[19]&&(s[19]=new Yn),s[19].queries.push(new hv(l))}(c,Ae(),a)}function He(){return function tl(i,s){return i[19].queries[s].queryList}(Ae(),bl())}function Hd(i,s){return i.queries.getByIndex(s)}function Nf(...i){}const ha=new ln("Application Initializer");let mm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Nf,this.reject=Nf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(BE(p))a.push(p);else if(jE(p)){const _=new Promise((w,b)=>{p.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Le(ha,8))},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const mc=new ln("AppId",{providedIn:"root",factory:function pb(){return`${Of()}${Of()}${Of()}`}});function Of(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ym=new ln("Platform Initializer"),yc=new ln("Platform ID"),ms=new ln("appBootstrapListener");let zd=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();const kf=new ln("LocaleId",{providedIn:"root",factory:()=>ut(kf,dt.Optional|dt.SkipSelf)||function mb(){return"undefined"!=typeof $localize&&$localize.locale||Xa}()}),Iv=new ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class yb{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let _b=(()=>{class i{compileModuleSync(a){return new lv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=ls(Ln(a).declarations).reduce((_,w)=>{const b=Fn(w);return b&&_.push(new um(b)),_},[]);return new yb(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const VD=(()=>Promise.resolve(0))();function Dv(i){"undefined"==typeof Zone?VD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ei{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new la(!1),this.onMicrotaskEmpty=new la(!1),this.onStable=new la(!1),this.onError=new la(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Eb(){let i=kt.requestAnimationFrame,s=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function wb(i){const s=()=>{!function vc(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,sl(i),i.isCheckStableRunning=!0,_m(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),sl(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,w)=>{try{return Tv(i),a.invokeTask(c,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Av(i)}},onInvoke:(a,l,c,p,_,w,b)=>{try{return Tv(i),a.invoke(c,p,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),Av(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,sl(i),_m(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ei.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ei.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,_c,Nf,Nf);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const _c={};function _m(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function sl(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Tv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Av(i){i._nesting--,_m(i)}class Ff{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new la,this.onMicrotaskEmpty=new la,this.onStable=new la,this.onError=new la}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let bb=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ei.assertNotInAngularZone(),Dv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Le(Ei))},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})(),Ib=(()=>{class i{constructor(){this._applications=new Map,Zd.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Zd.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();class sr{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function vm(i){Zd=i}let Io,Zd=new sr;const xv=new ln("AllowMultipleToken");class Lf{constructor(s,a){this.name=s,this.token=a}}function Mv(i,s,a=[]){const l=`Platform: ${s}`,c=new ln(l);return(p=[])=>{let _=Wd();if(!_||_.injector.get(xv,!1))if(i)i(a.concat(p).concat({provide:c,useValue:!0}));else{const w=a.concat(p).concat({provide:c,useValue:!0},{provide:gE,useValue:"platform"});!function Ec(i){if(Io&&!Io.destroyed&&!Io.injector.get(xv,!1))throw new Re(400,"");Io=i.get(Em);const s=i.get(ym,null);s&&s.forEach(a=>a())}($s.create({providers:w,name:l}))}return function Db(i){const s=Wd();if(!s)throw new Re(401,"");return s}()}}function Wd(){return Io&&!Io.destroyed?Io:null}let Em=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function BD(i,s){let a;return a="noop"===i?new Ff:("zone.js"===i?void 0:i)||new Ei({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:Ei,useValue:w}];return w.run(()=>{const A=$s.create({providers:b,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(ld,null);if(!k)throw new Re(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Q=>{k.handleError(Q)}});S.onDestroy(()=>{bm(this._modules,S),U.unsubscribe()})}),function or(i,s,a){try{const l=a();return BE(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const U=S.injector.get(mm);return U.runInitializers(),U.donePromise.then(()=>(function sf(i){Ot(i,"Expected localeId to be defined"),"string"==typeof i&&(O_=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(kf,Xa)||Xa),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Gt({},l);return function Sv(i,s,a){const l=new lv(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(wm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Le($s))},i.\u0275prov=zt({token:i,factory:i.\u0275fac}),i})();function Gt(i,s){return Array.isArray(s)?s.reduce(Gt,i):Object.assign(Object.assign({},i),s)}let wm=(()=>{class i{constructor(a,l,c,p,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),b=new O.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Ei.assertNotInAngularZone(),Dv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Ei.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ue.T)(w,b.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof J_?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function Cb(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Mr),w=c.create($s.NULL,[],l||c.selector,p),b=w.location.nativeElement,A=w.injector.get(bb,null),S=A&&w.injector.get(Ib);return A&&S&&S.registerApplication(b,A),w.onDestroy(()=>{this.detachView(w.hostView),bm(this.components,w),S&&S.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;bm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(ms,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Le(Ei),Le($s),Le(ld),Le(sm),Le(mm))},i.\u0275prov=zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function bm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let ys=!0,Tb=!1;function Rv(){return Tb=!0,ys}function Vf(){if(Tb)throw new Error("Cannot enable prod mode after platform setup.");ys=!1}let $D=(()=>{class i{}return i.__NG_ELEMENT_ID__=Im,i})();function Im(i){return function Uf(i,s,a){if(Ac(i)&&!a){const l=er(i.index,s);return new oc(l,l)}return 47&i.type?new oc(s[16],s):null}(un(),Ae(),16==(16&i))}class Ov{constructor(){}supports(s){return Kl(s)}create(s){return new Rb(s)}}const Mb=(i,s)=>s;class Rb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Mb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Sm(l,c,p)?a:l,w=Sm(_,c,p),b=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=w-c,S=b-c;if(A!=S){for(let U=0;U<A;U++){const Q=U<p.length?p[U]:p[U]=0,_e=Q+U;S<=_e&&_e<A&&(p[U]=Q+1)}p[_.previousIndex]=S-A}}w!==b&&s(_,w,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Kl(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else c=0,function Yy(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Wl()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new KD(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Yd),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Yd),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class KD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Yd{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new YD,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sm(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Pb{constructor(){}supports(s){return s instanceof Map||Zh(s)}create(){return new Nb}}class Nb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Zh(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new Ob(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Ob{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kv(){return new Fv([new Ov])}let Fv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||kv()),deps:[[i,new li,new ai]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=zt({token:i,providedIn:"root",factory:kv}),i})();function kb(){return new Lv([new Pb])}let Lv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||kb()),deps:[[i,new li,new ai]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=zt({token:i,providedIn:"root",factory:kb}),i})();const Fb=Mv(null,"core",[{provide:yc,useValue:"unknown"},{provide:Em,deps:[$s]},{provide:Ib,deps:[]},{provide:zd,deps:[]}]);let Pi=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Le(wm))},i.\u0275mod=Ir({type:i}),i.\u0275inj=$t({}),i})()},3942:(Je,we,N)=>{N.d(we,{Z:()=>Re});var h=N(2090),X=N(4859),O=N(9681),ue=N(1877);class re{constructor(he,Ce){this._delegate=he,this.firebase=Ce,(0,O._addComponent)(he,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,Ce=O._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(he);return!Ke.isInitialized()&&"EXPLICIT"===(null===(qe=Ke.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:Ce})}_removeServiceInstance(he,Ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ce)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function de(){const Ve=function oe(Ve){const he={},Ce={__esModule:!0,initializeApp:function Te(Be,j={}){const ve=O.initializeApp(Be,j);if((0,h.r3)(he,ve.name))return he[ve.name];const W=new Ve(ve,Ce);return he[ve.name]=W,W},app:Ke,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function be(Be){const j=Be.name,ve=j.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const W=(ie=Ke())=>{if("function"!=typeof ie[ve])throw le.create("invalid-app-argument",{appName:j});return ie[ve]()};void 0!==Be.serviceProps&&(0,h.ZB)(W,Be.serviceProps),Ce[ve]=W,Ve.prototype[ve]=function(...ie){return this._getService.bind(this,j).apply(this,Be.multipleInstances?ie:[])}}return"PUBLIC"===Be.type?Ce[ve]:null},removeApp:function qe(Be){delete he[Be]},useAsService:function je(Be,j){return"serverAuth"===j?null:j},modularAPIs:O}};function Ke(Be){if(!(0,h.r3)(he,Be=Be||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Be});return he[Be]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Ee(){return Object.keys(he).map(Be=>he[Be])}}),Ke.App=Ve,Ce}(re);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function he(Ce){(0,h.ZB)(Ve,Ce)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ve}(),B=new ue.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=$;!function Se(Ve){(0,O.registerVersion)("@firebase/app-compat","0.1.26",Ve)}()},9681:(Je,we,N)=>{N.r(we),N.d(we,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Ni,_DEFAULT_ENTRY_NAME:()=>Ot,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>zt,_apps:()=>Kt,_clearComponents:()=>Xi,_components:()=>vn,_getProvider:()=>$t,_registerComponent:()=>wr,_removeServiceInstance:()=>Nt,deleteApp:()=>dt,getApp:()=>Yr,getApps:()=>bi,initializeApp:()=>ws,onLog:()=>En,registerVersion:()=>fn,setLogLevel:()=>Zs});var h=N(5861),X=N(4859),O=N(1877),ue=N(2090),re=N(8766);class pe{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function le(H){const J=H.getComponent();return"VERSION"===(null==J?void 0:J.type)}(xe)){const Qe=xe.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(xe=>xe).join(" ")}}const oe="@firebase/app",$=new O.Yd("@firebase/app"),Ot="[DEFAULT]",Ye={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Kt=new Map,vn=new Map;function Jt(H,J){try{H.container.addComponent(J)}catch(xe){$.debug(`Component ${J.name} failed to register with FirebaseApp ${H.name}`,xe)}}function zt(H,J){H.container.addOrOverwriteComponent(J)}function wr(H){const J=H.name;if(vn.has(J))return $.debug(`There were multiple attempts to register component ${J}.`),!1;vn.set(J,H);for(const xe of Kt.values())Jt(xe,H);return!0}function $t(H,J){const xe=H.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),H.container.getProvider(J)}function Nt(H,J,xe=Ot){$t(H,J).clearInstance(xe)}function Xi(){vn.clear()}const ur=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class br{constructor(J,xe,Qe){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}const Ni="9.8.2";function ws(H,J={}){"object"!=typeof J&&(J={name:J});const xe=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},J),Qe=xe.name;if("string"!=typeof Qe||!Qe)throw ur.create("bad-app-name",{appName:String(Qe)});const lt=Kt.get(Qe);if(lt){if((0,ue.vZ)(H,lt.options)&&(0,ue.vZ)(xe,lt.config))return lt;throw ur.create("duplicate-app",{appName:Qe})}const _t=new X.H0(Qe);for(const mt of vn.values())_t.addComponent(mt);const sn=new br(H,xe,_t);return Kt.set(Qe,sn),sn}function Yr(H=Ot){const J=Kt.get(H);if(!J)throw ur.create("no-app",{appName:H});return J}function bi(){return Array.from(Kt.values())}function dt(H){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(H){const J=H.name;Kt.has(J)&&(Kt.delete(J),yield Promise.all(H.container.getProviders().map(xe=>xe.delete())),H.isDeleted=!0)})).apply(this,arguments)}function fn(H,J,xe){var Qe;let lt=null!==(Qe=Ye[H])&&void 0!==Qe?Qe:H;xe&&(lt+=`-${xe}`);const _t=lt.match(/\s|\//),sn=J.match(/\s|\//);if(_t||sn){const mt=[`Unable to register library "${lt}" with version "${J}":`];return _t&&mt.push(`library name "${lt}" contains illegal characters (whitespace or "/")`),_t&&sn&&mt.push("and"),sn&&mt.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void $.warn(mt.join(" "))}wr(new X.wA(`${lt}-version`,()=>({library:lt,version:J}),"VERSION"))}function En(H,J){if(null!==H&&"function"!=typeof H)throw ur.create("invalid-log-argument");(0,O.Am)(H,J)}function Zs(H){(0,O.Ub)(H)}const Mn="firebase-heartbeat-store";let Ii=null;function Co(){return Ii||(Ii=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(H,J)=>{0===J&&H.createObjectStore(Mn)}}).catch(H=>{throw ur.create("storage-open",{originalErrorMessage:H.message})})),Ii}function rt(){return(rt=(0,h.Z)(function*(H){try{return(yield Co()).transaction(Mn).objectStore(Mn).get(Xr(H))}catch(J){throw ur.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function pt(H,J){return lr.apply(this,arguments)}function lr(){return(lr=(0,h.Z)(function*(H,J){try{const Qe=(yield Co()).transaction(Mn,"readwrite");return yield Qe.objectStore(Mn).put(J,Xr(H)),Qe.done}catch(xe){throw ur.create("storage-set",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function Xr(H){return`${H.name}!${H.options.appId}`}class cr{constructor(J){this.container=J,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new G(xe),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var J=this;return(0,h.Z)(function*(){const Qe=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),lt=dr();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==lt&&!J._heartbeatsCache.heartbeats.some(_t=>_t.date===lt))return J._heartbeatsCache.heartbeats.push({date:lt,agent:Qe}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(_t=>{const sn=new Date(_t.date).valueOf();return Date.now()-sn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,h.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const xe=dr(),{heartbeatsToSend:Qe,unsentEntries:lt}=function L(H,J=1024){const xe=[];let Qe=H.slice();for(const lt of H){const _t=xe.find(sn=>sn.agent===lt.agent);if(_t){if(_t.dates.push(lt.date),q(xe)>J){_t.dates.pop();break}}else if(xe.push({agent:lt.agent,dates:[lt.date]}),q(xe)>J){xe.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:xe,unsentEntries:Qe}}(J._heartbeatsCache.heartbeats),_t=(0,ue.L)(JSON.stringify({version:2,heartbeats:Qe}));return J._heartbeatsCache.lastSentHeartbeatDate=xe,lt.length>0?(J._heartbeatsCache.heartbeats=lt,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),_t})()}}function dr(){return(new Date).toISOString().substring(0,10)}class G{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,h.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Ut(H){return rt.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var xe=this;return(0,h.Z)(function*(){var Qe;if(yield xe._canUseIndexedDBPromise){const _t=yield xe.read();return pt(xe.app,{lastSentHeartbeatDate:null!==(Qe=J.lastSentHeartbeatDate)&&void 0!==Qe?Qe:_t.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var xe=this;return(0,h.Z)(function*(){var Qe;if(yield xe._canUseIndexedDBPromise){const _t=yield xe.read();return pt(xe.app,{lastSentHeartbeatDate:null!==(Qe=J.lastSentHeartbeatDate)&&void 0!==Qe?Qe:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...J.heartbeats]})}})()}}function q(H){return(0,ue.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Ie(H){wr(new X.wA("platform-logger",J=>new pe(J),"PRIVATE")),wr(new X.wA("heartbeat",J=>new cr(J),"PRIVATE")),fn(oe,"0.7.25",H),fn(oe,"0.7.25","esm2017"),fn("fire-js","")}("")},4859:(Je,we,N)=>{N.d(we,{wA:()=>O,H0:()=>oe});var h=N(5861),X=N(2090);class O{constructor($,B,te){this.name=$,this.instanceFactory=B,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class re{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const te=new X.BH;if(this.instancesDeferred.set(B,te),this.isInitialized(B)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:B});Ge&&te.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const te=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ge=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Se){if(Ge)return null;throw Se}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function le(de){return"EAGER"===de.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(B){}for(const[B,te]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(B);try{const Se=this.getOrInitializeService({instanceIdentifier:Ge});te.resolve(Se)}catch(Se){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...B.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,te=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:te,options:B});for(const[Se,Re]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Se)&&Re.resolve(Ge);return Ge}onInit($,B){var te;const Ge=this.normalizeInstanceIdentifier(B),Se=null!==(te=this.onInitCallbacks.get(Ge))&&void 0!==te?te:new Set;Se.add($),this.onInitCallbacks.set(Ge,Se);const Re=this.instances.get(Ge);return Re&&$(Re,Ge),()=>{Se.delete($)}}invokeOnInitCallbacks($,B){const te=this.onInitCallbacks.get(B);if(te)for(const Ge of te)try{Ge($,B)}catch(Se){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let te=this.instances.get($);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(de=$,de===ue?void 0:de),options:B}),this.instances.set($,te),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(te,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,te)}catch(Ge){}var de;return te||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new re($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,we,N)=>{N.d(we,{in:()=>X,Yd:()=>le,Ub:()=>oe,Am:()=>de});const h=[];var X=(()=>{return($=X||(X={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",X;var $})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ue=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},pe=($,B,...te)=>{if(B<$.logLevel)return;const Ge=(new Date).toISOString(),Se=re[B];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Se](`[${Ge}]  ${$.name}:`,...te)};class le{constructor(B){this.name=B,this._logLevel=ue,this._logHandler=pe,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in X))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...B),this._logHandler(this,X.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...B),this._logHandler(this,X.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,X.INFO,...B),this._logHandler(this,X.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,X.WARN,...B),this._logHandler(this,X.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...B),this._logHandler(this,X.ERROR,...B)}}function oe($){h.forEach(B=>{B.setLogLevel($)})}function de($,B){for(const te of h){let Ge=null;B&&B.level&&(Ge=O[B.level]),te.userLogHandler=null===$?null:(Se,Re,...Ve)=>{const he=Ve.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(qe){return null}}).filter(Ce=>Ce).join(" ");Re>=(null!=Ge?Ge:Se.logLevel)&&$({level:X[Re].toLowerCase(),message:he,args:Ve,type:Se.name})}}}},8766:(Je,we,N)=>{N.d(we,{Lj:()=>Te,X3:()=>Ke});var h=N(5861);let O,ue;const le=new WeakMap,oe=new WeakMap,de=new WeakMap,$=new WeakMap,B=new WeakMap;let Se={get(j,ve,W){if(j instanceof IDBTransaction){if("done"===ve)return oe.get(j);if("objectStoreNames"===ve)return j.objectStoreNames||de.get(j);if("store"===ve)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return Ce(j[ve])},set:(j,ve,W)=>(j[ve]=W,!0),has:(j,ve)=>j instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in j};function he(j){return"function"==typeof j?function Ve(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...ve){return j.apply(qe(this),ve),Ce(le.get(this))}:function(...ve){return Ce(j.apply(qe(this),ve))}:function(ve,...W){const ie=j.call(qe(this),ve,...W);return de.set(ie,ve.sort?ve.sort():[ve]),Ce(ie)}}(j):(j instanceof IDBTransaction&&function Ge(j){if(oe.has(j))return;const ve=new Promise((W,ie)=>{const ee=()=>{j.removeEventListener("complete",me),j.removeEventListener("error",ae),j.removeEventListener("abort",ae)},me=()=>{W(),ee()},ae=()=>{ie(j.error||new DOMException("AbortError","AbortError")),ee()};j.addEventListener("complete",me),j.addEventListener("error",ae),j.addEventListener("abort",ae)});oe.set(j,ve)}(j),((j,ve)=>ve.some(W=>j instanceof W))(j,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Se):j)}function Ce(j){if(j instanceof IDBRequest)return function te(j){const ve=new Promise((W,ie)=>{const ee=()=>{j.removeEventListener("success",me),j.removeEventListener("error",ae)},me=()=>{W(Ce(j.result)),ee()},ae=()=>{ie(j.error),ee()};j.addEventListener("success",me),j.addEventListener("error",ae)});return ve.then(W=>{W instanceof IDBCursor&&le.set(W,j)}).catch(()=>{}),B.set(ve,j),ve}(j);if($.has(j))return $.get(j);const ve=he(j);return ve!==j&&($.set(j,ve),B.set(ve,j)),ve}const qe=j=>B.get(j);function Ke(j,ve,{blocked:W,upgrade:ie,blocking:ee,terminated:me}={}){const ae=indexedDB.open(j,ve),Ne=Ce(ae);return ie&&ae.addEventListener("upgradeneeded",ot=>{ie(Ce(ae.result),ot.oldVersion,ot.newVersion,Ce(ae.transaction))}),W&&ae.addEventListener("blocked",()=>W()),Ne.then(ot=>{me&&ot.addEventListener("close",()=>me()),ee&&ot.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Ne}function Te(j,{blocked:ve}={}){const W=indexedDB.deleteDatabase(j);return ve&&W.addEventListener("blocked",()=>ve()),Ce(W).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],je=new Map;function Be(j,ve){if(!(j instanceof IDBDatabase)||ve in j||"string"!=typeof ve)return;if(je.get(ve))return je.get(ve);const W=ve.replace(/FromIndex$/,""),ie=ve!==W,ee=be.includes(W);if(!(W in(ie?IDBIndex:IDBObjectStore).prototype)||!ee&&!Ee.includes(W))return;const me=function(){var ae=(0,h.Z)(function*(Ne,...ot){const Vt=this.transaction(Ne,ee?"readwrite":"readonly");let Ot=Vt.store;return ie&&(Ot=Ot.index(ot.shift())),(yield Promise.all([Ot[W](...ot),ee&&Vt.done]))[0]});return function(ot){return ae.apply(this,arguments)}}();return je.set(ve,me),me}!function Re(j){Se=j(Se)}(j=>h1(d1({},j),{get:(ve,W,ie)=>Be(ve,W)||j.get(ve,W,ie),has:(ve,W)=>!!Be(ve,W)||j.has(ve,W)}))},5861:(Je,we,N)=>{function h(O,ue,re,pe,le,oe,de){try{var $=O[oe](de),B=$.value}catch(te){return void re(te)}$.done?ue(B):Promise.resolve(B).then(pe,le)}function X(O){return function(){var ue=this,re=arguments;return new Promise(function(pe,le){var oe=O.apply(ue,re);function de(B){h(oe,pe,le,de,$,"next",B)}function $(B){h(oe,pe,le,de,$,"throw",B)}de(void 0)})}}N.d(we,{Z:()=>X})}},Je=>{Je(Je.s=415)}]);